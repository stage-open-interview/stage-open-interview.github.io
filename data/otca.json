{"questions":[{"id":"q-838","question":"Youâ€™re building a minimal product API in Express. Implement routes GET /products and GET /products/:id that returns 404 when not found. Include input validation, safe DB access via parameterized queries, and robust error handling. Explain your approach and provide a concise code sample?","answer":"Define two routes in Express: GET /products returns a list, GET /products/:id returns a single product or 404. Validate id as a positive integer; use parameterized queries to fetch data; sanitize inpu","explanation":"## Why This Is Asked\nInterview context explanation.\n\n## Key Concepts\n- Express routing\n- Input validation and sanitization\n- Parameterized queries to prevent SQL injection\n- Error handling middleware\n- Testing coverage (200/400/404)\n- Response shaping and caching\n\n## Code Example\n```javascript\nconst express = require('express');\nconst app = express();\nconst sqlite3 = require('sqlite3').verbose();\nconst db = new sqlite3.Database(':memory:');\napp.get('/products', (req, res) => {\n  db.all('SELECT id, name, price FROM products', [], (err, rows) => {\n    if (err) return res.status(500).json({error:'db'});\n    res.json(rows);\n  });\n});\napp.get('/products/:id', (req, res) => {\n  const id = parseInt(req.params.id, 10);\n  if (Number.isNaN(id) || id <= 0) return res.status(400).json({error:'invalid_id'});\n  db.get('SELECT id, name, price FROM products WHERE id = ?', [id], (err, row) => {\n    if (err) return res.status(500).json({error:'db'});\n    if (!row) return res.status(404).json({error:'not_found'});\n    res.json(row);\n  });\n});\n```\n\n## Follow-up Questions\n- How would you add pagination to /products?\n- How do you test error paths (400/404/500) effectively?","diagram":"flowchart TD\n  A[Client] --> B[Request /products]\n  B --> C{Find in DB}\n  C -- Found --> D[Return 200]\n  C -- Not Found --> E[Return 404]\n  D --> F[End]\n  E --> F","difficulty":"beginner","tags":["otca"],"channel":"otca","subChannel":"general","sourceUrl":null,"videos":{"shortVideo":null,"longVideo":null},"companies":["Airbnb","Discord","Meta"],"eli5":null,"relevanceScore":null,"voiceKeywords":null,"voiceSuitable":false,"isNew":false,"lastUpdated":"2026-01-12T13:23:19.628Z","createdAt":"2026-01-12T13:23:19.628Z"},{"id":"q-908","question":"You have a global edge API gateway handling peak bursts. How would you implement a distributed token-bucket rate limiter per API key across regions using Redis? Outline the Lua script for atomic refill and consume (capacity 1000, refill 50 tokens/sec), how you expose headers, handle clock skew, and fallback when Redis is unavailable?","answer":"Design a distributed token-bucket rate limiter for a global edge API gateway across regions using Redis. Outline the Lua script for atomic refill and consume (capacity 1000, refill 50 tokens/sec), how","explanation":"## Why This Is Asked\nTests real distributed rate limiting in a high-traffic, multi-region setup and probes practical trade-offs for latency, consistency, and failure handling.\n\n## Key Concepts\n- Distributed state via Redis\n- Token bucket algorithm\n- Atomic Lua scripting for refill/consume\n- Client-facing headers for rate limits\n- Fault tolerance and Redis fallback strategies\n\n## Code Example\n```lua\n-- Redis Lua script for token bucket\nlocal key = KEYS[1]\nlocal capacity = tonumber(ARGV[1])\nlocal refill = tonumber(ARGV[2])\nlocal now = tonumber(ARGV[3])\n\nlocal tokens = tonumber(redis.call('GET', key) or capacity)\nlocal last = tonumber(redis.call('GET', key .. ':t') or now)\nlocal delta = math.max(0, now - last)\nlocal new_tokens = math.min(capacity, tokens + delta * refill)\n\nif new_tokens < 1 then\n  return {0, new_tokens}\nelse\n  new_tokens = new_tokens - 1\n  redis.call('SET', key, new_tokens)\n  redis.call('SET', key .. ':t', now)\n  return {1, new_tokens}\nend\n```\n\n## Follow-up Questions\n- How would you test correctness under clock skew?\n- How would you monitor and alert for rate-limiter misbehaviors?","diagram":null,"difficulty":"intermediate","tags":["otca"],"channel":"otca","subChannel":"general","sourceUrl":null,"videos":{"shortVideo":null,"longVideo":null},"companies":["Bloomberg","Cloudflare","Square"],"eli5":null,"relevanceScore":null,"voiceKeywords":null,"voiceSuitable":false,"isNew":false,"lastUpdated":"2026-01-12T14:48:07.232Z","createdAt":"2026-01-12T14:48:07.232Z"}],"subChannels":["general"],"companies":["Airbnb","Bloomberg","Cloudflare","Discord","Meta","Square"],"stats":{"total":2,"beginner":1,"intermediate":1,"advanced":0,"newThisWeek":2}}