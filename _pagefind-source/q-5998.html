<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>You manage a Terraform setup with an S3 backend for two environments using kms_key_id to encrypt state. A policy requires rotating the CMK annually and validating the rotation won&#039;t affect plans. Describe a concrete plan to rotate the backend CMK with zero-downtime state encryption: (1) how to create and reference the new CMK, (2) how to migrate state with minimal plan changes, (3) how to test and gate this in CI before promotion, and (4) how to decommission the old key after verification. Include concrete commands and config snippets?</title>
  <meta name="description" content="">
</head>
<body>
  <article data-pagefind-body>
    <h1 data-pagefind-meta="title">You manage a Terraform setup with an S3 backend for two environments using kms_key_id to encrypt state. A policy requires rotating the CMK annually and validating the rotation won&#039;t affect plans. Describe a concrete plan to rotate the backend CMK with zero-downtime state encryption: (1) how to create and reference the new CMK, (2) how to migrate state with minimal plan changes, (3) how to test and gate this in CI before promotion, and (4) how to decommission the old key after verification. Include concrete commands and config snippets?</h1>
    
    <div data-pagefind-filter="channel">terraform</div>
    <div data-pagefind-filter="difficulty">intermediate</div>
    <div data-pagefind-filter="topic">General</div>
    
    <div data-pagefind-meta="channel" data-pagefind-meta-value="terraform"></div>
    <div data-pagefind-meta="difficulty" data-pagefind-meta-value="intermediate"></div>
    <div data-pagefind-meta="id" data-pagefind-meta-value="q-5998"></div>
    
    <main>
      <section class="answer">
        
      </section>
      
      
      <section class="tags">
        <span>terraform</span>
      </section>
      
      
      
      <section class="companies" data-pagefind-filter="company">
        <span>IBM</span> <span>Meta</span> <span>Twitter</span>
      </section>
      
    </main>
  </article>
</body>
</html>