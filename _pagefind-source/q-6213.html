<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Design a per-user event store that supports recordEvent(userId, eventType, timestamp) and removeEvent(userId, eventType, timestamp) with duplicates allowed. Implement queries queryCountInWindow(userId, eventType, tStart, tEnd) returning the number of events of that type for the user in [tStart, tEnd], and kthEventTimeInWindow(userId, eventType, tStart, tEnd, k) returning the k-th earliest event time in that window. Aim for O(log n) updates and queries; discuss a practical data structure and how you would handle duplicates and time-based versioning?</title>
  <meta name="description" content="">
</head>
<body>
  <article data-pagefind-body>
    <h1 data-pagefind-meta="title">Design a per-user event store that supports recordEvent(userId, eventType, timestamp) and removeEvent(userId, eventType, timestamp) with duplicates allowed. Implement queries queryCountInWindow(userId, eventType, tStart, tEnd) returning the number of events of that type for the user in [tStart, tEnd], and kthEventTimeInWindow(userId, eventType, tStart, tEnd, k) returning the k-th earliest event time in that window. Aim for O(log n) updates and queries; discuss a practical data structure and how you would handle duplicates and time-based versioning?</h1>
    
    <div data-pagefind-filter="channel">data-structures</div>
    <div data-pagefind-filter="difficulty">intermediate</div>
    <div data-pagefind-filter="topic">General</div>
    
    <div data-pagefind-meta="channel" data-pagefind-meta-value="data-structures"></div>
    <div data-pagefind-meta="difficulty" data-pagefind-meta-value="intermediate"></div>
    <div data-pagefind-meta="id" data-pagefind-meta-value="q-6213"></div>
    
    <main>
      <section class="answer">
        
      </section>
      
      
      <section class="tags">
        <span>data-structures</span>
      </section>
      
      
      
      <section class="companies" data-pagefind-filter="company">
        <span>Google</span> <span>Lyft</span> <span>PayPal</span>
      </section>
      
    </main>
  </article>
</body>
</html>