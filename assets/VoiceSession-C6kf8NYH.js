import{u as xe,r as p,c as me,d as he,j as e,q as _,H as z,af as J,m as Q,C as ue,n as $,Z as U,k as Z,T as fe,ag as pe}from"./index-DR5nu-Bq.js";import{S as R}from"./SEOHead-KjERPAuS.js";import{u as be,L as X}from"./ListenButton-aIlPjXkX.js";import{Q as ge}from"./QuestionHistory-pXxz9UNb.js";import{L as je}from"./loader-circle-Bnyc4jaq.js";import{T}from"./target-BjTMjVd6.js";import{M as ee}from"./volume-x-BvatKoSc.js";import{P as we}from"./play-D1l1c_AS.js";import{P as Ne}from"./pen-line-Cgy_6o-o.js";import{S as se}from"./square-ClIOtxvD.js";import{R as te}from"./rotate-ccw-GShVXQmm.js";import{C as O}from"./circle-x-81uRdnC6.js";import{B as V}from"./book-open-DLeW06yH.js";import{M as ie}from"./mic-Dl9nVotw.js";import{C as B}from"./chart-column-CmCpBFtR.js";import{A as H}from"./arrow-right-DoAmmcbL.js";import"./text-to-speech-JKTbiyjG.js";import"./volume-2-QX_mFnuA.js";import"./history-C1UHErrd.js";import"./trash-2-F_kkFkb7.js";import"./triangle-alert-XT67TdGa.js";import"./square-pen-D7Q00GbA.js";import"./plus-DfYC7nqQ.js";import"./user-BPaGGodp.js";import"./bot-B0yPun94.js";import"./clock-DEFb1TXl.js";import"./chevron-down-DaH2uL2f.js";let F=[];async function ve(){if(F.length>0)return F;try{const s=await fetch("/data/voice-sessions.json");return s.ok?(F=(await s.json()).sessions||[],F):(console.warn("Voice sessions file not found, will generate from questions"),[])}catch(s){return console.error("Failed to load voice sessions:",s),[]}}function ye(s,i){const t=[];for(let n=0;n<s.questionIds.length;n++){const l=s.questionIds[n],c=i.find(x=>x.id===l);if(c){const x=c.voiceKeywords||[],y=Se(x),r=ke(c.answer,x);t.push({id:c.id,question:c.question,criticalPoints:y,idealAnswer:r,difficulty:c.difficulty,order:n+1})}}return t}function Se(s){const i=[];for(let t=0;t<s.length;t++){const n=s[t],l=t===0?3:t<=2?2:1,c=Ce(n);i.push({phrase:n,weight:l,alternatives:c})}return i}function Ce(s){const i=s.toLowerCase(),t=[],n={kubernetes:["k8s","kube","container orchestration"],"load balancer":["lb","load balancing","traffic distribution"],database:["db","data store","datastore"],availability:["uptime","high availability","ha"],latency:["response time","delay","lag"],throughput:["bandwidth","capacity","requests per second"],microservices:["micro services","microservice","service-oriented"],authentication:["auth","authn","login"],authorization:["authz","permissions","access control"],caching:["cache","cached","in-memory"],replication:["replicate","replica","copies"],sharding:["shard","partitioning","horizontal partition"],monitoring:["monitor","observability","metrics"],deployment:["deploy","release","rollout"],scalability:["scale","scaling","scalable"],consistency:["consistent","data consistency"],idempotency:["idempotent","safe to retry"],"ci/cd":["continuous integration","continuous deployment","pipeline"],"eventual consistency":["eventually consistent","async consistency"],"strong consistency":["strongly consistent","immediate consistency"],"horizontal scaling":["scale out","scaling horizontally"],"vertical scaling":["scale up","scaling vertically"],"api gateway":["gateway","api management"],"message queue":["queue","message broker","mq"],"rate limiting":["throttling","rate limit"],"circuit breaker":["circuit breaking","fail fast"],"service mesh":["mesh","sidecar proxy"],container:["docker","containerized"],orchestration:["orchestrator","orchestrating"]};return n[i]&&t.push(...n[i]),i.endsWith("s")&&i.length>3?t.push(i.slice(0,-1)):i.endsWith("s")||t.push(i+"s"),i.includes("-")?t.push(i.replace(/-/g," ")):i.includes(" ")&&t.push(i.replace(/ /g,"-")),t}function ke(s,i){if(!s)return"";const t=s.split(/[.!?]+/).filter(x=>x.trim().length>10);if(t.length===0)return s.trim();const n=i.map(x=>x.toLowerCase()),l=t.filter(x=>n.some(y=>x.toLowerCase().includes(y)));return(l.length>0?l.slice(0,2):t.slice(0,2)).map(x=>x.trim()).join(". ")+"."}function Ie(s,i){const t=s.toLowerCase().trim(),{criticalPoints:n}=i,l=[],c=[];let x=0,y=0;for(const g of n){const I=g.phrase.toLowerCase();if(y+=g.weight,t.includes(I)){l.push({phrase:g.phrase,weight:g.weight}),x+=g.weight;continue}g.alternatives.some(m=>t.includes(m.toLowerCase()))?(l.push({phrase:g.phrase,weight:g.weight}),x+=g.weight):c.push({phrase:g.phrase,weight:g.weight})}const r=y>0?x/y*100:50,N=qe(t,n.map(g=>g.phrase)),f=Math.min(N.length*3,10),k=t.split(/\s+/).length,b=k<5?15:k<8?5:0,v=Math.min(100,Math.max(0,Math.round(r+f-b))),C=v>=60,S=Qe(v,l,c);return{questionId:i.id,userAnswer:s,score:v,pointsCovered:l,pointsMissed:c,weightedScore:x,maxPossibleScore:y,isCorrect:C,feedback:S}}function qe(s,i){const t=["scalability","availability","reliability","latency","throughput","consistency","partition","replication","sharding","caching","load balancer","microservices","distributed","fault tolerance","monitoring","logging","alerting","sla","slo","sli","kubernetes","docker","ci/cd","deployment","rollback"],n=[],l=i.map(c=>c.toLowerCase());for(const c of t)s.includes(c)&&!l.includes(c)&&n.push(c);return n}function Qe(s,i,t){const l=[...t].sort((c,x)=>x.weight-c.weight).map(c=>c.phrase);return s>=80?"Excellent! You covered the key concepts well.":s>=60?l.length>0?`Good answer! Also consider: ${l.slice(0,2).join(", ")}.`:"Good answer with the main points covered.":s>=40?`Partial answer. Key terms to include: ${l.slice(0,3).join(", ")}.`:`Review this topic. Focus on: ${l.slice(0,3).join(", ")}.`}function $e(s,i){return{session:s,questions:i,currentQuestionIndex:0,answers:[],startedAt:new Date().toISOString(),status:"intro"}}function Re(s){return{...s,status:"in-progress"}}function Me(s){return s.status==="completed"?null:s.questions[s.currentQuestionIndex]||null}function Pe(s,i){const t=s.questions[s.currentQuestionIndex];if(!t)return s;const n=Ie(i,t),l=[...s.answers,n],c=s.currentQuestionIndex>=s.questions.length-1;return{...s,answers:l,status:c?"completed":"in-progress"}}function Ae(s){return s.currentQuestionIndex>=s.questions.length-1?{...s,status:"completed"}:{...s,currentQuestionIndex:s.currentQuestionIndex+1}}function Te(s){const{session:i,answers:t}=s,n=t.reduce((m,u)=>m+u.weightedScore,0),l=t.reduce((m,u)=>m+u.maxPossibleScore,0),c=l>0?Math.round(n/l*100):0;let x;c>=80?x="excellent":c>=60?x="good":c>=40?x="needs-work":x="review-topic";const r=t.flatMap(m=>m.pointsMissed).sort((m,u)=>u.weight-m.weight),N=Array.from(new Set(r.map(m=>m.phrase))),f=t.flatMap(m=>m.pointsCovered),k=Array.from(new Set(f.map(m=>m.phrase))),b=[],v=t.filter(m=>m.isCorrect).length;v===t.length?b.push("Perfect score - all questions answered correctly!"):v>=t.length*.7&&b.push(`Strong performance: ${v}/${t.length} correct`);const C=f.filter(m=>m.weight>=2).length;C>=3&&b.push(`Covered ${C} critical concepts`),k.length>=5&&b.push(`Good coverage: ${k.slice(0,4).join(", ")}`);const S=[],g=r.filter(m=>m.weight>=2);if(g.length>0){const m=g.slice(0,3).map(u=>u.phrase);S.push(`Critical concepts to review: ${m.join(", ")}`)}else N.length>0&&S.push(`Review: ${N.slice(0,5).join(", ")}`);const I=t.filter(m=>m.score<50).length;I>0&&S.push(`${I} question(s) need more practice`);const M=Fe(c,v,t.length,i.topic);return{sessionId:i.id,topic:i.topic,answers:t,overallScore:c,verdict:x,summary:M,strengths:b,areasToImprove:S,completedAt:new Date().toISOString()}}function Fe(s,i,t,n){return s>=80?`Excellent understanding of ${n}! You answered ${i}/${t} questions correctly.`:s>=60?`Good grasp of ${n}. ${i}/${t} correct. Keep practicing!`:s>=40?`Basic understanding of ${n} (${i}/${t}). Review the missed concepts.`:`${n} needs more study. Score: ${i}/${t}. Review fundamentals.`}function Le(s){const i=[],t=s.filter(l=>l.voiceSuitable===!0&&l.voiceKeywords&&l.voiceKeywords.length>=3),n={};for(const l of t){const c=`${l.channel}:${l.subChannel}`;n[c]||(n[c]=[]),n[c].push(l)}for(const[l,c]of Object.entries(n)){if(c.length<4)continue;const[x,y]=l.split(":"),N=c.sort((b,v)=>{const C={beginner:0,intermediate:1,advanced:2};return(C[b.difficulty]||1)-(C[v.difficulty]||1)}).slice(0,6),f=N.map(b=>b.difficulty),k=f.includes("advanced")?"advanced":f.includes("intermediate")?"intermediate":"beginner";i.push({id:`gen-${x}-${y}-${Date.now()}`,topic:Ee(y),description:`Practice session covering ${y} concepts`,channel:x,difficulty:k,questionIds:N.map(b=>b.id),totalQuestions:N.length,estimatedMinutes:N.length*2})}return i}function Ee(s){return s.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase())}const K="voice-session-state",ae="voice-session-history";function L(s){try{localStorage.setItem(K,JSON.stringify(s))}catch(i){console.error("Failed to save session state:",i)}}function ze(){try{const s=localStorage.getItem(K);return s?JSON.parse(s):null}catch(s){return console.error("Failed to load session state:",s),null}}function ne(){try{localStorage.removeItem(K)}catch(s){console.error("Failed to clear session state:",s)}}function Oe(s){try{const i=Ve();i.unshift(s),localStorage.setItem(ae,JSON.stringify(i.slice(0,20)))}catch(i){console.error("Failed to save session to history:",i)}}function Ve(){try{const s=localStorage.getItem(ae);return s?JSON.parse(s):[]}catch(s){return console.error("Failed to load session history:",s),[]}}const re=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window);function fs(){const[,s]=xe(),{preferences:i}=be(),[t,n]=p.useState("loading"),[l,c]=p.useState([]),[x,y]=p.useState([]),[r,N]=p.useState(null),[f,k]=p.useState(null),[b,v]=p.useState(""),[C,S]=p.useState(""),[g,I]=p.useState(null),[M,m]=p.useState(""),u=p.useRef(null),A=p.useRef(null),{onVoiceInterview:G}=me(),{trackEvent:D}=he(),q=r?Me(r):null;p.useEffect(()=>{async function a(){try{const o=await pe();y(o);let d=await ve();d.length===0&&(d=Le(o));const h=i.subscribedChannels,j=d.filter(P=>h.includes(P.channel));c(j);const w=ze();if(w&&w.status!=="completed"){N(w),n("intro");return}n("select")}catch(o){I("Failed to load sessions"),console.error(o)}}a()},[i.subscribedChannels]),p.useEffect(()=>{if(!re)return;const a=window.SpeechRecognition||window.webkitSpeechRecognition,o=new a;return o.continuous=!0,o.interimResults=!0,o.lang="en-US",o.onresult=d=>{let h="",j="";for(let w=d.resultIndex;w<d.results.length;w++){const P=d.results[w];P.isFinal?j+=P[0].transcript+" ":h+=P[0].transcript}j&&(t==="practice"?m(w=>w+j):v(w=>w+j)),S(h)},o.onerror=d=>{console.error("Speech recognition error:",d.error),d.error==="not-allowed"&&I("Microphone access denied.")},o.onend=()=>{if(t==="recording"||t==="practice")try{o.start()}catch{}},u.current=o,()=>{o.stop()}},[t]),p.useEffect(()=>(A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[t]);const ce=p.useCallback(a=>{const o=ye(a,x);if(o.length<3){I("Not enough questions available for this session");return}const d=$e(a,o);N(d),L(d),n("intro")},[x]),oe=p.useCallback(()=>{if(!r)return;const a=Re(r);if(N(a),L(a),v(""),S(""),u.current)try{u.current.start(),n("recording")}catch{I("Failed to start recording."),n("editing")}},[r]),le=p.useCallback(()=>{u.current&&u.current.stop(),n("editing")},[]),de=p.useCallback(()=>{if(!r||!b.trim()){I("Please provide an answer.");return}const a=Pe(r,b.trim());N(a),L(a),n("feedback")},[r,b]),Y=p.useCallback(()=>{if(r)if(r.currentQuestionIndex>=r.questions.length-1){const a=Te(r);k(a),Oe(a),ne();const o=a.overallScore>=60?"hire":"no-hire";G(o),D({type:"voice_interview_completed",timestamp:new Date().toISOString()}),n("results")}else{const a=Ae(r);if(N(a),L(a),v(""),S(""),u.current)try{u.current.start(),n("recording")}catch{n("editing")}}},[r,G,D]),W=p.useCallback(()=>{if(v(""),S(""),u.current)try{u.current.start(),n("recording")}catch{n("editing")}},[]),E=p.useCallback(()=>{ne(),N(null),k(null),n("select")},[]);if(!re)return e.jsx("div",{className:"min-h-screen bg-[#0d1117] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#d29922]/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-10 h-10 text-[#d29922]"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Browser Not Supported"}),e.jsx("p",{className:"text-[#8b949e] mb-6",children:"Voice sessions require the Web Speech API. Use Chrome, Edge, or Safari."}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-[#238636] text-white font-medium rounded-xl hover:bg-[#2ea043] transition-colors",children:"Go Home"})]})});if(t==="loading")return e.jsx("div",{className:"min-h-screen bg-[#0d1117] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#58a6ff]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(je,{className:"w-8 h-8 animate-spin text-[#58a6ff]"})}),e.jsx("p",{className:"text-[#8b949e]",children:"Loading sessions..."})]})});if(t==="select"){const a={};for(const o of l)a[o.channel]||(a[o.channel]=[]),a[o.channel].push(o);return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Voice Sessions | Code Reels",description:"Practice interview topics with focused question sessions"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-[#8b949e]"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#a371f7] to-[#f778ba] flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white",children:"Voice Sessions"}),e.jsxs("p",{className:"text-xs text-[#8b949e]",children:[l.length," sessions available"]})]})]})]}),e.jsx(J,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-6",children:l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#21262d] flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-10 h-10 text-[#6e7681]"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Sessions Available"}),e.jsx("p",{className:"text-[#8b949e] mb-6",children:"Subscribe to channels to unlock voice sessions."}),e.jsx("button",{onClick:()=>s("/channels"),className:"px-6 py-3 bg-[#238636] text-white font-medium rounded-xl hover:bg-[#2ea043] transition-colors",children:"Subscribe to Channels"})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(a).map(([o,d])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xs font-semibold text-[#8b949e] uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#58a6ff]"}),o.replace(/-/g," ")]}),e.jsx("div",{className:"grid gap-3",children:d.map(h=>e.jsx(Q.button,{onClick:()=>ce(h),whileHover:{scale:1.01},whileTap:{scale:.99},className:"p-5 bg-[#161b22] border border-[#30363d] rounded-2xl text-left hover:border-[#58a6ff]/50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white group-hover:text-[#58a6ff] transition-colors mb-1",children:h.topic}),e.jsx("p",{className:"text-sm text-[#8b949e] mb-3",children:h.description}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg ${h.difficulty==="beginner"?"bg-[#238636]/20 text-[#3fb950]":h.difficulty==="intermediate"?"bg-[#d29922]/20 text-[#d29922]":"bg-[#f85149]/20 text-[#f85149]"}`,children:h.difficulty}),e.jsxs("span",{className:"text-xs text-[#6e7681] flex items-center gap-1",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),h.totalQuestions," questions"]}),e.jsxs("span",{className:"text-xs text-[#6e7681]",children:["~",h.estimatedMinutes," min"]})]})]}),e.jsx("div",{className:"p-2 rounded-lg bg-[#21262d] group-hover:bg-[#58a6ff]/20 transition-colors",children:e.jsx(ue,{className:"w-5 h-5 text-[#6e7681] group-hover:text-[#58a6ff]"})})]})},h.id))})]},o))})})]})]})}if(t==="intro"&&r)return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:`${r.session.topic} | Voice Session`,description:"Voice interview session practice"}),e.jsx("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3] flex items-center justify-center p-4",children:e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-lg w-full",children:e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-[#a371f7] to-[#f778ba] flex items-center justify-center mx-auto mb-6",children:e.jsx(T,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.session.topic}),e.jsxs("p",{className:"text-[#8b949e] mb-6",children:[r.questions.length," questions â€¢ ~",r.session.estimatedMinutes," min"]}),e.jsx("div",{className:"bg-[#0d1117] rounded-xl p-4 mb-6 text-left",children:e.jsx("p",{className:"text-sm text-[#8b949e]",children:r.session.description})}),e.jsxs("div",{className:"space-y-3 mb-8 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#238636]/20 flex items-center justify-center",children:e.jsx($,{className:"w-4 h-4 text-[#3fb950]"})}),e.jsx("span",{children:"Answer each question in 1-2 sentences"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#58a6ff]/20 flex items-center justify-center",children:e.jsx(U,{className:"w-4 h-4 text-[#58a6ff]"})}),e.jsx("span",{children:"Use specific technical terms"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#a371f7]/20 flex items-center justify-center",children:e.jsx(Z,{className:"w-4 h-4 text-[#a371f7]"})}),e.jsx("span",{children:"Get instant feedback after each answer"})]})]})]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] border-t border-[#30363d] flex gap-3",children:[e.jsx("button",{onClick:E,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors",children:"Back"}),e.jsxs("button",{onClick:oe,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Start Session"]})]})]})})})]});if((t==="recording"||t==="editing")&&r&&q){const a=(r.currentQuestionIndex+1)/r.questions.length*100;return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:`Q${r.currentQuestionIndex+1} | ${r.session.topic}`,description:"Answer the interview question"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:E,className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-[#8b949e]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white text-sm",children:r.session.topic}),e.jsxs("p",{className:"text-xs text-[#8b949e]",children:["Question ",r.currentQuestionIndex+1," of ",r.questions.length]})]})]}),e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg ${q.difficulty==="beginner"?"bg-[#238636]/20 text-[#3fb950]":q.difficulty==="intermediate"?"bg-[#d29922]/20 text-[#d29922]":"bg-[#f85149]/20 text-[#f85149]"}`,children:q.difficulty}),e.jsx(ge,{questionId:q.id,questionType:"question",size:"sm"})]}),e.jsx("div",{className:"pb-3",children:e.jsx("div",{className:"h-1.5 bg-[#21262d] rounded-full overflow-hidden",children:e.jsx(Q.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-gradient-to-r from-[#a371f7] to-[#f778ba] rounded-full"})})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-[#58a6ff]/10 flex-shrink-0",children:e.jsx(ee,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-medium text-white leading-relaxed",children:q.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx(X,{text:q.question,label:"Listen",size:"sm"}),e.jsxs("span",{className:"text-xs text-[#6e7681]",children:[q.criticalPoints.length," key points"]})]})]})]}),g&&e.jsx("div",{className:"mt-4 p-4 bg-[#f85149]/10 border border-[#f85149]/30 rounded-xl text-[#f85149] text-sm",children:g})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[t==="recording"&&e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-[#f85149]/10 border border-[#f85149]/30 rounded-full",children:[e.jsx("span",{className:"w-3 h-3 bg-[#f85149] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-[#f85149]",children:"Recording"})]}),t==="editing"&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#d29922]/10 border border-[#d29922]/30 rounded-full",children:[e.jsx(Ne,{className:"w-4 h-4 text-[#d29922]"}),e.jsx("span",{className:"text-sm text-[#d29922]",children:"Edit, then submit"})]})]}),e.jsxs("div",{className:"mb-6",children:[t==="editing"?e.jsx("textarea",{value:b,onChange:o=>v(o.target.value),className:"w-full p-4 bg-[#0d1117] border border-[#d29922]/30 rounded-xl min-h-[100px] text-sm text-[#e6edf3] resize-y focus:outline-none focus:ring-2 focus:ring-[#d29922]/50",placeholder:"Edit your answer..."}):e.jsx("div",{className:"p-4 bg-[#0d1117] rounded-xl min-h-[80px] border border-[#30363d]",children:e.jsxs("p",{className:"text-sm text-[#e6edf3] whitespace-pre-wrap",children:[b,e.jsx("span",{className:"text-[#6e7681]",children:C}),t==="recording"&&e.jsx("span",{className:"animate-pulse text-[#58a6ff]",children:"|"})]})}),e.jsxs("p",{className:"text-xs text-[#6e7681] mt-2 flex items-center gap-1.5",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-[#d29922]"}),"Keep it brief: 1-2 sentences with key terms"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t==="recording"&&e.jsxs("button",{onClick:le,className:"flex items-center gap-3 px-8 py-4 bg-[#f85149] text-white font-semibold rounded-2xl hover:bg-[#da3633] transition-all",children:[e.jsx(se,{className:"w-5 h-5"}),"Stop"]}),t==="editing"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-5 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Re-record"]}),e.jsxs("button",{onClick:de,disabled:!b.trim(),className:"flex items-center gap-3 px-8 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-all disabled:opacity-50",children:[e.jsx($,{className:"w-5 h-5"}),"Submit"]})]})]})]})]})]})]})}if(t==="feedback"&&r){const a=r.answers[r.answers.length-1],o=r.questions[r.currentQuestionIndex],d=r.currentQuestionIndex>=r.questions.length-1,h=()=>{if(m(""),S(""),n("practice"),u.current)try{u.current.start()}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Feedback | Voice Session",description:"Review your answer feedback"}),e.jsx("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3] flex items-center justify-center p-4",children:e.jsx(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-lg w-full",children:e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-2xl flex items-center justify-center mx-auto mb-4 ${a.isCorrect?"bg-[#238636]/20":"bg-[#f85149]/20"}`,children:a.isCorrect?e.jsx($,{className:"w-12 h-12 text-[#3fb950]"}):e.jsx(O,{className:"w-12 h-12 text-[#f85149]"})}),e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[a.score,"%"]}),e.jsx("p",{className:`text-sm font-medium ${a.isCorrect?"text-[#3fb950]":"text-[#f85149]"}`,children:a.isCorrect?"Good answer!":"Needs improvement"})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{className:"bg-[#0d1117] rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-[#8b949e]",children:a.feedback}),e.jsxs("div",{className:"mt-2 text-xs text-[#6e7681]",children:["Score: ",a.weightedScore,"/",a.maxPossibleScore," weighted points"]})]}),e.jsxs("div",{className:"space-y-3",children:[a.pointsCovered.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-[#3fb950] mb-2 flex items-center gap-1.5",children:[e.jsx($,{className:"w-3.5 h-3.5"})," Covered"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.pointsCovered.map((j,w)=>e.jsxs("span",{className:"px-2.5 py-1 text-xs bg-[#238636]/20 text-[#3fb950] rounded-lg font-medium flex items-center gap-1",children:[j.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",j.weight]})]},w))})]}),a.pointsMissed.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-[#f85149] mb-2 flex items-center gap-1.5",children:[e.jsx(O,{className:"w-3.5 h-3.5"})," Missed"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.pointsMissed.map((j,w)=>e.jsxs("span",{className:"px-2.5 py-1 text-xs bg-[#f85149]/20 text-[#f85149] rounded-lg font-medium flex items-center gap-1",children:[j.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",j.weight]})]},w))})]})]}),o.idealAnswer&&e.jsx("div",{className:"bg-[#58a6ff]/10 border border-[#58a6ff]/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[#58a6ff]/20",children:e.jsx(V,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-[#58a6ff] mb-1",children:"Practice the Ideal Answer"}),e.jsx("p",{className:"text-xs text-[#8b949e] mb-3",children:"Read aloud to practice pronunciation and memorize key terms."}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-1.5 bg-[#58a6ff]/20 text-[#58a6ff] text-xs font-medium rounded-lg hover:bg-[#58a6ff]/30 transition-colors",children:[e.jsx(ie,{className:"w-3.5 h-3.5"}),"Practice Reading Aloud"]})]})]})})]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] border-t border-[#30363d] flex gap-3",children:[e.jsxs("button",{onClick:W,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Retry"]}),e.jsx("button",{onClick:Y,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),"Results"]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(H,{className:"w-4 h-4"})]})})]})]})})})]})}if(t==="practice"&&r){const a=r.questions[r.currentQuestionIndex],o=r.currentQuestionIndex>=r.questions.length-1,d=()=>{u.current&&u.current.stop(),n("feedback")},h=()=>{u.current&&u.current.stop(),m(""),S(""),Y()};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Practice Mode | Voice Session",description:"Practice reading the ideal answer"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:d,className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(H,{className:"w-5 h-5 rotate-180 text-[#8b949e]"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#58a6ff]/20 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white text-sm",children:"Practice Mode"}),e.jsx("p",{className:"text-xs text-[#8b949e]",children:"Read the ideal answer aloud"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-[#f85149]/10 border border-[#f85149]/30 rounded-full",children:[e.jsx("span",{className:"w-3 h-3 bg-[#f85149] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-[#f85149]",children:"Recording"})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl bg-[#58a6ff]/10 border border-[#58a6ff]/30 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-[#58a6ff] flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Read This Aloud"]}),e.jsx(X,{text:a.idealAnswer,label:"Listen",size:"sm"})]}),e.jsx("p",{className:"text-lg text-white leading-relaxed",children:a.idealAnswer}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#58a6ff]/20",children:[e.jsx("p",{className:"text-xs text-[#8b949e] mb-2",children:"Key points to emphasize:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.criticalPoints.map((j,w)=>e.jsxs("span",{className:`px-2.5 py-1 text-xs rounded-lg font-medium flex items-center gap-1 ${j.weight===3?"bg-[#58a6ff]/30 text-[#79c0ff]":j.weight===2?"bg-[#58a6ff]/20 text-[#58a6ff]":"bg-[#58a6ff]/10 text-[#58a6ff]/80"}`,children:[j.phrase,j.weight>1&&e.jsxs("span",{className:"opacity-60",children:["Ã—",j.weight]})]},w))})]})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-[#f85149]"}),"Your Recording"]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] rounded-xl min-h-[100px] border border-[#30363d]",children:[e.jsxs("p",{className:"text-sm text-[#e6edf3] whitespace-pre-wrap",children:[M,e.jsx("span",{className:"text-[#6e7681]",children:C}),e.jsx("span",{className:"animate-pulse text-[#58a6ff]",children:"|"})]}),!M&&!C&&e.jsx("p",{className:"text-[#6e7681] text-sm",children:"Start reading the answer above..."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:d,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Back to Feedback"]}),e.jsx("button",{onClick:h,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),"Finish Session"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),"Done, Next Question"]})})]})]})]})]})}if(t==="results"&&f){const o=(d=>{switch(d){case"excellent":return{bg:"bg-[#238636]/20",text:"text-[#3fb950]",icon:"ðŸŒŸ"};case"good":return{bg:"bg-[#58a6ff]/20",text:"text-[#58a6ff]",icon:"ðŸ‘"};case"needs-work":return{bg:"bg-[#d29922]/20",text:"text-[#d29922]",icon:"ðŸ“š"};default:return{bg:"bg-[#f85149]/20",text:"text-[#f85149]",icon:"ðŸ”„"}}})(f.verdict);return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Results | Voice Session",description:"Your session results and score"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#f1c40f] to-[#d29922] flex items-center justify-center",children:e.jsx(fe,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"font-semibold text-white",children:"Session Complete"})]}),e.jsx(J,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-8 mb-6 text-center",children:[e.jsx("div",{className:`w-28 h-28 rounded-2xl ${o.bg} flex items-center justify-center mx-auto mb-6`,children:e.jsxs("span",{className:`text-5xl font-bold ${o.text}`,children:[f.overallScore,"%"]})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:f.topic}),e.jsxs("p",{className:`text-lg font-medium ${o.text} mb-4`,children:[o.icon," ",f.verdict==="excellent"?"Excellent!":f.verdict==="good"?"Good Job!":f.verdict==="needs-work"?"Keep Practicing":"Review Topic"]}),e.jsx("p",{className:"text-sm text-[#8b949e] max-w-md mx-auto",children:f.summary})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-[#58a6ff]"}),"Question Breakdown"]}),e.jsx("div",{className:"space-y-3",children:f.answers.map((d,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#0d1117] rounded-xl border border-[#30363d]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold ${d.isCorrect?"bg-[#238636]/20 text-[#3fb950]":"bg-[#f85149]/20 text-[#f85149]"}`,children:h+1}),e.jsxs("span",{className:"text-sm text-[#8b949e]",children:["Question ",h+1]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-lg font-bold ${d.score>=60?"text-[#3fb950]":"text-[#f85149]"}`,children:[d.score,"%"]}),d.isCorrect?e.jsx($,{className:"w-5 h-5 text-[#3fb950]"}):e.jsx(O,{className:"w-5 h-5 text-[#f85149]"})]})]},d.questionId))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[f.strengths.length>0&&e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-5",children:[e.jsxs("h4",{className:"font-semibold text-[#3fb950] mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"})," Strengths"]}),e.jsx("ul",{className:"space-y-2",children:f.strengths.map((d,h)=>e.jsxs("li",{className:"text-sm text-[#8b949e] flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-[#3fb950] flex-shrink-0 mt-0.5"}),d]},h))})]}),f.areasToImprove.length>0&&e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-5",children:[e.jsxs("h4",{className:"font-semibold text-[#d29922] mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"})," To Improve"]}),e.jsx("ul",{className:"space-y-2",children:f.areasToImprove.map((d,h)=>e.jsxs("li",{className:"text-sm text-[#8b949e] flex items-start gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-[#d29922] flex-shrink-0 mt-0.5"}),d]},h))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>s("/"),className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Home"]}),e.jsxs("button",{onClick:E,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"New Session"]})]})]})]})]})}return null}export{fs as default};
