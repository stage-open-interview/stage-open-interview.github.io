import{r as p,j as e,n as I,i as R,m as y,ai as W,J as D,Z as T,aj as P,o as B}from"./index-Bj61abp1.js";import{Q as E}from"./QuestionHistory-B1JU1N3c.js";import{e as F,f as Q,i as V,r as A,j as G,M as H,b as U,h as z,v as O}from"./index-afPO3Hr9.js";import{H as _}from"./hash-D8yzsBru.js";import{B as Y}from"./bookmark-Lv-x1QA7.js";import{B as Z,F as J,T as X,C as K,G as q}from"./tag-BJ6I63dM.js";import{C as ee}from"./clock-DfBVGWq0.js";import{T as k}from"./target-BVgqOxW0.js";import{E as L}from"./EnhancedMermaid-cd0uryD9.js";import{S as re,Y as te}from"./use-swipe-7TzM4Shp.js";import{G as se}from"./GiscusComments-CSUfBUxE.js";import{Q as ae}from"./QuestionFeedback-Bduqlh7k.js";import{B as ne}from"./book-open-DciULv9a.js";import{E as le}from"./external-link-h9rbZy50.js";import{F as ie}from"./file-text-ycuG3aMn.js";import{C as oe}from"./copy-BUz7CTEq.js";import{L as C}from"./lightbulb-BOCC31xo.js";import{C as ce}from"./chevron-down-HxEQahhA.js";import{P as de}from"./play-Ge2j41GY.js";import{B as xe}from"./youtube-CKHr920d.js";function me(r){return r?r.split(/`([^`]+)`/g).map((o,a)=>a%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:o},a):o):null}function pe({difficulty:r}){const t="hidden sm:block absolute bottom-8 right-8 w-32 h-32 lg:w-40 lg:h-40 opacity-[0.06] pointer-events-none select-none z-0";return r==="beginner"?e.jsxs("svg",{className:t,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("circle",{cx:"40",cy:"42",r:"5"}),e.jsx("circle",{cx:"60",cy:"42",r:"5"}),e.jsx("path",{d:"M38 52 Q50 62 62 52",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"5",r:"4"}),e.jsx("rect",{x:"18",y:"38",width:"6",height:"14",rx:"2"}),e.jsx("rect",{x:"76",y:"38",width:"6",height:"14",rx:"2"})]}):r==="intermediate"?e.jsxs("svg",{className:t,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("rect",{x:"35",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("rect",{x:"55",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("line",{x1:"40",y1:"55",x2:"60",y2:"55",strokeWidth:"3",stroke:"currentColor"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("polygon",{points:"50,2 46,8 54,8"}),e.jsx("circle",{cx:"82",cy:"50",r:"8",strokeWidth:"2",stroke:"currentColor",fill:"none"}),e.jsx("circle",{cx:"82",cy:"50",r:"3"})]}):e.jsxs("svg",{className:t,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("ellipse",{cx:"40",cy:"42",rx:"6",ry:"7"}),e.jsx("ellipse",{cx:"60",cy:"42",rx:"6",ry:"7"}),e.jsx("circle",{cx:"42",cy:"41",r:"2",fill:"white"}),e.jsx("circle",{cx:"62",cy:"41",r:"2",fill:"white"}),e.jsx("path",{d:"M38 56 Q50 52 62 56",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("ellipse",{cx:"78",cy:"35",rx:"3",ry:"5"}),e.jsx("ellipse",{cx:"82",cy:"45",rx:"2",ry:"4"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"5",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"3",r:"3"}),e.jsx("polygon",{points:"85,20 80,30 84,30 79,42 88,28 84,28"})]})}function Fe({question:r,questionNumber:t,totalQuestions:o,isMarked:a,isCompleted:d,onToggleMark:n,onTapQuestion:l,timerEnabled:m,timeLeft:c}){const[i,g]=p.useState(null),[b,h]=p.useState(!1),[s,u]=p.useState(!1);p.useEffect(()=>{if(r?.id){const x=F(r.id,r.channel,r.difficulty);g(f=>f?.questionId===x.questionId&&f?.totalReviews===x.totalReviews?f:x),h(!1),u(x.totalReviews>0)}},[r?.id,r?.channel,r?.difficulty]);const N=x=>{if(!r)return;const f=A(r.id,r.channel,r.difficulty,x);g(f),h(!0),u(!1)},w=()=>{if(!r)return;const x=G(r.id,r.channel,r.difficulty);g(x),u(!0)},j=(()=>{switch(r.difficulty){case"beginner":return{icon:T,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/20",label:"Easy"};case"intermediate":return{icon:k,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/20",label:"Medium"};case"advanced":return{icon:J,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",label:"Hard"};default:return{icon:k,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",label:"Unknown"}}})(),M=j.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-y-auto relative","data-testid":"question-panel",children:[e.jsx(pe,{difficulty:r.difficulty}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-muted/50 border border-border rounded-md",children:[e.jsx(_,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:r.id})]}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted rounded-md",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[t,e.jsx("span",{className:"text-muted-foreground/50",children:"/"}),o]})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md ${j.bg} border ${j.border}`,children:[e.jsx(M,{className:`w-3 h-3 ${j.color}`}),e.jsx("span",{className:`text-xs font-medium ${j.color}`,children:j.label})]}),r.isNew&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-md",children:[e.jsx(I,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"text-xs font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"NEW"})]}),d&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/10 border border-green-500/20 rounded-md",children:[e.jsx(R,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Done"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{questionId:r.id,questionType:"question",size:"sm"}),e.jsx("button",{onClick:n,className:`p-1.5 rounded-md transition-colors ${a?"bg-primary/10 text-primary border border-primary/20":"bg-muted text-muted-foreground hover:text-primary"}`,children:e.jsx(Y,{className:`w-4 h-4 ${a?"fill-current":""}`})})]})]}),e.jsxs("div",{className:`flex-1 flex flex-col justify-center max-w-2xl w-full ${l?"cursor-pointer lg:cursor-default":""}`,onClick:l,children:[r.companies&&r.companies.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[e.jsx(Z,{className:"w-3.5 h-3.5 text-muted-foreground"}),r.companies.map((x,f)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 text-xs font-medium rounded-full",children:x},f))]}),e.jsx(y.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`font-bold text-foreground leading-tight ${r.question.length>200?"text-sm sm:text-base lg:text-lg":r.question.length>100?"text-base sm:text-lg lg:text-xl":"text-lg sm:text-xl lg:text-2xl"}`,children:me(r.question)}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground uppercase tracking-wider font-medium",children:r.subChannel})}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[r.tags.slice(0,5).map(x=>e.jsx("span",{className:"px-1.5 py-0.5 bg-muted text-[9px] sm:text-[10px] font-mono text-muted-foreground rounded border border-border",children:W(x)},x)),r.tags.length>5&&e.jsxs("span",{className:"text-[9px] text-muted-foreground py-0.5",children:["+",r.tags.length-5]})]}),m&&c>0&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-2 bg-primary/5 border border-primary/20 rounded-lg self-start",children:[e.jsx(ee,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-lg font-mono font-bold text-primary tabular-nums",children:[String(Math.floor(c/60)).padStart(2,"0"),":",String(c%60).padStart(2,"0")]})]})]}),e.jsx("div",{className:"mt-auto pt-3 flex justify-start mb-12 sm:mb-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-500/5 border border-purple-500/20 rounded-lg px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(D,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-purple-500",children:"SRS"}),i&&e.jsx("span",{className:`text-[9px] px-1 py-0.5 rounded ${V(i.masteryLevel)} bg-muted/50`,children:Q(i.masteryLevel)})]}),b?e.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:"âœ“"}):s&&i?e.jsx("div",{className:"flex items-center gap-0.5",children:[{rating:"again",label:"ðŸ˜•",color:"bg-red-500/10 text-red-500 hover:bg-red-500/20"},{rating:"hard",label:"ðŸ¤”",color:"bg-orange-500/10 text-orange-500 hover:bg-orange-500/20"},{rating:"good",label:"ðŸ‘",color:"bg-green-500/10 text-green-500 hover:bg-green-500/20"},{rating:"easy",label:"ðŸŽ¯",color:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20"}].map(x=>e.jsx("button",{onClick:f=>{f.stopPropagation(),N(x.rating)},className:`w-6 h-6 flex items-center justify-center rounded text-xs transition-colors ${x.color}`,children:x.label},x.rating))}):e.jsx("button",{onClick:x=>{x.stopPropagation(),w()},className:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded hover:bg-purple-600",children:"+Add"})]})}),e.jsx("div",{className:"mt-3 text-center hidden sm:block",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[9px] font-mono",children:"â†’"})," to reveal answer"]})})]})}function ge(r){if(!r)return"";let t=r;t=t.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),t=t.replace(/\*\*\s*```/g,"**\n\n```"),t=t.replace(/```\s*\*\*/g,"```\n\n**"),t=t.replace(/```(\w*)\n([\s\S]*?)```/g,(d,n,l)=>{const m=l.replace(/\*\*/g,"");return"```"+n+`
`+m+"```"}),t=t.replace(/([^\n`])(\s*```)/g,"$1\n```"),t=t.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),t=t.replace(/:\s*```/g,":\n\n```"),t=t.replace(/^\*\*\s*$/gm,""),t=t.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**"),t=t.replace(/\*\*\s*\n\s*(\d+\.\s+[^*\n]+)\*\*/g,"**$1**"),t=t.replace(/\*\*\s*\n\s*(-\s+[^*\n]+)\*\*/g,"**$1**"),t=t.replace(/\*\*-\s+/g,`**
- `),t=t.replace(/\*\*(\d+)\.\s+/g,`**
$1. `),t=t.replace(/\*\*-\s*\*\*([^*]+)\*\*/g,`**
- **$1**`),t=t.replace(/\*\*-\s*\*\*([^*\n]+)/g,`**
- **$1**`),t=t.replace(/-\s*\*\*([^*]+)\*\*-\s+/g,`- **$1**
- `);const o=t.split(`
`),a=[];for(let d=0;d<o.length;d++){let n=o[d];const l=(n.match(/\*\*/g)||[]).length;l%2===1&&(n.trim().startsWith("**")&&l===1?n=n.replace(/^\s*\*\*\s*/,""):n.trim().endsWith("**")&&l===1&&(n=n.replace(/\s*\*\*\s*$/,""))),a.push(n)}return t=a.join(`
`),t=t.replace(/^[â€¢Â·]\s*/gm,"- "),(t.includes("â€¢")||t.includes("Â·"))&&(t=t.split(`
`).map(l=>{const m=(l.match(/[â€¢Â·]/g)||[]).length;if(m>1||m===1&&!l.trim().startsWith("â€¢")&&!l.trim().startsWith("Â·")){const c=l.split(/[â€¢Â·]/).map(i=>i.trim()).filter(i=>i);if(c.length>1)return c.map(i=>`- ${i}`).join(`
`)}return l.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),t=t.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),t=t.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),t=t.replace(/\n{3,}/g,`

`),t=t.replace(/^\n+/,""),t}function S(r){if(!r||typeof r!="string")return!1;const t=r.trim();if(!t||t.length<10)return!1;const o=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],a=t.split(`
`)[0].toLowerCase().trim();if(!o.some(m=>a.startsWith(m.toLowerCase())))return!1;const n=t.split(`
`).filter(m=>{const c=m.trim().toLowerCase();return c&&!c.startsWith("%%")&&!o.some(i=>c.startsWith(i.toLowerCase()))});if(n.length<3)return!1;const l=t.toLowerCase();return!(l.includes("start")&&l.includes("end")&&n.length<=3||l.match(/\bstart\b/g)?.length===1&&l.match(/\bend\b/g)?.length===1&&n.length<=2)}function $(r){return r?r.split(/`([^`]+)`/g).map((o,a)=>a%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-cyan-500/20 text-cyan-300 rounded text-[0.9em] font-mono",children:o},a):o):null}function ue({title:r,icon:t,children:o,defaultExpanded:a=!0,variant:d="default",badge:n}){const[l,m]=p.useState(a),c=typeof window<"u"&&window.innerWidth<640,i={default:"bg-card border-border",highlight:"bg-primary/5 border-primary/20",success:"bg-green-500/5 border-green-500/20",purple:"bg-purple-500/5 border-purple-500/20"},g={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs("div",{className:`rounded-lg border overflow-hidden ${i[d]}`,children:[e.jsxs("button",{onClick:()=>m(!l),className:"w-full flex items-center justify-between px-2.5 py-1.5 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:g[d],children:t}),e.jsx("span",{className:"font-medium text-xs",children:r}),n&&e.jsx("span",{className:"px-1 py-0.5 bg-primary/10 text-primary text-[8px] font-medium rounded",children:n})]}),e.jsx(ce,{className:`w-3.5 h-3.5 text-muted-foreground transition-transform ${l?"":"-rotate-90"}`})]}),c?l&&e.jsx("div",{className:"px-2.5 pb-2",children:o}):e.jsx(B,{initial:!1,children:l&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-2.5 pb-2",children:o})})})]})}function he({code:r,language:t}){const[o,a]=p.useState(!1),d=async()=>{await navigator.clipboard.writeText(r),a(!0),setTimeout(()=>a(!1),2e3)};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden border border-border bg-[#1e1e1e]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-1.5 sm:py-2 bg-muted/50 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary"}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:t||"code"})]}),e.jsx("button",{onClick:d,className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-0.5 sm:py-1 text-[10px] sm:text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-green-500",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(z,{language:t||"text",style:O,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLines:!0,wrapLongLines:!0,className:"!text-xs sm:!text-sm !p-3 sm:!p-4",children:r})]})}function fe({question:r,hasTldr:t,hasDiagram:o,hasEli5:a,hasVideo:d}){const[n,l]=p.useState(null),m=o&&n!==!1,c=[];t&&c.push("tldr"),m&&c.push("diagram"),a&&c.push("eli5"),d&&c.push("video");const[i,g]=p.useState(()=>t?"tldr":a?"eli5":d?"video":"diagram");p.useEffect(()=>{n===!1&&i==="diagram"&&(t?g("tldr"):a?g("eli5"):d&&g("video"))},[n,i,t,a,d]);const b=p.useCallback(s=>{l(s)},[]);if(c.length===0&&n===!1)return null;if(c.length===0&&!t&&!a&&!d&&n===null)return e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-border bg-card p-4 text-center text-muted-foreground text-sm",children:"Loading..."});if(c.length===0)return null;const h={tldr:{label:"TL;DR",icon:e.jsx(C,{className:"w-3.5 h-3.5"}),color:"text-cyan-400"},diagram:{label:"Diagram",icon:e.jsx(q,{className:"w-3.5 h-3.5"}),color:"text-purple-400"},eli5:{label:"ELI5",icon:e.jsx(xe,{className:"w-3.5 h-3.5"}),color:"text-green-400"},video:{label:"Video",icon:e.jsx(de,{className:"w-3.5 h-3.5"}),color:"text-pink-400"}};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl border border-white/10 bg-black/40 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-white/10 bg-black/20",children:c.map(s=>e.jsxs("button",{onClick:()=>g(s),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs sm:text-sm font-medium transition-all relative ${i===s?`${h[s].color} bg-white/5`:"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:[e.jsx("span",{className:i===s?h[s].color:"",children:h[s].icon}),e.jsx("span",{children:h[s].label}),i===s&&e.jsx(y.div,{layoutId:"activeTabIndicator",className:`absolute bottom-0 left-0 right-0 h-0.5 ${s==="tldr"?"bg-cyan-400":s==="diagram"?"bg-purple-400":s==="eli5"?"bg-green-400":"bg-pink-400"}`})]},s))}),e.jsx("div",{className:"p-2 sm:p-3",children:e.jsxs(B,{mode:"wait",children:[i==="tldr"&&t&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-cyan-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:$(r.answer)})]},"tldr"),i==="diagram"&&o&&e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(L,{chart:r.diagram,onRenderResult:b})},"diagram"),i==="eli5"&&a&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-base flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:$(r.eli5||"")})]},"eli5"),i==="video"&&d&&e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(te,{shortVideo:r.videos?.shortVideo,longVideo:r.videos?.longVideo})},"video")]})})]})}function Qe({question:r}){const t=p.useRef(null),o=typeof window<"u"&&window.innerWidth<640,[a,d]=p.useState(null);p.useEffect(()=>{P.getByQuestionId(r.id).then(d)},[r.id]);const n=!!r.answer,l=!o&&S(r.diagram),m=!!r.eli5,c=!!(r.videos?.shortVideo||r.videos?.longVideo),i=n||l||m||c,g=p.useCallback(b=>{const h=ge(b);return e.jsx(H,{remarkPlugins:[U],components:{code({className:s,children:u}){const N=/language-(\w+)/.exec(s||""),w=N?N[1]:"",v=String(u).replace(/\n$/,"");return!N&&!String(u).includes(`
`)?e.jsx("code",{className:"px-1 py-0.5 bg-primary/10 text-primary rounded text-[0.85em] font-mono",children:u}):w==="mermaid"?S(v)?e.jsx("div",{className:"my-3",children:e.jsx(L,{chart:v})}):null:e.jsx("div",{className:"my-2",children:e.jsx(he,{code:v,language:w})})},p({children:s}){return e.jsx("p",{className:"mb-2 leading-relaxed text-foreground/90 text-sm",children:s})},h1({children:s}){return e.jsx("h1",{className:"text-base font-bold mb-2 mt-4 text-foreground border-b border-border pb-1",children:s})},h2({children:s}){return e.jsx("h2",{className:"text-sm font-bold mb-2 mt-3 text-foreground",children:s})},h3({children:s}){return e.jsx("h3",{className:"text-sm font-semibold mb-1.5 mt-2 text-foreground/90",children:s})},strong({children:s}){return e.jsx("strong",{className:"font-semibold text-foreground",children:s})},ul({children:s}){return e.jsx("ul",{className:"space-y-1 mb-2 ml-1",children:s})},ol({children:s}){return e.jsx("ol",{className:"space-y-1 mb-2 ml-1 [counter-reset:list-counter]",children:s})},li({children:s,node:u}){const w=u?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-2 text-foreground/90 text-sm [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-0.5",children:w?e.jsx("span",{className:"text-xs font-medium before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:s})]})},a({href:s,children:u}){return e.jsx("a",{href:s,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:u})},blockquote({children:s}){return e.jsx("blockquote",{className:"border-l-2 border-primary/50 pl-3 py-1 my-2 bg-primary/5 text-muted-foreground italic text-sm",children:s})},table({children:s}){return e.jsx("div",{className:"my-2 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-sm",children:s})})},th({children:s}){return e.jsx("th",{className:"px-2 py-1.5 text-left font-semibold bg-muted border border-border text-xs",children:s})},td({children:s}){return e.jsx("td",{className:"px-2 py-1.5 border border-border text-sm",children:s})}},children:h})},[]);return e.jsx(y.div,{ref:t,initial:o?!1:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-background",children:e.jsxs("div",{className:"w-full px-3 sm:px-4 lg:px-6 py-2 sm:py-3 pb-16 space-y-1.5",children:[i&&e.jsx(fe,{question:r,hasTldr:n,hasDiagram:l,hasEli5:m,hasVideo:c}),e.jsx(ue,{title:"Full Explanation",icon:e.jsx(ne,{className:"w-3.5 h-3.5"}),defaultExpanded:!0,badge:r.explanation?`${Math.ceil(r.explanation.split(" ").length/200)} min`:void 0,children:e.jsx("div",{className:"prose prose-sm max-w-none",children:g(r.explanation)})}),e.jsxs("div",{className:"flex items-start justify-between gap-1.5 pt-0.5",children:[e.jsx("div",{className:"flex items-start gap-1.5 flex-1 min-w-0",children:r.tags&&r.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-2.5 h-2.5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-0.5",children:r.tags.map(b=>e.jsx("span",{className:"px-1 py-0.5 bg-muted text-[8px] font-mono text-muted-foreground rounded border border-border",children:W(b)},b))})]})}),e.jsx(ae,{questionId:r.id})]}),(r.sourceUrl||a)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[r.sourceUrl&&e.jsxs("a",{href:r.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-muted hover:bg-muted/80 border border-border rounded-md text-[10px]",children:[e.jsx(le,{className:"w-2.5 h-2.5 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Source"})]}),a&&e.jsxs("a",{href:`https://openstackdaily.github.io${a.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-cyan-500/10 hover:bg-cyan-500/20 border border-cyan-500/30 rounded-md text-[10px]",children:[e.jsx(ie,{className:"w-2.5 h-2.5 text-cyan-400"}),e.jsx("span",{className:"text-cyan-400",children:"Blog"})]})]}),e.jsx(re,{questionId:r.id,currentChannel:r.channel}),e.jsx(se,{questionId:r.id})]})})}export{Qe as A,Fe as Q};
