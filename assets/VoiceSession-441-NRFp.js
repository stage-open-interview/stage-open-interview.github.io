import{c as de,k as me,u as ue,r as h,q as xe,j as e,o as U,H as V,ac as X,t as he,m as M,h as Q,B,W as pe,ad as ge}from"./index-H7XuCIXl.js";import{S as R}from"./SEOHead-GT-oh_PU.js";import{u as fe,S as Z}from"./use-user-preferences-kDAeqR4X.js";import{L as ee}from"./ListenButton-D4Yo8JDs.js";import{L as be}from"./loader-circle-brD7b3hn.js";import{T}from"./target-B3iPTIWk.js";import{P as je}from"./play-C9GOyOFQ.js";import{M as Ne}from"./message-square-CJGd9ZQB.js";import{R as se}from"./rotate-ccw-DJFi61ji.js";import{C as K}from"./circle-x-Djm4ksQw.js";import{M as te}from"./mic-CoVEUJLB.js";import{C as G}from"./chart-column-BGWV3VhX.js";import{A as H}from"./arrow-right-DZDbYdyS.js";import"./text-to-speech-B4Hlh8Da.js";import"./volume-x-BPw8odhS.js";import"./volume-2-vt4Gf2Lq.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ye=de("pen-line",we);let L=[];async function ve(){if(L.length>0)return L;try{const s=await fetch("/data/voice-sessions.json");return s.ok?(L=(await s.json()).sessions||[],L):(console.warn("Voice sessions file not found, will generate from questions"),[])}catch(s){return console.error("Failed to load voice sessions:",s),[]}}function Se(s,n){const t=[];for(let i=0;i<s.questionIds.length;i++){const l=s.questionIds[i],c=n.find(d=>d.id===l);if(c){const d=c.voiceKeywords||[],y=ke(d),a=Ie(c.answer,d);t.push({id:c.id,question:c.question,criticalPoints:y,idealAnswer:a,difficulty:c.difficulty,order:i+1})}}return t}function ke(s){const n=[];for(let t=0;t<s.length;t++){const i=s[t],l=t===0?3:t<=2?2:1,c=Ce(i);n.push({phrase:i,weight:l,alternatives:c})}return n}function Ce(s){const n=s.toLowerCase(),t=[],i={kubernetes:["k8s","kube","container orchestration"],"load balancer":["lb","load balancing","traffic distribution"],database:["db","data store","datastore"],availability:["uptime","high availability","ha"],latency:["response time","delay","lag"],throughput:["bandwidth","capacity","requests per second"],microservices:["micro services","microservice","service-oriented"],authentication:["auth","authn","login"],authorization:["authz","permissions","access control"],caching:["cache","cached","in-memory"],replication:["replicate","replica","copies"],sharding:["shard","partitioning","horizontal partition"],monitoring:["monitor","observability","metrics"],deployment:["deploy","release","rollout"],scalability:["scale","scaling","scalable"],consistency:["consistent","data consistency"],idempotency:["idempotent","safe to retry"],"ci/cd":["continuous integration","continuous deployment","pipeline"],"eventual consistency":["eventually consistent","async consistency"],"strong consistency":["strongly consistent","immediate consistency"],"horizontal scaling":["scale out","scaling horizontally"],"vertical scaling":["scale up","scaling vertically"],"api gateway":["gateway","api management"],"message queue":["queue","message broker","mq"],"rate limiting":["throttling","rate limit"],"circuit breaker":["circuit breaking","fail fast"],"service mesh":["mesh","sidecar proxy"],container:["docker","containerized"],orchestration:["orchestrator","orchestrating"]};return i[n]&&t.push(...i[n]),n.endsWith("s")&&n.length>3?t.push(n.slice(0,-1)):n.endsWith("s")||t.push(n+"s"),n.includes("-")?t.push(n.replace(/-/g," ")):n.includes(" ")&&t.push(n.replace(/ /g,"-")),t}function Ie(s,n){if(!s)return"";const t=s.split(/[.!?]+/).filter(d=>d.trim().length>10);if(t.length===0)return s.trim();const i=n.map(d=>d.toLowerCase()),l=t.filter(d=>i.some(y=>d.toLowerCase().includes(y)));return(l.length>0?l.slice(0,2):t.slice(0,2)).map(d=>d.trim()).join(". ")+"."}function qe(s,n){const t=s.toLowerCase().trim(),{criticalPoints:i}=n,l=[],c=[];let d=0,y=0;for(const g of i){const I=g.phrase.toLowerCase();if(y+=g.weight,t.includes(I)){l.push({phrase:g.phrase,weight:g.weight}),d+=g.weight;continue}g.alternatives.some(m=>t.includes(m.toLowerCase()))?(l.push({phrase:g.phrase,weight:g.weight}),d+=g.weight):c.push({phrase:g.phrase,weight:g.weight})}const a=y>0?d/y*100:50,N=Qe(t,i.map(g=>g.phrase)),u=Math.min(N.length*3,10),C=t.split(/\s+/).length,p=C<5?15:C<8?5:0,w=Math.min(100,Math.max(0,Math.round(a+u-p))),k=w>=60,S=$e(w,l,c);return{questionId:n.id,userAnswer:s,score:w,pointsCovered:l,pointsMissed:c,weightedScore:d,maxPossibleScore:y,isCorrect:k,feedback:S}}function Qe(s,n){const t=["scalability","availability","reliability","latency","throughput","consistency","partition","replication","sharding","caching","load balancer","microservices","distributed","fault tolerance","monitoring","logging","alerting","sla","slo","sli","kubernetes","docker","ci/cd","deployment","rollback"],i=[],l=n.map(c=>c.toLowerCase());for(const c of t)s.includes(c)&&!l.includes(c)&&i.push(c);return i}function $e(s,n,t){const l=[...t].sort((c,d)=>d.weight-c.weight).map(c=>c.phrase);return s>=80?"Excellent! You covered the key concepts well.":s>=60?l.length>0?`Good answer! Also consider: ${l.slice(0,2).join(", ")}.`:"Good answer with the main points covered.":s>=40?`Partial answer. Key terms to include: ${l.slice(0,3).join(", ")}.`:`Review this topic. Focus on: ${l.slice(0,3).join(", ")}.`}function Me(s,n){return{session:s,questions:n,currentQuestionIndex:0,answers:[],startedAt:new Date().toISOString(),status:"intro"}}function Re(s){return{...s,status:"in-progress"}}function Pe(s){return s.status==="completed"?null:s.questions[s.currentQuestionIndex]||null}function Ae(s,n){const t=s.questions[s.currentQuestionIndex];if(!t)return s;const i=qe(n,t),l=[...s.answers,i],c=s.currentQuestionIndex>=s.questions.length-1;return{...s,answers:l,status:c?"completed":"in-progress"}}function Fe(s){return s.currentQuestionIndex>=s.questions.length-1?{...s,status:"completed"}:{...s,currentQuestionIndex:s.currentQuestionIndex+1}}function Te(s){const{session:n,answers:t}=s,i=t.reduce((m,q)=>m+q.weightedScore,0),l=t.reduce((m,q)=>m+q.maxPossibleScore,0),c=l>0?Math.round(i/l*100):0;let d;c>=80?d="excellent":c>=60?d="good":c>=40?d="needs-work":d="review-topic";const a=t.flatMap(m=>m.pointsMissed).sort((m,q)=>q.weight-m.weight),N=Array.from(new Set(a.map(m=>m.phrase))),u=t.flatMap(m=>m.pointsCovered),C=Array.from(new Set(u.map(m=>m.phrase))),p=[],w=t.filter(m=>m.isCorrect).length;w===t.length?p.push("Perfect score - all questions answered correctly!"):w>=t.length*.7&&p.push(`Strong performance: ${w}/${t.length} correct`);const k=u.filter(m=>m.weight>=2).length;k>=3&&p.push(`Covered ${k} critical concepts`),C.length>=5&&p.push(`Good coverage: ${C.slice(0,4).join(", ")}`);const S=[],g=a.filter(m=>m.weight>=2);if(g.length>0){const m=g.slice(0,3).map(q=>q.phrase);S.push(`Critical concepts to review: ${m.join(", ")}`)}else N.length>0&&S.push(`Review: ${N.slice(0,5).join(", ")}`);const I=t.filter(m=>m.score<50).length;I>0&&S.push(`${I} question(s) need more practice`);const P=Le(c,w,t.length,n.topic);return{sessionId:n.id,topic:n.topic,answers:t,overallScore:c,verdict:d,summary:P,strengths:p,areasToImprove:S,completedAt:new Date().toISOString()}}function Le(s,n,t,i){return s>=80?`Excellent understanding of ${i}! You answered ${n}/${t} questions correctly.`:s>=60?`Good grasp of ${i}. ${n}/${t} correct. Keep practicing!`:s>=40?`Basic understanding of ${i} (${n}/${t}). Review the missed concepts.`:`${i} needs more study. Score: ${n}/${t}. Review fundamentals.`}function Ee(s){const n=[],t=s.filter(l=>l.voiceSuitable===!0&&l.voiceKeywords&&l.voiceKeywords.length>=3),i={};for(const l of t){const c=`${l.channel}:${l.subChannel}`;i[c]||(i[c]=[]),i[c].push(l)}for(const[l,c]of Object.entries(i)){if(c.length<4)continue;const[d,y]=l.split(":"),N=c.sort((p,w)=>{const k={beginner:0,intermediate:1,advanced:2};return(k[p.difficulty]||1)-(k[w.difficulty]||1)}).slice(0,6),u=N.map(p=>p.difficulty),C=u.includes("advanced")?"advanced":u.includes("intermediate")?"intermediate":"beginner";n.push({id:`gen-${d}-${y}-${Date.now()}`,topic:ze(y),description:`Practice session covering ${y} concepts`,channel:d,difficulty:C,questionIds:N.map(p=>p.id),totalQuestions:N.length,estimatedMinutes:N.length*2})}return n}function ze(s){return s.replace(/-/g," ").replace(/\b\w/g,n=>n.toUpperCase())}const W="voice-session-state",ie="voice-session-history";function E(s){try{localStorage.setItem(W,JSON.stringify(s))}catch(n){console.error("Failed to save session state:",n)}}function Oe(){try{const s=localStorage.getItem(W);return s?JSON.parse(s):null}catch(s){return console.error("Failed to load session state:",s),null}}function re(){try{localStorage.removeItem(W)}catch(s){console.error("Failed to clear session state:",s)}}function Ve(s){try{const n=Be();n.unshift(s),localStorage.setItem(ie,JSON.stringify(n.slice(0,20)))}catch(n){console.error("Failed to save session to history:",n)}}function Be(){try{const s=localStorage.getItem(ie);return s?JSON.parse(s):[]}catch(s){return console.error("Failed to load session history:",s),[]}}const ne=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window);function is(){const[,s]=me();ue();const{preferences:n}=fe(),[t,i]=h.useState("loading"),[l,c]=h.useState([]),[d,y]=h.useState([]),[a,N]=h.useState(null),[u,C]=h.useState(null),[p,w]=h.useState(""),[k,S]=h.useState(""),[g,I]=h.useState(0),[P,m]=h.useState(null),[q,z]=h.useState(""),v=h.useRef(null),A=h.useRef(null),{onVoiceInterview:Y}=xe(),$=a?Pe(a):null;h.useEffect(()=>{async function r(){try{const o=await ge();y(o);let x=await ve();x.length===0&&(x=Ee(o));const b=n.subscribedChannels,f=x.filter(F=>b.includes(F.channel));c(f);const j=Oe();if(j&&j.status!=="completed"){N(j),i("intro");return}i("select")}catch(o){m("Failed to load sessions"),console.error(o)}}r()},[n.subscribedChannels]),h.useEffect(()=>{if(!ne)return;const r=window.SpeechRecognition||window.webkitSpeechRecognition,o=new r;return o.continuous=!0,o.interimResults=!0,o.lang="en-US",o.onresult=x=>{let b="",f="";for(let j=x.resultIndex;j<x.results.length;j++){const F=x.results[j];F.isFinal?f+=F[0].transcript+" ":b+=F[0].transcript}f&&(t==="practice"?z(j=>j+f):w(j=>j+f)),S(b)},o.onerror=x=>{console.error("Speech recognition error:",x.error),x.error==="not-allowed"&&m("Microphone access denied.")},o.onend=()=>{if(t==="recording"||t==="practice")try{o.start()}catch{}},v.current=o,()=>{o.stop()}},[t]),h.useEffect(()=>(t==="recording"?A.current=setInterval(()=>{I(r=>r+1)},1e3):A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[t]);const ae=h.useCallback(r=>{const o=Se(r,d);if(o.length<3){m("Not enough questions available for this session");return}const x=Me(r,o);N(x),E(x),i("intro")},[d]),oe=h.useCallback(()=>{if(!a)return;const r=Re(a);if(N(r),E(r),w(""),S(""),I(0),v.current)try{v.current.start(),i("recording")}catch{m("Failed to start recording."),i("editing")}},[a]),ce=h.useCallback(()=>{v.current&&v.current.stop(),i("editing")},[]),le=h.useCallback(()=>{if(!a||!p.trim()){m("Please provide an answer.");return}const r=Ae(a,p.trim());N(r),E(r),i("feedback")},[a,p]),D=h.useCallback(()=>{if(a)if(a.currentQuestionIndex>=a.questions.length-1){const r=Te(a);C(r),Ve(r),re();const o=r.overallScore>=60?"hire":"no-hire";Y(o),i("results")}else{const r=Fe(a);if(N(r),E(r),w(""),S(""),I(0),v.current)try{v.current.start(),i("recording")}catch{i("editing")}}},[a,Y]),_=h.useCallback(()=>{if(w(""),S(""),I(0),v.current)try{v.current.start(),i("recording")}catch{i("editing")}},[]),O=h.useCallback(()=>{re(),N(null),C(null),i("select")},[]),J=r=>{const o=Math.floor(r/60),x=r%60;return`${o}:${x.toString().padStart(2,"0")}`};if(!ne)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx(U,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold mb-2",children:"Browser Not Supported"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Voice sessions require the Web Speech API. Use Chrome, Edge, or Safari."}),e.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded",children:"Go Home"})]})});if(t==="loading")return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(be,{className:"w-8 h-8 animate-spin text-primary"})});if(t==="select"){const r={};for(const o of l)r[o.channel]||(r[o.channel]=[]),r[o.channel].push(o);return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Voice Sessions | Code Reels",description:"Practice interview topics with focused question sessions",canonical:"https://open-interview.github.io/voice-session"}),e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono",children:[e.jsx("header",{className:"border-b border-border p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-muted/20 rounded-lg",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"}),"Voice Sessions"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.length," sessions available"]})]})]}),e.jsx(X,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsx("main",{className:"max-w-4xl mx-auto p-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No sessions available for your subscribed channels."}),e.jsx("button",{onClick:()=>s("/channels"),className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded",children:"Subscribe to Channels"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(r).map(([o,x])=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-muted-foreground uppercase tracking-wide mb-3",children:o.replace(/-/g," ")}),e.jsx("div",{className:"grid gap-3",children:x.map(b=>e.jsx("button",{onClick:()=>ae(b),className:"p-4 bg-card border border-border rounded-lg text-left hover:border-primary/50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium group-hover:text-primary",children:b.topic}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${b.difficulty==="beginner"?"bg-green-500/20 text-green-400":b.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:b.difficulty}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[b.totalQuestions," questions"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["~",b.estimatedMinutes," min"]})]})]}),e.jsx(he,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary"})]})},b.id))})]},o))})})]})]})}if(t==="intro"&&a)return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:`${a.session.topic} | Voice Session`,description:"Voice interview session practice"}),e.jsx("div",{className:"min-h-screen bg-background text-foreground font-mono flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-lg w-full bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-xl font-bold mb-2",children:a.session.topic}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," related questions â€¢ ~",a.session.estimatedMinutes," min"]})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:a.session.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Questions progress from basic to advanced concepts."})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Answer each question in 1-2 sentences"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Use specific technical terms"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Get instant feedback after each answer"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:O,className:"flex-1 px-4 py-3 border border-border rounded-lg hover:bg-muted/20",children:"Back"}),e.jsxs("button",{onClick:oe,className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 flex items-center justify-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Start"]})]})]})})]});if((t==="recording"||t==="editing")&&a&&$){const r=(a.currentQuestionIndex+1)/a.questions.length*100;return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:`Q${a.currentQuestionIndex+1} | ${a.session.topic}`,description:"Answer the interview question"}),e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono",children:[e.jsx("header",{className:"border-b border-border p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:O,className:"p-2 hover:bg-muted/20 rounded-lg",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm",children:a.session.topic}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Question ",a.currentQuestionIndex+1," of ",a.questions.length]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${$.difficulty==="beginner"?"bg-green-500/20 text-green-400":$.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:$.difficulty})]}),e.jsx("div",{className:"h-1 bg-muted rounded-full overflow-hidden",children:e.jsx(M.div,{initial:{width:0},animate:{width:`${r}%`},className:"h-full bg-primary rounded-full"})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card border border-border rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ne,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-medium",children:$.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(ee,{text:$.question,label:"Listen",size:"sm"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[$.criticalPoints.length," key points"]})]})]})]}),P&&e.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm",children:P})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[t==="recording"&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-mono",children:J(g)})]}),t==="editing"&&e.jsxs("div",{className:"flex items-center gap-2 text-amber-500",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Edit, then submit"})]})]}),e.jsxs("div",{className:"mb-6",children:[t==="editing"?e.jsx("textarea",{value:p,onChange:o=>w(o.target.value),className:"w-full p-4 bg-muted/20 border border-amber-500/30 rounded-lg min-h-[100px] text-sm resize-y focus:outline-none focus:ring-2 focus:ring-amber-500/50",placeholder:"Edit your answer..."}):e.jsx("div",{className:"p-4 bg-muted/20 rounded-lg min-h-[80px]",children:e.jsxs("p",{className:"text-sm whitespace-pre-wrap",children:[p,e.jsx("span",{className:"text-muted-foreground",children:k}),t==="recording"&&e.jsx("span",{className:"animate-pulse",children:"|"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"ðŸ’¡ Keep it brief: 1-2 sentences with key terms"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t==="recording"&&e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-6 py-3 bg-red-500 text-white font-bold rounded-full hover:bg-red-600",children:[e.jsx(Z,{className:"w-5 h-5"}),"Stop"]}),t==="editing"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-muted/20",children:[e.jsx(se,{className:"w-4 h-4"}),"Re-record"]}),e.jsxs("button",{onClick:le,disabled:!p.trim(),className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-bold rounded-full hover:bg-primary/90 disabled:opacity-50",children:[e.jsx(Q,{className:"w-5 h-5"}),"Submit"]})]})]})]})]})]})]})}if(t==="feedback"&&a){const r=a.answers[a.answers.length-1],o=a.questions[a.currentQuestionIndex],x=a.currentQuestionIndex>=a.questions.length-1,b=()=>{if(z(""),S(""),I(0),i("practice"),v.current)try{v.current.start()}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Feedback | Voice Session",description:"Review your answer feedback"}),e.jsx("div",{className:"min-h-screen bg-background text-foreground font-mono flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-lg w-full bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${r.isCorrect?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:r.isCorrect?e.jsx(Q,{className:"w-10 h-10"}):e.jsx(K,{className:"w-10 h-10"})}),e.jsxs("div",{className:"text-3xl font-bold mb-1",children:[r.score,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.isCorrect?"Good answer!":"Needs improvement"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm",children:r.feedback}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Score: ",r.weightedScore,"/",r.maxPossibleScore," weighted points"]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[r.pointsCovered.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-green-400 mb-2 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"})," Covered"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.pointsCovered.map((f,j)=>e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded flex items-center gap-1",children:[f.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",f.weight]})]},j))})]}),r.pointsMissed.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-red-400 mb-2 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"})," Missed"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.pointsMissed.map((f,j)=>e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded flex items-center gap-1",children:[f.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",f.weight]})]},j))})]})]}),o.idealAnswer&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Practice the Ideal Answer"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Read the ideal answer aloud to practice pronunciation and memorize key terms."}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 text-blue-400 text-xs font-medium rounded hover:bg-blue-500/30 transition-colors",children:[e.jsx(te,{className:"w-3.5 h-3.5"}),"Practice Reading Aloud"]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:_,className:"flex-1 px-4 py-3 border border-border rounded-lg hover:bg-muted/20 flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Retry"]}),e.jsx("button",{onClick:D,className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Results"]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(H,{className:"w-4 h-4"})]})})]})]})})]})}if(t==="practice"&&a){const r=a.questions[a.currentQuestionIndex],o=a.currentQuestionIndex>=a.questions.length-1,x=()=>{v.current&&v.current.stop(),i("feedback")},b=()=>{v.current&&v.current.stop(),z(""),S(""),D()};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Practice Mode | Voice Session",description:"Practice reading the ideal answer"}),e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono",children:[e.jsx("header",{className:"border-b border-border p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:x,className:"p-2 hover:bg-muted/20 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 rotate-180"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-sm flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-blue-400"}),"Practice Mode"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Read the ideal answer aloud"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-mono text-sm",children:J(g)})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-blue-400 flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Read This Aloud"]}),e.jsx(ee,{text:r.idealAnswer,label:"Listen",size:"sm"})]}),e.jsx("p",{className:"text-lg leading-relaxed",children:r.idealAnswer}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-500/20",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Key points to emphasize:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.criticalPoints.map((f,j)=>e.jsxs("span",{className:`px-2 py-0.5 text-xs rounded font-medium flex items-center gap-1 ${f.weight===3?"bg-blue-500/30 text-blue-300":f.weight===2?"bg-blue-500/20 text-blue-400":"bg-blue-500/10 text-blue-400/80"}`,children:[f.phrase,f.weight>1&&e.jsxs("span",{className:"opacity-60",children:["Ã—",f.weight]})]},j))})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-red-400"}),"Your Recording"]}),e.jsxs("div",{className:"p-4 bg-muted/20 rounded-lg min-h-[100px]",children:[e.jsxs("p",{className:"text-sm whitespace-pre-wrap",children:[q,e.jsx("span",{className:"text-muted-foreground",children:k}),e.jsx("span",{className:"animate-pulse",children:"|"})]}),!q&&!k&&e.jsx("p",{className:"text-muted-foreground text-sm",children:"Start reading the answer above..."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:x,className:"flex-1 px-4 py-3 border border-border rounded-lg hover:bg-muted/20 flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),"Back to Feedback"]}),e.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Finish Session"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Done, Next Question"]})})]})]})]})]})}return t==="results"&&u?e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Results | Voice Session",description:"Your session results and score"}),e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono",children:[e.jsx("header",{className:"border-b border-border p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("h1",{className:"font-bold flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-primary"}),"Session Complete"]}),e.jsx(X,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card border border-border rounded-lg p-6 mb-6 text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 ${u.verdict==="excellent"?"bg-green-500/20":u.verdict==="good"?"bg-blue-500/20":u.verdict==="needs-work"?"bg-yellow-500/20":"bg-red-500/20"}`,children:e.jsxs("span",{className:`text-4xl font-bold ${u.verdict==="excellent"?"text-green-400":u.verdict==="good"?"text-blue-400":u.verdict==="needs-work"?"text-yellow-400":"text-red-400"}`,children:[u.overallScore,"%"]})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:u.topic}),e.jsx("p",{className:`text-sm font-medium ${u.verdict==="excellent"?"text-green-400":u.verdict==="good"?"text-blue-400":u.verdict==="needs-work"?"text-yellow-400":"text-red-400"}`,children:u.verdict==="excellent"?"ðŸŒŸ Excellent!":u.verdict==="good"?"ðŸ‘ Good Job!":u.verdict==="needs-work"?"ðŸ“š Keep Practicing":"ðŸ”„ Review Topic"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:u.summary})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Question Breakdown"}),e.jsx("div",{className:"space-y-3",children:u.answers.map((r,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${r.isCorrect?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o+1}),e.jsxs("span",{className:"text-sm",children:["Question ",o+1]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-bold ${r.score>=60?"text-green-400":"text-red-400"}`,children:[r.score,"%"]}),r.isCorrect?e.jsx(Q,{className:"w-4 h-4 text-green-400"}):e.jsx(K,{className:"w-4 h-4 text-red-400"})]})]},r.questionId))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[u.strengths.length>0&&e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-green-400 mb-3 flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"})," Strengths"]}),e.jsx("ul",{className:"space-y-2",children:u.strengths.map((r,o)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),r]},o))})]}),u.areasToImprove.length>0&&e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-amber-400 mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"})," To Improve"]}),e.jsx("ul",{className:"space-y-2",children:u.areasToImprove.map((r,o)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-amber-400 flex-shrink-0 mt-0.5"}),r]},o))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>s("/"),className:"flex-1 px-4 py-3 border border-border rounded-lg hover:bg-muted/20",children:[e.jsx(V,{className:"w-4 h-4 inline mr-2"}),"Home"]}),e.jsxs("button",{onClick:O,className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90",children:[e.jsx(T,{className:"w-4 h-4 inline mr-2"}),"New Session"]})]})]})]})]}):null}export{is as default};
