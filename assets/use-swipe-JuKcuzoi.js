import{c as S,r as m,j as e,n as I,m as b,au as W,O as A,F as _,Z as F,ar as V,l as $,X as Y,k as z,W as Q,t as X,av as G,B as H,aw as U}from"./index-H7XuCIXl.js";import{k as O,a as Z,b as J,r as K,j as q}from"./spaced-repetition-DSAPBUPS.js";import{B as ee,a as te,T as re,C as se,G as ne}from"./tag-B9sYMequ.js";import{C as k}from"./clock-lWjt-HXn.js";import{T as L}from"./target-B3iPTIWk.js";import{bF as ae,bG as le,bJ as B,bH as ie,bI as oe}from"./index-Di-cx25t.js";import{P as C}from"./play-C9GOyOFQ.js";import{G as ce,C as de}from"./GiscusComments-K_S0cC6_.js";import{L as xe}from"./loader-circle-brD7b3hn.js";import{E as me}from"./external-link-DTlkCank.js";import{F as ue}from"./file-text-BFIk_aI9.js";import{L as R}from"./lightbulb-BM6WA28A.js";import{C as pe}from"./chevron-down-DpuOpy8F.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],ge=S("baby",he);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],be=S("hash",fe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],D=S("youtube",ye);function je(t){return t?t.split(/`([^`]+)`/g).map((l,n)=>n%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:l},n):l):null}function we({difficulty:t}){const r="hidden sm:block absolute bottom-8 right-8 w-32 h-32 lg:w-40 lg:h-40 opacity-[0.06] pointer-events-none select-none z-0";return t==="beginner"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("circle",{cx:"40",cy:"42",r:"5"}),e.jsx("circle",{cx:"60",cy:"42",r:"5"}),e.jsx("path",{d:"M38 52 Q50 62 62 52",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"5",r:"4"}),e.jsx("rect",{x:"18",y:"38",width:"6",height:"14",rx:"2"}),e.jsx("rect",{x:"76",y:"38",width:"6",height:"14",rx:"2"})]}):t==="intermediate"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("rect",{x:"35",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("rect",{x:"55",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("line",{x1:"40",y1:"55",x2:"60",y2:"55",strokeWidth:"3",stroke:"currentColor"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("polygon",{points:"50,2 46,8 54,8"}),e.jsx("circle",{cx:"82",cy:"50",r:"8",strokeWidth:"2",stroke:"currentColor",fill:"none"}),e.jsx("circle",{cx:"82",cy:"50",r:"3"})]}):e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("ellipse",{cx:"40",cy:"42",rx:"6",ry:"7"}),e.jsx("ellipse",{cx:"60",cy:"42",rx:"6",ry:"7"}),e.jsx("circle",{cx:"42",cy:"41",r:"2",fill:"white"}),e.jsx("circle",{cx:"62",cy:"41",r:"2",fill:"white"}),e.jsx("path",{d:"M38 56 Q50 52 62 56",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("ellipse",{cx:"78",cy:"35",rx:"3",ry:"5"}),e.jsx("ellipse",{cx:"82",cy:"45",rx:"2",ry:"4"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"5",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"3",r:"3"}),e.jsx("polygon",{points:"85,20 80,30 84,30 79,42 88,28 84,28"})]})}function Ye({question:t,questionNumber:r,totalQuestions:l,isMarked:n,isCompleted:c,onToggleMark:i,onTapQuestion:a,timerEnabled:x,timeLeft:o}){const[d,u]=m.useState(null),[p,g]=m.useState(!1),[s,f]=m.useState(!1);m.useEffect(()=>{if(t?.id){const h=O(t.id,t.channel,t.difficulty);u(j=>j?.questionId===h.questionId&&j?.totalReviews===h.totalReviews?j:h),g(!1),f(h.totalReviews>0)}},[t?.id,t?.channel,t?.difficulty]);const y=h=>{if(!t)return;const j=K(t.id,t.channel,t.difficulty,h);u(j),g(!0),f(!1)},N=()=>{if(!t)return;const h=q(t.id,t.channel,t.difficulty);u(h),f(!0)},w=(()=>{switch(t.difficulty){case"beginner":return{icon:F,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/20",label:"Easy"};case"intermediate":return{icon:L,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/20",label:"Medium"};case"advanced":return{icon:_,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",label:"Hard"};default:return{icon:L,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",label:"Unknown"}}})(),P=w.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-y-auto relative","data-testid":"question-panel",children:[e.jsx(we,{difficulty:t.difficulty}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-muted/50 border border-border rounded-md",children:[e.jsx(be,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:t.id})]}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted rounded-md",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[r,e.jsx("span",{className:"text-muted-foreground/50",children:"/"}),l]})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md ${w.bg} border ${w.border}`,children:[e.jsx(P,{className:`w-3 h-3 ${w.color}`}),e.jsx("span",{className:`text-xs font-medium ${w.color}`,children:w.label})]}),c&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/10 border border-green-500/20 rounded-md",children:[e.jsx(I,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Done"})]})]}),e.jsx("button",{onClick:i,className:`p-1.5 rounded-md transition-colors ${n?"bg-primary/10 text-primary border border-primary/20":"bg-muted text-muted-foreground hover:text-primary"}`,children:e.jsx(ee,{className:`w-4 h-4 ${n?"fill-current":""}`})})]}),e.jsxs("div",{className:`flex-1 flex flex-col justify-center max-w-2xl w-full ${a?"cursor-pointer lg:cursor-default":""}`,onClick:a,children:[t.companies&&t.companies.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[e.jsx(te,{className:"w-3.5 h-3.5 text-muted-foreground"}),t.companies.map((h,j)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 text-xs font-medium rounded-full",children:h},j))]}),e.jsx(b.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`font-bold text-foreground leading-tight ${t.question.length>200?"text-sm sm:text-base lg:text-lg":t.question.length>100?"text-base sm:text-lg lg:text-xl":"text-lg sm:text-xl lg:text-2xl"}`,children:je(t.question)}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground uppercase tracking-wider font-medium",children:t.subChannel})}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[t.tags.slice(0,5).map(h=>e.jsx("span",{className:"px-1.5 py-0.5 bg-muted text-[9px] sm:text-[10px] font-mono text-muted-foreground rounded border border-border",children:W(h)},h)),t.tags.length>5&&e.jsxs("span",{className:"text-[9px] text-muted-foreground py-0.5",children:["+",t.tags.length-5]})]}),x&&o>0&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-2 bg-primary/5 border border-primary/20 rounded-lg self-start",children:[e.jsx(k,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-lg font-mono font-bold text-primary tabular-nums",children:[String(Math.floor(o/60)).padStart(2,"0"),":",String(o%60).padStart(2,"0")]})]})]}),e.jsx("div",{className:"mt-auto pt-3 flex justify-start mb-12 sm:mb-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-500/5 border border-purple-500/20 rounded-lg px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(A,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-purple-500",children:"SRS"}),d&&e.jsx("span",{className:`text-[9px] px-1 py-0.5 rounded ${J(d.masteryLevel)} bg-muted/50`,children:Z(d.masteryLevel)})]}),p?e.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:"âœ“"}):s&&d?e.jsx("div",{className:"flex items-center gap-0.5",children:[{rating:"again",label:"ðŸ˜•",color:"bg-red-500/10 text-red-500 hover:bg-red-500/20"},{rating:"hard",label:"ðŸ¤”",color:"bg-orange-500/10 text-orange-500 hover:bg-orange-500/20"},{rating:"good",label:"ðŸ‘",color:"bg-green-500/10 text-green-500 hover:bg-green-500/20"},{rating:"easy",label:"ðŸŽ¯",color:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20"}].map(h=>e.jsx("button",{onClick:j=>{j.stopPropagation(),y(h.rating)},className:`w-6 h-6 flex items-center justify-center rounded text-xs transition-colors ${h.color}`,children:h.label},h.rating))}):e.jsx("button",{onClick:h=>{h.stopPropagation(),N()},className:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded hover:bg-purple-600",children:"+Add"})]})}),e.jsx("div",{className:"mt-3 text-center hidden sm:block",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[9px] font-mono",children:"â†’"})," to reveal answer"]})})]})}function M(t){if(!t)return null;const r=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const l of r){const n=t.match(l);if(n)return n[1]}return null}function Ne(t){return t?.includes("/shorts/")||!1}function ve({shortVideo:t,longVideo:r}){const[l,n]=m.useState(null),c=m.useRef(null),i=t?M(t):null,a=r?M(r):null;if(!i&&!a)return null;const x=()=>n(null);return m.useEffect(()=>{const o=d=>{d.key==="Escape"&&l&&x()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[l]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full clear-both",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-3",children:[i&&e.jsxs("button",{onClick:()=>n("short"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(D,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Quick"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," Under 60s"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]}),a&&e.jsxs("button",{onClick:()=>n("long"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(D,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Deep Dive"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," 5-20 min"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]})]})}),typeof document<"u"&&V.createPortal(e.jsx($,{children:l&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 sm:p-8 lg:p-12",onClick:x,children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-5xl mx-auto",onClick:o=>o.stopPropagation(),children:[e.jsxs("button",{onClick:x,className:"absolute -top-12 right-0 z-20 p-2 text-white hover:text-white/80 transition-colors",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx("div",{className:`relative bg-black rounded-lg overflow-hidden border border-white/20 shadow-2xl ${l==="short"&&Ne(t||"")?"max-w-sm mx-auto aspect-[9/16]":"w-full aspect-video"}`,children:e.jsx("iframe",{ref:c,src:`https://www.youtube.com/embed/${l==="short"?i:a}?autoplay=1&rel=0&playsinline=1`,title:l==="short"?"Quick Explanation":"Deep Dive Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-white/50",children:l==="short"?"âš¡ Quick Explanation":"ðŸ“š Deep Dive"})})]})})}),document.body)]})}function ke({questionId:t,currentChannel:r}){const[,l]=z(),[n,c]=m.useState([]),[i,a]=m.useState(!0),[x,o]=m.useState(!1);if(m.useEffect(()=>{async function u(){a(!0),o(!1);try{const p=await fetch("/data/similar-questions.json");if(!p.ok){o(!0);return}const s=(await p.json()).similarities?.[t]||[];c(s.slice(0,4))}catch{o(!0)}finally{a(!1)}}u()},[t]),x||!i&&n.length===0)return null;const d=u=>{l(`/channel/${u.channel}/${u.id}`)};return e.jsxs("div",{className:"rounded-lg border border-border bg-card/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 border-b border-border bg-muted/30",children:[e.jsx(Q,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"font-medium text-xs",children:"Similar Questions"})]}),e.jsx("div",{className:"divide-y divide-border",children:i?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(xe,{className:"w-4 h-4 animate-spin text-muted-foreground"})}):n.map(u=>e.jsxs("button",{onClick:()=>d(u),className:"w-full flex items-start gap-2 px-2.5 py-2 hover:bg-muted/50 transition-colors text-left group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground/90 line-clamp-2 group-hover:text-primary transition-colors",children:u.question}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:u.channel.replace(/-/g," ")}),e.jsxs("span",{className:"text-[10px] text-primary/60",children:[Math.round(u.similarity*100),"%"]})]})]}),e.jsx(X,{className:"w-3.5 h-3.5 text-muted-foreground group-hover:text-primary transition-colors mt-0.5 shrink-0"})]},u.id))})]})}function Ce(t){if(!t)return"";let r=t;r=r.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),r=r.replace(/([^\n`])(\s*```)/g,"$1\n```"),r=r.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),r=r.replace(/:\s*```/g,":\n\n```"),r=r.replace(/^\*\*\s*$/gm,""),r=r.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**");const l=r.split(`
`),n=[];for(let c=0;c<l.length;c++){let i=l[c];const a=(i.match(/\*\*/g)||[]).length;a%2===1&&(i.trim().startsWith("**")&&a===1?i=i.replace(/^\s*\*\*\s*/,""):i.trim().endsWith("**")&&a===1&&(i=i.replace(/\s*\*\*\s*$/,""))),n.push(i)}return r=n.join(`
`),r=r.replace(/^[â€¢Â·]\s*/gm,"- "),(r.includes("â€¢")||r.includes("Â·"))&&(r=r.split(`
`).map(a=>{const x=(a.match(/[â€¢Â·]/g)||[]).length;if(x>1||x===1&&!a.trim().startsWith("â€¢")&&!a.trim().startsWith("Â·")){const o=a.split(/[â€¢Â·]/).map(d=>d.trim()).filter(d=>d);if(o.length>1)return o.map(d=>`- ${d}`).join(`
`)}return a.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),r=r.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),r=r.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),r=r.replace(/\n{3,}/g,`

`),r=r.replace(/^\n+/,""),r}function E(t){if(!t||typeof t!="string")return!1;const r=t.trim();if(!r||r.length<10)return!1;const l=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],n=r.split(`
`)[0].toLowerCase().trim();if(!l.some(x=>n.startsWith(x.toLowerCase())))return!1;const i=r.split(`
`).filter(x=>{const o=x.trim().toLowerCase();return o&&!o.startsWith("%%")&&!l.some(d=>o.startsWith(d.toLowerCase()))});if(i.length<3)return!1;const a=r.toLowerCase();return!(a.includes("start")&&a.includes("end")&&i.length<=3||a.match(/\bstart\b/g)?.length===1&&a.match(/\bend\b/g)?.length===1&&i.length<=2)}function T(t){return t?t.split(/`([^`]+)`/g).map((l,n)=>n%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-cyan-500/20 text-cyan-300 rounded text-[0.9em] font-mono",children:l},n):l):null}function Se({title:t,icon:r,children:l,defaultExpanded:n=!0,variant:c="default",badge:i}){const[a,x]=m.useState(n),o=typeof window<"u"&&window.innerWidth<640,d={default:"bg-card border-border",highlight:"bg-primary/5 border-primary/20",success:"bg-green-500/5 border-green-500/20",purple:"bg-purple-500/5 border-purple-500/20"},u={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs("div",{className:`rounded-lg border overflow-hidden ${d[c]}`,children:[e.jsxs("button",{onClick:()=>x(!a),className:"w-full flex items-center justify-between px-2.5 py-1.5 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:u[c],children:r}),e.jsx("span",{className:"font-medium text-xs",children:t}),i&&e.jsx("span",{className:"px-1 py-0.5 bg-primary/10 text-primary text-[8px] font-medium rounded",children:i})]}),e.jsx(pe,{className:`w-3.5 h-3.5 text-muted-foreground transition-transform ${a?"":"-rotate-90"}`})]}),o?a&&e.jsx("div",{className:"px-2.5 pb-2",children:l}):e.jsx($,{initial:!1,children:a&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-2.5 pb-2",children:l})})})]})}function $e({code:t,language:r}){const[l,n]=m.useState(!1),c=async()=>{await navigator.clipboard.writeText(t),n(!0),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden border border-border bg-[#1e1e1e]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-1.5 sm:py-2 bg-muted/50 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary"}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:r||"code"})]}),e.jsx("button",{onClick:c,className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-0.5 sm:py-1 text-[10px] sm:text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-green-500",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(ie,{language:r||"text",style:oe,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLines:!0,wrapLongLines:!0,className:"!text-xs sm:!text-sm !p-3 sm:!p-4",children:t})]})}function Le({question:t,hasTldr:r,hasDiagram:l,hasEli5:n,hasVideo:c}){const[i,a]=m.useState(null),x=l&&i!==!1,o=[];r&&o.push("tldr"),x&&o.push("diagram"),n&&o.push("eli5"),c&&o.push("video");const[d,u]=m.useState(()=>r?"tldr":n?"eli5":c?"video":"diagram");m.useEffect(()=>{i===!1&&d==="diagram"&&(r?u("tldr"):n?u("eli5"):c&&u("video"))},[i,d,r,n,c]);const p=m.useCallback(s=>{a(s)},[]);if(o.length===0&&i===!1)return null;if(o.length===0&&!r&&!n&&!c&&i===null)return e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-border bg-card p-4 text-center text-muted-foreground text-sm",children:"Loading..."});if(o.length===0)return null;const g={tldr:{label:"TL;DR",icon:e.jsx(R,{className:"w-3.5 h-3.5"}),color:"text-cyan-400"},diagram:{label:"Diagram",icon:e.jsx(ne,{className:"w-3.5 h-3.5"}),color:"text-purple-400"},eli5:{label:"ELI5",icon:e.jsx(ge,{className:"w-3.5 h-3.5"}),color:"text-green-400"},video:{label:"Video",icon:e.jsx(C,{className:"w-3.5 h-3.5"}),color:"text-pink-400"}};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl border border-white/10 bg-black/40 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-white/10 bg-black/20",children:o.map(s=>e.jsxs("button",{onClick:()=>u(s),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs sm:text-sm font-medium transition-all relative ${d===s?`${g[s].color} bg-white/5`:"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:[e.jsx("span",{className:d===s?g[s].color:"",children:g[s].icon}),e.jsx("span",{children:g[s].label}),d===s&&e.jsx(b.div,{layoutId:"activeTabIndicator",className:`absolute bottom-0 left-0 right-0 h-0.5 ${s==="tldr"?"bg-cyan-400":s==="diagram"?"bg-purple-400":s==="eli5"?"bg-green-400":"bg-pink-400"}`})]},s))}),e.jsx("div",{className:"p-2 sm:p-3",children:e.jsxs($,{mode:"wait",children:[d==="tldr"&&r&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-cyan-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:T(t.answer)})]},"tldr"),d==="diagram"&&l&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(B,{chart:t.diagram,onRenderResult:p})},"diagram"),d==="eli5"&&n&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-base flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:T(t.eli5||"")})]},"eli5"),d==="video"&&c&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(ve,{shortVideo:t.videos?.shortVideo,longVideo:t.videos?.longVideo})},"video")]})})]})}function ze({question:t}){const r=m.useRef(null),l=typeof window<"u"&&window.innerWidth<640,[n,c]=m.useState(null);m.useEffect(()=>{G.getByQuestionId(t.id).then(c)},[t.id]);const i=!!t.answer,a=!l&&E(t.diagram),x=!!t.eli5,o=!!(t.videos?.shortVideo||t.videos?.longVideo),d=i||a||x||o,u=m.useCallback(p=>{const g=Ce(p);return e.jsx(ae,{remarkPlugins:[le],components:{code({className:s,children:f}){const y=/language-(\w+)/.exec(s||""),N=y?y[1]:"",v=String(f).replace(/\n$/,"");return!y&&!String(f).includes(`
`)?e.jsx("code",{className:"px-1 py-0.5 bg-primary/10 text-primary rounded text-[0.85em] font-mono",children:f}):N==="mermaid"?E(v)?e.jsx("div",{className:"my-3",children:e.jsx(B,{chart:v})}):null:e.jsx("div",{className:"my-2",children:e.jsx($e,{code:v,language:N})})},p({children:s}){return e.jsx("p",{className:"mb-2 leading-relaxed text-foreground/90 text-sm",children:s})},h1({children:s}){return e.jsx("h1",{className:"text-base font-bold mb-2 mt-4 text-foreground border-b border-border pb-1",children:s})},h2({children:s}){return e.jsx("h2",{className:"text-sm font-bold mb-2 mt-3 text-foreground",children:s})},h3({children:s}){return e.jsx("h3",{className:"text-sm font-semibold mb-1.5 mt-2 text-foreground/90",children:s})},strong({children:s}){return e.jsx("strong",{className:"font-semibold text-foreground",children:s})},ul({children:s}){return e.jsx("ul",{className:"space-y-1 mb-2 ml-1",children:s})},ol({children:s}){return e.jsx("ol",{className:"space-y-1 mb-2 ml-1 [counter-reset:list-counter]",children:s})},li({children:s,node:f}){const N=f?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-2 text-foreground/90 text-sm [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-0.5",children:N?e.jsx("span",{className:"text-xs font-medium before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:s})]})},a({href:s,children:f}){return e.jsx("a",{href:s,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:f})},blockquote({children:s}){return e.jsx("blockquote",{className:"border-l-2 border-primary/50 pl-3 py-1 my-2 bg-primary/5 text-muted-foreground italic text-sm",children:s})},table({children:s}){return e.jsx("div",{className:"my-2 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-sm",children:s})})},th({children:s}){return e.jsx("th",{className:"px-2 py-1.5 text-left font-semibold bg-muted border border-border text-xs",children:s})},td({children:s}){return e.jsx("td",{className:"px-2 py-1.5 border border-border text-sm",children:s})}},children:g})},[]);return e.jsx(b.div,{ref:r,initial:l?!1:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-background",children:e.jsxs("div",{className:"w-full px-3 sm:px-4 lg:px-6 py-2 sm:py-3 pb-16 space-y-1.5",children:[d&&e.jsx(Le,{question:t,hasTldr:i,hasDiagram:a,hasEli5:x,hasVideo:o}),e.jsx(Se,{title:"Full Explanation",icon:e.jsx(H,{className:"w-3.5 h-3.5"}),defaultExpanded:!0,badge:t.explanation?`${Math.ceil(t.explanation.split(" ").length/200)} min`:void 0,children:e.jsx("div",{className:"prose prose-sm max-w-none",children:u(t.explanation)})}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex items-start gap-1.5 pt-0.5",children:[e.jsx(re,{className:"w-2.5 h-2.5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-0.5",children:t.tags.map(p=>e.jsx("span",{className:"px-1 py-0.5 bg-muted text-[8px] font-mono text-muted-foreground rounded border border-border",children:W(p)},p))})]}),(t.sourceUrl||n)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[t.sourceUrl&&e.jsxs("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-muted hover:bg-muted/80 border border-border rounded-md text-[10px]",children:[e.jsx(me,{className:"w-2.5 h-2.5 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Source"})]}),n&&e.jsxs("a",{href:`https://openstackdaily.github.io${n.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-cyan-500/10 hover:bg-cyan-500/20 border border-cyan-500/30 rounded-md text-[10px]",children:[e.jsx(ue,{className:"w-2.5 h-2.5 text-cyan-400"}),e.jsx("span",{className:"text-cyan-400",children:"Blog"})]})]}),e.jsx(ke,{questionId:t.id,currentChannel:t.channel}),e.jsx(ce,{questionId:t.id})]})})}function Qe(t,r={}){const{minDistance:l=U.MIN_SWIPE_DISTANCE,preventScroll:n=!1}=r,c=m.useRef(null),i=m.useRef(null),a=m.useRef(null),x=m.useRef(null),o=m.useCallback(p=>{a.current=null,x.current=null,c.current=p.targetTouches[0].clientX,i.current=p.targetTouches[0].clientY},[]),d=m.useCallback(p=>{if(a.current=p.targetTouches[0].clientX,x.current=p.targetTouches[0].clientY,n&&c.current!==null&&a.current!==null){const g=Math.abs(c.current-a.current),s=Math.abs((i.current??0)-(x.current??0));g>s&&p.preventDefault()}},[n]),u=m.useCallback(()=>{if(c.current===null||i.current===null||a.current===null||x.current===null)return;const p=c.current-a.current,g=i.current-x.current,s=Math.abs(p),f=Math.abs(g),y=s>f;y&&s>l?p>0?t.onSwipeLeft?.():t.onSwipeRight?.():!y&&f>l&&(g>0?t.onSwipeUp?.():t.onSwipeDown?.()),c.current=null,i.current=null,a.current=null,x.current=null},[t,l]);return{onTouchStart:o,onTouchMove:d,onTouchEnd:u}}export{ze as A,Ye as Q,Qe as u};
