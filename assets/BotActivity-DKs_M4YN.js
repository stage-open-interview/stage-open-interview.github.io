import{r as d,j as e,b as N,d as i,S as C,m as u,Z as A,e as L,A as G,C as J,u as K}from"./index-aMHhEiH7.js";import{S as X}from"./SEOHead-CK4C62cZ.js";import{A as Y}from"./AppLayout-2IMbN3Fj.js";import"./Button-DhfldYCp.js";import{M as g}from"./MetricCard-TNFb-CDz.js";import{B as k}from"./bot--8zNtk66.js";import{W as $,L as w}from"./wrench-CExVg2iD.js";import{E as R}from"./eye-DKCJ7cN_.js";import{T as M}from"./trash-2-Pka8fC5v.js";import{H as P,C as ee}from"./trending-down-CmKihoHr.js";import{C as te}from"./clock-6QUsfRP_.js";import{F as S}from"./file-text-DrR0dssm.js";import{E as se}from"./external-link-B7-KwAGt.js";import{M as re}from"./mic-BiEvLG-S.js";import{C as ae}from"./code-Cfc0ecUX.js";import"./UnifiedSearch-C6F5mgVR.js";import"./coding-challenges-DYXDsD3a.js";import"./tag-gK-D8r71.js";import"./target-CbVA3XUQ.js";import"./arrow-right-CaWzFuHn.js";import"./loader-circle-ykXWKNoB.js";import"./chevron-left-_a6bETaq.js";import"./chart-column-BsUHzvGI.js";import"./user-CpqXo1AX.js";const E={creator:{name:"Creator Bot",icon:C,color:"text-cyan-500 bg-cyan-500/10 border-cyan-500/30",gradient:"from-cyan-500 to-blue-500",description:"Creates questions, challenges, voice keywords"},verifier:{name:"Verifier Bot",icon:R,color:"text-amber-500 bg-amber-500/10 border-amber-500/30",gradient:"from-amber-500 to-orange-500",description:"Quality checks, detects issues, flags content"},processor:{name:"Processor Bot",icon:$,color:"text-purple-500 bg-purple-500/10 border-purple-500/30",gradient:"from-purple-500 to-pink-500",description:"Improves or deletes flagged content"}};function U(r){return E[r]||{name:r,icon:k,color:"text-gray-500 bg-gray-500/10 border-gray-500/30",gradient:"from-gray-500 to-gray-600",description:"Unknown bot"}}function f(r){if(!r)return"never";const a=new Date(r),o=new Date().getTime()-a.getTime(),c=Math.floor(o/6e4),p=Math.floor(o/36e5),x=Math.floor(o/864e5);return c<1?"just now":c<60?`${c}m ago`:p<24?`${p}h ago`:x<7?`${x}d ago`:a.toLocaleDateString()}function ie(r,a){if(!a)return null;switch(r){case"question":return`/?search=${encodeURIComponent(a)}`;case"challenge":return`/coding/${a}`;case"test":return"/tests";case"voice_keyword":return"/voice-interview";default:return null}}function ne(r){switch(r){case"question":return e.jsx(ee,{className:"w-3 h-3"});case"challenge":return e.jsx(ae,{className:"w-3 h-3"});case"test":return e.jsx(S,{className:"w-3 h-3"});case"voice_keyword":return e.jsx(re,{className:"w-3 h-3"});default:return e.jsx(S,{className:"w-3 h-3"})}}function q({itemType:r,itemId:a,className:n}){const[,o]=K(),c=ie(r,a);return c?e.jsxs("button",{onClick:()=>o(c),className:i("inline-flex items-center gap-1 px-1.5 py-0.5 bg-primary/10 hover:bg-primary/20 text-primary rounded text-xs font-mono transition-colors",n),title:`View ${r}: ${a}`,children:[ne(r),e.jsx("span",{className:"truncate max-w-[120px]",children:a}),e.jsx(se,{className:"w-2.5 h-2.5 opacity-60"})]}):e.jsx("span",{className:n,children:a})}function y({active:r,onClick:a,children:n,icon:o}){return e.jsxs("button",{onClick:a,className:i("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[e.jsx(o,{className:"w-4 h-4"}),n]})}function Te(){const[r,a]=d.useState("overview"),[n,o]=d.useState([]),[c,p]=d.useState([]),[x,O]=d.useState([]),[B,Q]=d.useState([]),[F,V]=d.useState(!0),[h,D]=d.useState(!1),[j,W]=d.useState("all"),b=d.useCallback(async()=>{try{const t=await fetch("/data/bot-monitor.json");if(t.ok){const s=await t.json();o(s.stats||[]),p(s.runs||[]),O(s.queue||[]),Q(s.ledger||[])}}catch(t){console.error("Failed to fetch bot data:",t),o([{botName:"creator",totalRuns:45,successfulRuns:42,totalCreated:156,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"verifier",totalRuns:38,successfulRuns:38,totalCreated:0,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"processor",totalRuns:22,successfulRuns:20,totalCreated:0,totalUpdated:45,totalDeleted:12,lastRun:new Date().toISOString()}])}finally{V(!1),D(!1)}},[]);d.useEffect(()=>{b()},[b]);const I=()=>{D(!0),b()},z=n.reduce((t,s)=>t+(s.totalCreated||0),0),H=n.reduce((t,s)=>t+(s.totalUpdated||0),0),_=n.reduce((t,s)=>t+(s.totalDeleted||0),0),T=x.filter(t=>t.status==="pending").length;return e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Bot Monitor - AI Content Pipeline | Interview Prep",description:"Monitor the 3-bot AI pipeline: Creator, Verifier, and Processor bots working together to maintain high-quality interview content.",canonical:"https://open-interview.github.io/bot-activity"}),e.jsx(Y,{title:"Bot Monitor",showBackOnMobile:!0,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),"Bot Monitor"]}),e.jsx("button",{onClick:I,disabled:h,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(N,{className:i("w-4 h-4",h&&"animate-spin")})})]}),e.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:e.jsx("button",{onClick:I,disabled:h,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(N,{className:i("w-4 h-4",h&&"animate-spin")})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries(E).map(([t,s],l)=>{const m=n.find(v=>v.botName===t),Z=s.icon;return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:i("relative overflow-hidden rounded-xl border p-4",s.color),children:[e.jsx("div",{className:i("absolute top-0 right-0 w-32 h-32 opacity-10 blur-2xl rounded-full bg-gradient-to-br",s.gradient)}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:i("w-10 h-10 rounded-xl flex items-center justify-center bg-gradient-to-br",s.gradient),children:e.jsx(Z,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:m?.totalRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Runs"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-500",children:m?.successfulRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Success"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:t==="creator"?m?.totalCreated||0:t==="verifier"?x.filter(v=>v.createdBy==="verifier").length:m?.totalUpdated||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:t==="creator"?"Created":t==="verifier"?"Flagged":"Fixed"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-current/10 text-xs text-muted-foreground",children:["Last run: ",f(m?.lastRun||"")]})]})]},t)})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(g,{icon:e.jsx(C,{className:"w-4 h-4"}),value:z,label:"Created",variant:"info",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(A,{className:"w-4 h-4"}),value:H,label:"Updated",variant:"default",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(M,{className:"w-4 h-4"}),value:_,label:"Deleted",variant:"danger",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(w,{className:"w-4 h-4"}),value:T,label:"Pending",variant:"warning",size:"md",animated:!0})]}),e.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx(y,{active:r==="overview",onClick:()=>a("overview"),icon:L,children:"Recent Runs"}),e.jsxs(y,{active:r==="queue",onClick:()=>a("queue"),icon:w,children:["Work Queue (",T,")"]}),e.jsx(y,{active:r==="ledger",onClick:()=>a("ledger"),icon:P,children:"Audit Ledger"})]}),e.jsxs(G,{mode:"wait",children:[r==="overview"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-primary"}),"Recent Bot Runs"]})}),F?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(N,{className:"w-6 h-6 animate-spin mx-auto text-primary mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(k,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent runs"})]}):e.jsx("div",{className:"divide-y divide-border",children:c.slice(0,10).map((t,s)=>{const l=U(t.botName),m=l.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",l.color),children:e.jsx(m,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.status==="completed"?"bg-green-500/20 text-green-500":t.status==="running"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Processed: ",t.itemsProcessed," | Created: ",t.itemsCreated," | Updated: ",t.itemsUpdated," | Deleted: ",t.itemsDeleted]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f(t.startedAt)})]})},t.id||s)})})]},"overview"),r==="queue"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-primary"}),"Work Queue"]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","processing","completed"].map(t=>e.jsx("button",{onClick:()=>W(t),className:i("text-xs px-2 py-1 rounded-full transition-colors",j===t?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:t},t))})]}),x.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(J,{className:"w-8 h-8 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Queue is empty"})]}):e.jsx("div",{className:"divide-y divide-border",children:x.filter(t=>j==="all"||t.status===j).slice(0,20).map((t,s)=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",t.action==="delete"?"bg-red-500/10 text-red-500":t.action==="improve"?"bg-purple-500/10 text-purple-500":"bg-amber-500/10 text-amber-500"),children:t.action==="delete"?e.jsx(M,{className:"w-4 h-4"}):t.action==="improve"?e.jsx(A,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(q,{itemType:t.itemType,itemId:t.itemId}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.status==="pending"?"bg-amber-500/20 text-amber-500":t.status==="processing"?"bg-blue-500/20 text-blue-500":t.status==="completed"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||"No reason specified"})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xs font-medium",children:["P",t.priority]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f(t.createdAt)})]})]})},t.id||s))})]},"queue"),r==="ledger"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-primary"}),"Audit Ledger"]})}),B.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(S,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No ledger entries yet"})]}):e.jsx("div",{className:"divide-y divide-border",children:B.slice(0,30).map((t,s)=>{const l=U(t.botName),m=l.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",l.color),children:e.jsx(m,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.action==="create"?"bg-cyan-500/20 text-cyan-500":t.action==="update"?"bg-purple-500/20 text-purple-500":t.action==="delete"?"bg-red-500/20 text-red-500":t.action==="verify"?"bg-green-500/20 text-green-500":"bg-amber-500/20 text-amber-500"),children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(q,{itemType:t.itemType,itemId:t.itemId})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||`${t.action} ${t.itemId}`})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:f(t.createdAt)})]})},t.id||s)})})]},"ledger")]}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 p-4 border border-border rounded-xl bg-muted/20",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-primary"}),"3-Bot Pipeline"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3 text-cyan-500"})," Creator"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3 text-amber-500"})," Verifier"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3 text-purple-500"})," Processor"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Creator generates content → Verifier checks quality and flags issues → Processor improves or removes flagged content"})]})]})})]})}export{Te as default};
