import{c as g,r as n,a3 as S,i as k}from"./index-DVOYHRBI.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],O=g("square",p),o="user-preferences",l={role:null,subscribedChannels:[],onboardingComplete:!1,createdAt:new Date().toISOString()};function w(){const[r,t]=n.useState(()=>{if(typeof window>"u")return l;try{const e=localStorage.getItem(o);if(e)return JSON.parse(e)}catch(e){console.error("Failed to load preferences:",e)}return l});n.useEffect(()=>{try{localStorage.setItem(o,JSON.stringify(r))}catch(e){console.error("Failed to save preferences:",e)}},[r]);const i=n.useCallback(e=>{const a=S(e).map(c=>c.id);t(c=>({...c,role:e,subscribedChannels:a,onboardingComplete:!0}))},[]),u=n.useCallback(e=>{t(s=>s.subscribedChannels.includes(e)?s:{...s,subscribedChannels:[...s.subscribedChannels,e]})},[]),b=n.useCallback(e=>{t(s=>({...s,subscribedChannels:s.subscribedChannels.filter(a=>a!==e)}))},[]),d=n.useCallback(e=>{t(s=>s.subscribedChannels.includes(e)?{...s,subscribedChannels:s.subscribedChannels.filter(a=>a!==e)}:{...s,subscribedChannels:[...s.subscribedChannels,e]})},[]),C=n.useCallback(e=>r.subscribedChannels.includes(e),[r.subscribedChannels]),f=n.useCallback(()=>k.filter(e=>r.subscribedChannels.includes(e.id)),[r.subscribedChannels]),h=n.useCallback(()=>{t(l),localStorage.removeItem(o)},[]),m=n.useCallback(()=>{const e=["system-design","algorithms","frontend","backend","database","devops"];t(s=>({...s,subscribedChannels:e,onboardingComplete:!0}))},[]);return{preferences:r,setRole:i,subscribeChannel:u,unsubscribeChannel:b,toggleSubscription:d,isSubscribed:C,getSubscribedChannels:f,resetPreferences:h,skipOnboarding:m,needsOnboarding:!r.onboardingComplete}}export{O as S,w as u};
