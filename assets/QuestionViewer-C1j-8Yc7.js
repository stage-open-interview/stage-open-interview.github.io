import{u as we,a as je,r as c,b as O,c as ve,d as ye,e as Ne,t as ke,f as Ce,j as e,Z as W,C as K,g as Se}from"./index-C-IC1LIA.js";import{g as $e}from"./data-nx7Cffvs.js";import{u as qe,a as Te,b as Ee,R as Fe,V as Ae,c as Me,T as Le,P as Ie,C as Re,I as De}from"./index-vaHyBYWc.js";import{S as Qe}from"./SEOHead-DUu15UYK.js";import{Q as J,A as Z}from"./AnswerPanel-DeMVcj59.js";import{U as Pe,S as Ue}from"./UnifiedSearch-CXtUQVTY.js";import{u as ze,C as Ve}from"./use-swipe-DOpXYd-L.js";import{u as Be,C as P}from"./use-unified-toast-_bFWKKYg.js";import{T as F}from"./target-04_U9Eka.js";import{F as G,B as _,a as He}from"./tag-BPbAv0iH.js";import{C as X}from"./chevron-down-CUv-aPi_.js";import{S as Oe}from"./share-2-BMRrmq45.js";import"./mic-DxXMz0Ku.js";import"./QuestionHistory-B-AwIUgJ.js";import"./history-COFKx11l.js";import"./trash-2-Cmh_xu3K.js";import"./triangle-alert-U103_fow.js";import"./square-pen-LA4TFaT5.js";import"./plus-Bs4SuVdH.js";import"./user-DzCJRC64.js";import"./bot-B9rrO0nD.js";import"./clock-rywPfviC.js";import"./index-C23Saci6.js";import"./hash-BTnl0pTt.js";import"./EnhancedMermaid-B1zZu1NL.js";import"./zoom-out-CYeNVO0W.js";import"./GiscusComments-D-i0WtaZ.js";import"./message-circle-PE8ShJgz.js";import"./QuestionFeedback-C2-FOKX9.js";import"./flag-BA1mNYD-.js";import"./external-link-Pdq4gKtp.js";import"./ban-Bn3HOyV3.js";import"./file-text-DJkNvesP.js";import"./copy-Dy5HeDS8.js";import"./lightbulb-D-N06QbA.js";import"./play-8twtnLE_.js";import"./youtube-D2y3AfXU.js";import"./arrow-left-D2wOXUFq.js";import"./coffee-Do9XeDfn.js";function As(){const[l,r]=we(),[,f]=je("/channel/:id/:questionId?"),t=f?.id,w=f?.questionId,p=new URLSearchParams(l.split("?")[1]||"").get("q"),m=p||w,b=$e(t||""),{subChannels:g}=qe(t||""),o=b?{...b,subChannels:[{id:"all",name:"All Topics"},...g.map(i=>({id:i,name:i.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}))]}:null,[u,v]=c.useState("all"),[j,q]=c.useState("all"),[s,U]=c.useState("all"),[d,C]=c.useState(0),[A,S]=c.useState(!1),[M,y]=c.useState("question"),[Y,ee]=c.useState(!1),{companiesWithCounts:se}=Te(t||"",u,j),{preferences:z}=O(),te=z.shuffleQuestions!==!1,ne=z.prioritizeUnvisited!==!1,{onQuestionSwipe:ie,onQuestionView:ae}=ve(),{trackEvent:le}=ye(),{question:n,questions:$,totalQuestions:h,loading:N,error:re}=Ee(t||"",d,u,j,s,te,ne),[L,V]=c.useState(!1);c.useEffect(()=>{if(!(N||$.length===0))if(m){const i=$.findIndex(a=>a.id===m);i>=0&&i!==d&&C(i),p&&r(`/channel/${t}/${m}`,{replace:!0}),V(!0)}else $[0]&&!L&&(r(`/channel/${t}/${$[0].id}`,{replace:!0}),V(!0))},[m,$.length,t,N,p]);const{completed:oe,markCompleted:ce,saveLastVisitedIndex:de}=Ne(t||""),{isSubscribed:me,subscribeChannel:ue}=O(),{toast:T}=Be();c.useEffect(()=>{t&&o&&!me(t)&&(ue(t),T({title:"Channel added",description:`${o.name} added to your channels`})),t&&Fe.trackChannelVisit(t)},[t,o]);const[he,xe]=c.useState(()=>{const i=localStorage.getItem(`marked-${t}`);return i?JSON.parse(i):[]}),I=ze({onSwipeLeft:()=>y("answer"),onSwipeRight:()=>y("question")});c.useEffect(()=>{h>0&&d>=h&&C(0)},[h,d]),c.useEffect(()=>{!L||N||!t||!n||(n.id!==m&&r(`/channel/${t}/${n.id}`,{replace:!0}),de(d))},[d,L]),c.useEffect(()=>{n&&(ke(n.id,n.channel,n.difficulty),ce(n.id),Ce(),le({type:"question_completed",timestamp:new Date().toISOString(),data:{questionId:n.id,difficulty:n.difficulty,channel:n.channel}}))},[n?.id]),c.useEffect(()=>{const i=a=>{if((a.metaKey||a.ctrlKey)&&a.key==="k"){a.preventDefault(),S(!0);return}A||(a.key==="ArrowRight"||a.key==="ArrowDown"?(a.preventDefault(),B()):a.key==="ArrowLeft"||a.key==="ArrowUp"?(a.preventDefault(),H()):a.key==="Escape"&&r("/"))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[d,h,A]);const B=()=>{d<h-1&&(C(i=>i+1),y("question"),ie(),ae())},H=()=>{d>0&&(C(i=>i-1),y("question"))},R=()=>{n&&xe(i=>{const a=i.includes(n.id)?i.filter(ge=>ge!==n.id):[...i,n.id];return localStorage.setItem(`marked-${t}`,JSON.stringify(a)),a})},fe=async()=>{try{await navigator.clipboard.writeText(window.location.href),T({title:"Link copied!",description:"Question link copied to clipboard"})}catch{T({title:"Share",description:window.location.href})}},pe=(i,a)=>{C(0),i==="sub"?v(a):i==="diff"?q(a):U(a)};if(c.useEffect(()=>{!N&&o&&h===0&&(u!=="all"||j!=="all"||s!=="all"||(T({title:"Content coming soon!",description:`We're preparing questions for "${o.name}". Check back soon!`,variant:"warning"}),ee(!0)))},[N,o,h,u,j,s]),N&&!n)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading questions..."})]})});if(re||!o)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Channel not found"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:['The channel "',t,`" doesn't exist.`]}),e.jsx("button",{onClick:()=>r("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Go Home"})]})});if(!N&&(!n||h===0))return!(u!=="all"||j!=="all"||s!=="all")||Y?e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(Q,{channel:o,onBack:()=>r("/"),onSearch:()=>S(!0)}),e.jsx(Ve,{type:"channel",name:o?.name,redirectTo:"/channels",redirectDelay:5e3})]}):e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(Q,{channel:o,onBack:()=>r("/"),onSearch:()=>S(!0)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters."}),e.jsx("button",{onClick:()=>{v("all"),q("all"),U("all")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Reset Filters"})]})})]});if(!n)return null;const D=he.includes(n.id),E=oe.includes(n.id),be=Math.round((d+1)/h*100);return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{title:`${n.question.substring(0,55)}... | ${o.name} - Code Reels`,description:n.answer?.substring(0,120)||"Practice interview questions",canonical:`https://open-interview.github.io/channel/${t}/${d}`}),e.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[e.jsx(Q,{channel:o,onBack:()=>r("/"),onSearch:()=>S(!0),currentIndex:d,totalQuestions:h,progress:be,filters:{selectedSubChannel:u,selectedDifficulty:j,selectedCompany:s,companiesWithCounts:se,onFilterChange:pe}}),e.jsxs("div",{className:"flex-1 flex overflow-hidden isolate","data-testid":"reels-content",children:[e.jsxs("div",{className:"hidden lg:flex flex-1",children:[e.jsx("div",{className:"w-1/2 border-r border-border overflow-hidden",children:e.jsx(J,{question:n,questionNumber:d+1,totalQuestions:h,isMarked:D,isCompleted:E,onToggleMark:R,timerEnabled:!1,timeLeft:0})}),e.jsx("div",{className:"w-1/2 overflow-hidden",children:e.jsx(Z,{question:n,isCompleted:E})})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:hidden overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-border bg-background relative z-10",children:[e.jsx("button",{onClick:()=>y("question"),className:`flex-1 py-3 text-sm font-medium transition-colors ${M==="question"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Question"}),e.jsx("button",{onClick:()=>y("answer"),className:`flex-1 py-3 text-sm font-medium transition-colors ${M==="answer"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Answer"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-background relative z-0 pb-20",onTouchStart:I.onTouchStart,onTouchMove:I.onTouchMove,onTouchEnd:I.onTouchEnd,children:M==="question"?e.jsx(J,{question:n,questionNumber:d+1,totalQuestions:h,isMarked:D,isCompleted:E,onToggleMark:R,onTapQuestion:()=>y("answer"),timerEnabled:!1,timeLeft:0}):e.jsx(Z,{question:n,isCompleted:E})})]})]}),e.jsx(We,{currentIndex:d,totalQuestions:h,onPrev:H,onNext:B,onShare:fe,isMarked:D,onToggleMark:R})]}),e.jsx(Pe,{isOpen:A,onClose:()=>S(!1)}),e.jsx(Ae,{})]})}function Q({channel:l,onBack:r,onSearch:f,currentIndex:t,totalQuestions:w,progress:x,filters:p}){const{selectedSubChannel:m,selectedDifficulty:b,selectedCompany:g,companiesWithCounts:o,onFilterChange:u}=p||{},[v,j]=c.useState(!1),q=m!=="all"||b!=="all"||g!=="all";return e.jsxs("header",{className:"bg-card/95 backdrop-blur-md border-b border-border shrink-0",children:[e.jsxs("div",{className:"h-14 flex items-center px-3 sm:px-4 gap-2 sm:gap-3",children:[e.jsx("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors shrink-0",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsxs("div",{className:"shrink-0 min-w-0 max-w-[200px] sm:max-w-none",children:[e.jsx("h1",{className:"font-semibold text-sm sm:text-base leading-tight",children:l.name}),w>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[t+1," of ",w]}),e.jsx("div",{className:"w-12 sm:w-16 h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${x}%`}})})]})]}),p&&e.jsxs("div",{className:"hidden sm:flex flex-1 items-center gap-2 overflow-x-auto no-scrollbar mx-2",children:[l.subChannels?.length>1&&e.jsx(k,{label:l.subChannels.find(s=>s.id===m)?.name||"Topic",options:l.subChannels.map(s=>({id:s.id,label:s.name})),selected:m,onSelect:s=>u("sub",s)}),e.jsx(k,{label:b==="all"?"Difficulty":b,options:[{id:"all",label:"All Levels",icon:e.jsx(F,{className:"w-3 h-3"})},{id:"beginner",label:"Easy",icon:e.jsx(W,{className:"w-3 h-3 text-green-500"})},{id:"intermediate",label:"Medium",icon:e.jsx(F,{className:"w-3 h-3 text-yellow-500"})},{id:"advanced",label:"Hard",icon:e.jsx(G,{className:"w-3 h-3 text-red-500"})}],selected:b,onSelect:s=>u("diff",s)}),o.length>0&&e.jsx(k,{label:g==="all"?"Company":g,options:[{id:"all",label:"All Companies",icon:e.jsx(_,{className:"w-3 h-3"})},...o.map(s=>({id:s.name,label:`${s.name} (${s.count})`}))],selected:g,onSelect:s=>u("company",s)})]}),p&&e.jsx("button",{onClick:()=>j(!v),className:`sm:hidden p-2 rounded-lg transition-colors ${v||q?"bg-primary/15 text-primary":"hover:bg-muted"}`,children:e.jsx(X,{className:`w-4 h-4 transition-transform ${v?"rotate-180":""}`})}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-muted rounded-lg transition-colors shrink-0",children:e.jsx(Ue,{className:"w-5 h-5"})})]}),p&&v&&e.jsxs("div",{className:"sm:hidden px-3 pb-3 flex items-center gap-2 overflow-x-auto no-scrollbar",children:[l.subChannels?.length>1&&e.jsx(k,{label:l.subChannels.find(s=>s.id===m)?.name||"Topic",options:l.subChannels.map(s=>({id:s.id,label:s.name})),selected:m,onSelect:s=>u("sub",s)}),e.jsx(k,{label:b==="all"?"Level":b.slice(0,4),options:[{id:"all",label:"All Levels",icon:e.jsx(F,{className:"w-3 h-3"})},{id:"beginner",label:"Easy",icon:e.jsx(W,{className:"w-3 h-3 text-green-500"})},{id:"intermediate",label:"Medium",icon:e.jsx(F,{className:"w-3 h-3 text-yellow-500"})},{id:"advanced",label:"Hard",icon:e.jsx(G,{className:"w-3 h-3 text-red-500"})}],selected:b,onSelect:s=>u("diff",s)}),o.length>0&&e.jsx(k,{label:g==="all"?"Company":g.slice(0,8),options:[{id:"all",label:"All Companies",icon:e.jsx(_,{className:"w-3 h-3"})},...o.map(s=>({id:s.name,label:`${s.name} (${s.count})`}))],selected:g,onSelect:s=>u("company",s)})]})]})}function k({label:l,options:r,selected:f,onSelect:t}){const w=f!=="all";return e.jsxs(Me,{children:[e.jsx(Le,{asChild:!0,children:e.jsxs("button",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-all whitespace-nowrap outline-none focus:outline-none ${w?"bg-primary/15 text-primary border border-primary/30":"bg-muted/50 hover:bg-muted border border-transparent"}`,children:[l,e.jsx(X,{className:"w-3 h-3 opacity-60"})]})}),e.jsx(Ie,{children:e.jsx(Re,{className:"min-w-[180px] max-h-[300px] overflow-y-auto bg-black/90 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl shadow-black/50 p-1.5 z-50",sideOffset:6,children:r.map(x=>e.jsxs(De,{onClick:()=>t(x.id),className:`flex items-center gap-2 px-3 py-2.5 rounded-lg cursor-pointer outline-none text-sm transition-colors ${f===x.id?"bg-primary/20 text-primary":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:[x.icon,e.jsx("span",{className:"flex-1",children:x.label}),f===x.id&&e.jsx(Se,{className:"w-4 h-4"})]},x.id))})})]})}function We({currentIndex:l,totalQuestions:r,onPrev:f,onNext:t,onShare:w,isMarked:x,onToggleMark:p}){const m=Math.round((l+1)/r*100);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 pointer-events-none lg:hidden",children:e.jsxs("div",{className:"pointer-events-auto flex items-center gap-0.5 p-1 bg-black/80 backdrop-blur-xl border border-white/15 rounded-xl shadow-2xl shadow-black/50",children:[e.jsx("button",{onClick:f,disabled:l===0,className:"w-11 h-11 flex items-center justify-center rounded-lg hover:bg-white/10 transition-all disabled:opacity-20 active:scale-90",children:e.jsx(P,{className:"w-5 h-5 text-white/70"})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("div",{className:"relative w-10 h-1 bg-white/15 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${m}%`}})}),e.jsxs("span",{className:"text-[11px] text-white/50 tabular-nums font-medium min-w-[36px]",children:[l+1,"/",r]})]}),e.jsx("button",{onClick:t,disabled:l===r-1,className:"w-11 h-11 flex items-center justify-center bg-primary text-white rounded-lg hover:bg-primary/80 transition-all disabled:opacity-20 active:scale-90",children:e.jsx(K,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 pointer-events-none hidden lg:block",children:e.jsxs("div",{className:"pointer-events-auto flex items-center gap-1 px-1.5 py-1 bg-black/80 backdrop-blur-xl border border-white/15 rounded-xl shadow-2xl shadow-black/50",children:[e.jsx("button",{onClick:f,disabled:l===0,className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/10 transition-all disabled:opacity-20 active:scale-95",children:e.jsx(P,{className:"w-5 h-5 text-white/70"})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("div",{className:"relative w-14 h-1 bg-white/15 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${m}%`}})}),e.jsxs("span",{className:"text-xs text-white/50 tabular-nums font-medium",children:[l+1,"/",r]})]}),e.jsx("button",{onClick:p,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-all active:scale-95 ${x?"bg-primary/20 text-primary":"hover:bg-white/10 text-white/50"}`,children:e.jsx(He,{className:`w-4 h-4 ${x?"fill-current":""}`})}),e.jsx("button",{onClick:w,className:"w-9 h-9 flex items-center justify-center rounded-lg hover:bg-white/10 text-white/50 transition-all active:scale-95",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:t,disabled:l===r-1,className:"flex items-center gap-1.5 h-10 pl-4 pr-3 bg-primary text-white rounded-lg hover:bg-primary/80 transition-all disabled:opacity-20 active:scale-95 text-sm font-medium",children:["Next",e.jsx(K,{className:"w-4 h-4"})]})]})})]})}export{As as default};
