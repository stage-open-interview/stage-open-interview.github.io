import{aF as et,aG as nt,aH as at,aI as it,aJ as st,aK as Y,aL as Z,aM as rt,aN as ot,aO as lt,aP as ut,aQ as ct,aR as ft,aS as mt,aT as ht,aU as pt,aV as gt,aW as B,aX as dt,aY as yt,aZ as At}from"./index-droZKZMs.js";const St=(e,t,n)=>{const a=t-e;return((n-e)%a+a)%a+e};function $(e,t){return et(e)?e[St(0,e.length,t)]:e}class Et{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let a=0;a<this.animations.length;a++)this.animations[a][t]=n}attachTimeline(t){const n=this.animations.map(a=>a.attachTimeline(t));return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return J(this.animations,"duration")}get iterationDuration(){return J(this.animations,"iterationDuration")}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function J(e,t){let n=0;for(let a=0;a<e.length;a++){const i=e[a][t];i!==null&&i>n&&(n=i)}return n}class Vt extends Et{then(t,n){return this.finished.finally(t).then(()=>{})}}function vt(e,t){return e in t}class Dt extends nt{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(vt(n,t)){const a=t[n];if(typeof a=="string"||typeof a=="number")return a}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return at()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function W(e){return typeof e=="object"&&!Array.isArray(e)}function k(e,t,n,a){return e==null?[]:typeof e=="string"&&W(t)?it(e,n,a):e instanceof NodeList?Array.from(e):Array.isArray(e)?e.filter(i=>i!=null):[e]}function Mt(e,t,n){return e*(t+1)}function Q(e,t,n,a){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):a.get(t)??e}function Tt(e,t,n){for(let a=0;a<e.length;a++){const i=e[a];i.at>t&&i.at<n&&(Y(e,i),a--)}}function bt(e,t,n,a,i,u){Tt(e,i,u);for(let s=0;s<t.length;s++)e.push({value:t[s],at:st(i,u,a[s]),easing:$(n,s)})}function Ot(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function xt(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Gt="easeInOut";function It(e,{defaultTransition:t={},...n}={},a,i){const u=t.duration||.3,s=new Map,l=new Map,h={},c=new Map;let S=0,o=0,F=0;for(let M=0;M<e.length;M++){const p=e[M];if(typeof p=="string"){c.set(p,o);continue}else if(!Array.isArray(p)){c.set(p.name,Q(o,p.at,S,c));continue}let[v,g,f={}]=p;f.at!==void 0&&(o=Q(o,f.at,S,c));let m=0;const T=(d,b,E,D=0,O=0)=>{const r=wt(d),{delay:x=0,times:y=rt(r),type:C=t.type||"keyframes",repeat:K,repeatType:Rt,repeatDelay:_t=0,...tt}=b;let{ease:V=t.ease||"easeOut",duration:A}=b;const j=typeof x=="function"?x(D,O):x,P=r.length,R=ut(C)?C:i?.[C||"keyframes"];if(P<=2&&R){let G=100;if(P===2&&Nt(r)){const I=r[1]-r[0];G=Math.abs(I)}const N={...t,...tt};A!==void 0&&(N.duration=ct(A));const L=ot(N,G,R);V=L.ease,A=L.duration}A??(A=u);const _=o+j;y.length===1&&y[0]===0&&(y[1]=1);const z=y.length-r.length;if(z>0&&lt(y,z),r.length===1&&r.unshift(null),K){A=Mt(A,K);const G=[...r],N=[...y];V=Array.isArray(V)?[...V]:[V];const L=[...V];for(let I=0;I<K;I++){r.push(...G);for(let w=0;w<G.length;w++)y.push(N[w]+(I+1)),V.push(w===0?"linear":$(L,w-1))}Ot(y,K)}const H=_+A;bt(E,r,V,y,_,H),m=Math.max(j+A,m),F=Math.max(H,F)};if(Z(v)){const d=U(v,l);T(g,f,X("default",d))}else{const d=k(v,g,a,h),b=d.length;for(let E=0;E<b;E++){g=g,f=f;const D=d[E],O=U(D,l);for(const r in g)T(g[r],Ft(f,r),X(r,O),E,b)}}S=o,o+=m}return l.forEach((M,p)=>{for(const v in M){const g=M[v];g.sort(xt);const f=[],m=[],T=[];for(let D=0;D<g.length;D++){const{at:O,value:r,easing:x}=g[D];f.push(r),m.push(ft(0,F,O)),T.push(x||"easeOut")}m[0]!==0&&(m.unshift(0),f.unshift(f[0]),T.unshift(Gt)),m[m.length-1]!==1&&(m.push(1),f.push(null)),s.has(p)||s.set(p,{keyframes:{},transition:{}});const d=s.get(p);d.keyframes[v]=f;const{type:b,...E}=t;d.transition[v]={...E,duration:F,ease:T,times:m,...n}}}),s}function U(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function X(e,t){return t[e]||(t[e]=[]),t[e]}function wt(e){return Array.isArray(e)?e:[e]}function Ft(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Kt=e=>typeof e=="number",Nt=e=>e.every(Kt);function Lt(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=mt(e)&&!ht(e)?new pt(t):new gt(t);n.mount(e),B.set(e,n)}function Bt(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Dt(t);n.mount(e),B.set(e,n)}function Ct(e,t){return Z(e)||typeof e=="number"||typeof e=="string"&&!W(t)}function q(e,t,n,a){const i=[];if(Ct(e,t))i.push(dt(e,W(t)&&t.default||t,n&&(n.default||n)));else{if(e==null)return i;const u=k(e,t,a),s=u.length;for(let l=0;l<s;l++){const h=u[l],c=h instanceof Element?Lt:Bt;B.has(h)||c(h);const S=B.get(h),o={...n};"delay"in o&&typeof o.delay=="function"&&(o.delay=o.delay(l,s)),i.push(...yt(S,{...t,transition:o},{}))}}return i}function Wt(e,t,n){const a=[];return It(e,t,n,{spring:At}).forEach(({keyframes:u,transition:s},l)=>{a.push(...q(l,u,s))}),a}function jt(e){return Array.isArray(e)&&e.some(Array.isArray)}function Pt(e={}){const{scope:t,reduceMotion:n}=e;function a(i,u,s){let l=[],h;if(jt(i))l=Wt(i,n!==void 0?{reduceMotion:n,...u}:u,t);else{const{onComplete:S,...o}=s||{};typeof S=="function"&&(h=S),l=q(i,u,n!==void 0?{reduceMotion:n,...o}:o,t)}const c=new Vt(l);return h&&c.finished.then(h),t&&(t.animations.push(c),c.finished.then(()=>{Y(t.animations,c)})),c}return a}const Ht=Pt();export{Ht as a};
