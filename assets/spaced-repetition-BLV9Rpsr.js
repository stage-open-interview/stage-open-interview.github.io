import{d as b,r as u,j as e,a3 as $,A as D,m as g,X as O,s as G,u as P,M as U}from"./index-CMsGYV2p.js";import{C as j}from"./clock-BY2J6rGS.js";import{P as N}from"./play-Bbu_oXNH.js";import{M as Q}from"./message-circle-Dr2y3rY4.js";import{C as z}from"./chevron-down-BaRdbJ-b.js";import{L as M}from"./tag-Br_JP9UY.js";import{S as L}from"./sparkles-DEeSXtoS.js";import{C as Y}from"./use-unified-toast-Ktf_tvnd.js";import{C as J}from"./check-v_Z-LeU8.js";import{F as B}from"./flag-CbS1gcZs.js";import{E as H}from"./external-link-Bs9cCnYe.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Ne=b("baby",K);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],X=b("ban",V);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],S=b("youtube",Z);function k(t){if(!t)return null;const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const r of s){const a=t.match(r);if(a)return a[1]}return null}function W(t){return t?.includes("/shorts/")||!1}function Se({shortVideo:t,longVideo:s}){const[r,a]=u.useState(null),n=u.useRef(null),l=t?k(t):null,d=s?k(s):null;if(!l&&!d)return null;const c=()=>a(null);return u.useEffect(()=>{const o=m=>{m.key==="Escape"&&r&&c()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full clear-both",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-3",children:[l&&e.jsxs("button",{onClick:()=>a("short"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(S,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Quick"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"})," Under 60s"]})]}),e.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]}),d&&e.jsxs("button",{onClick:()=>a("long"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(S,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Deep Dive"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"})," 5-20 min"]})]}),e.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]})]})}),typeof document<"u"&&$.createPortal(e.jsx(D,{children:r&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-background/95 backdrop-blur-sm flex items-center justify-center p-4 sm:p-8 lg:p-12",onClick:c,children:e.jsxs(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-5xl mx-auto",onClick:o=>o.stopPropagation(),children:[e.jsxs("button",{onClick:c,className:"absolute -top-12 right-0 z-20 p-2 text-foreground hover:text-foreground/80 transition-colors",children:[e.jsx(O,{className:"w-6 h-6"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx("div",{className:`relative bg-background rounded-lg overflow-hidden border border-white/20 shadow-2xl ${r==="short"&&W(t||"")?"max-w-sm mx-auto aspect-[9/16]":"w-full aspect-video"}`,children:e.jsx("iframe",{ref:n,src:`https://www.youtube.com/embed/${r==="short"?l:d}?autoplay=1&rel=0&playsinline=1`,title:r==="short"?"Quick Explanation":"Deep Dive Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-foreground/50",children:r==="short"?"âš¡ Quick Explanation":"ðŸ“š Deep Dive"})})]})})}),document.body)]})}const q="open-interview/open-interview.github.io",ee="R_kgDOQuSz7g",te="General",se="DIC_kwDOQuSz7s4C0NCw",C=[];function ke({questionId:t}){const[s,r]=u.useState(!1),[a,n]=u.useState(!1),[l,d]=u.useState(!1),c=u.useRef(null),{theme:o}=G(),m=C.includes(o)?"light":"transparent_dark";return u.useEffect(()=>{if(!s||!c.current||l)return;for(n(!0);c.current.firstChild;)c.current.removeChild(c.current.firstChild);const i=document.createElement("script");i.src="https://giscus.app/client.js",i.setAttribute("data-repo",q),i.setAttribute("data-repo-id",ee),i.setAttribute("data-category",te),i.setAttribute("data-category-id",se),i.setAttribute("data-mapping","specific"),i.setAttribute("data-term",t),i.setAttribute("data-strict","0"),i.setAttribute("data-reactions-enabled","0"),i.setAttribute("data-emit-metadata","0"),i.setAttribute("data-input-position","top"),i.setAttribute("data-theme",m),i.setAttribute("data-lang","en"),i.crossOrigin="anonymous",i.async=!0,c.current.appendChild(i);const p=setTimeout(()=>{n(!1),d(!0)},3e3),f=h=>{h.origin==="https://giscus.app"&&h.data?.giscus&&(n(!1),d(!0),clearTimeout(p))};return window.addEventListener("message",f),()=>{window.removeEventListener("message",f),clearTimeout(p)}},[s,t,m,l]),u.useEffect(()=>{d(!1),r(!1)},[t]),e.jsxs("div",{className:"w-full mt-2 pb-16",children:[e.jsxs("button",{onClick:()=>r(!s),className:"w-full flex items-center justify-between gap-2 px-2.5 py-2 bg-gradient-to-r from-muted/40 to-muted/20 hover:from-muted/60 hover:to-muted/40 rounded-lg border border-border/50 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 rounded-md bg-primary/10 group-hover:bg-primary/20 transition-colors",children:e.jsx(Q,{className:"w-3.5 h-3.5 text-primary"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-xs font-medium text-foreground",children:"Discussion"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Ask questions or share insights"})]})]}),e.jsx(z,{className:`w-4 h-4 text-muted-foreground transition-transform duration-300 ${s?"rotate-180":""}`})]}),s&&e.jsx("div",{className:"mt-2",children:e.jsxs(e.Fragment,{children:[a&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-4 gap-1.5",children:[e.jsx(M,{className:"w-4 h-4 text-primary animate-spin"}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Loading discussion..."})]}),e.jsx("div",{ref:c,className:"giscus min-h-[80px]",style:{colorScheme:C.includes(o)?"light":"dark"}})]})})]})}function Ce({questionId:t,currentChannel:s}){const[,r]=P(),[a,n]=u.useState([]),[l,d]=u.useState(!0),[c,o]=u.useState(!1);if(u.useEffect(()=>{async function i(){d(!0),o(!1);try{const p=await fetch("/data/similar-questions.json");if(!p.ok){o(!0);return}const h=(await p.json()).similarities?.[t]||[];n(h.slice(0,4))}catch{o(!0)}finally{d(!1)}}i()},[t]),c||!l&&a.length===0)return null;const m=i=>{r(`/channel/${i.channel}/${i.id}`)};return e.jsxs("div",{className:"rounded-lg border border-border bg-card/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 border-b border-border bg-muted/30",children:[e.jsx(L,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"font-medium text-xs",children:"Similar Questions"})]}),e.jsx("div",{className:"divide-y divide-border",children:l?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(M,{className:"w-4 h-4 animate-spin text-muted-foreground"})}):a.map(i=>e.jsxs("button",{onClick:()=>m(i),className:"w-full flex items-start gap-2 px-2.5 py-2 hover:bg-muted/50 transition-colors text-left group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground/90 line-clamp-2 group-hover:text-primary transition-colors",children:i.question}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:i.channel.replace(/-/g," ")}),e.jsxs("span",{className:"text-[10px] text-primary/60",children:[Math.round(i.similarity*100),"%"]})]})]}),e.jsx(Y,{className:"w-3.5 h-3.5 text-muted-foreground group-hover:text-primary transition-colors mt-0.5 shrink-0"})]},i.id))})]})}const E=[{type:"improve",icon:e.jsx(L,{className:"w-3 h-3"}),label:"Improve",color:"text-blue-400 hover:bg-blue-500/20",issueLabel:"improve"},{type:"rewrite",icon:e.jsx(U,{className:"w-3 h-3"}),label:"Rewrite",color:"text-amber-400 hover:bg-amber-500/20",issueLabel:"rewrite"},{type:"disable",icon:e.jsx(X,{className:"w-3 h-3"}),label:"Remove",color:"text-red-400 hover:bg-red-500/20",issueLabel:"disable"}],re="open-interview/open-interview",v="question-feedback";function w(){try{return JSON.parse(localStorage.getItem(v)||"[]")}catch{return[]}}function ae(t){const s=w().filter(r=>r.questionId!==t.questionId);s.push(t),localStorage.setItem(v,JSON.stringify(s))}function ne(t){return w().find(s=>s.questionId===t)||null}function ie(t){const s=w().filter(r=>r.questionId!==t);localStorage.setItem(v,JSON.stringify(s))}function oe(t,s){const r=`[${s.toUpperCase()}] Question: ${t}`,a=`## Question Feedback

**Question ID:** \`${t}\`
**Feedback Type:** ${s}
**Page URL:** ${window.location.href}

---

### Details
<!-- Please describe what needs to be ${s==="improve"?"improved":s==="rewrite"?"rewritten":"removed"} -->



---
*This issue was created via the question feedback button.*
`,n=`bot:processor,feedback:${s}`;return`https://github.com/${re}/issues/new?title=${encodeURIComponent(r)}&body=${encodeURIComponent(a)}&labels=${encodeURIComponent(n)}`}function Ee({questionId:t,className:s=""}){const[r,a]=u.useState(!1),[n,l]=u.useState(null);u.useEffect(()=>{l(ne(t)),a(!1)},[t]);const d=o=>{const m={questionId:t,type:o,timestamp:new Date().toISOString()};ae(m),l(m),a(!1);const i=oe(t,o);window.open(i,"_blank","noopener,noreferrer")},c=()=>{ie(t),l(null)};if(n){const o=E.find(m=>m.type===n.type);return e.jsxs("button",{onClick:c,className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] transition-all ${n.type==="improve"?"bg-blue-500/20 text-blue-400":n.type==="rewrite"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"} ${s}`,title:"Click to clear",children:[e.jsx(J,{className:"w-2.5 h-2.5"}),e.jsx("span",{className:"hidden sm:inline",children:o?.label})]})}return e.jsxs("div",{className:`relative inline-flex ${s}`,children:[e.jsx("button",{onClick:()=>a(!r),className:"p-2 rounded-lg bg-card border border-border text-muted-foreground hover:text-foreground hover:bg-muted transition-all",title:"Flag question for review",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(D,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsxs(g.div,{initial:{opacity:0,scale:.9,y:-4},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-4},transition:{duration:.15},className:"absolute right-0 top-full mt-1 z-50 bg-card/95 backdrop-blur border border-border rounded-lg shadow-xl p-1.5 min-w-[120px]",children:[e.jsxs("p",{className:"text-[9px] text-muted-foreground px-2 pb-1 flex items-center gap-1",children:[e.jsx(H,{className:"w-2.5 h-2.5"}),"Opens GitHub Issue"]}),E.map(o=>e.jsxs("button",{onClick:()=>d(o.type),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-[11px] transition-all ${o.color}`,children:[o.icon,o.label]},o.type)),e.jsxs("button",{onClick:()=>a(!1),className:"w-full flex items-center gap-2 px-2 py-1 rounded text-[10px] text-muted-foreground/60 hover:text-muted-foreground mt-0.5",children:[e.jsx(O,{className:"w-2.5 h-2.5"}),"Cancel"]})]})]})})]})}const _="code-reels-srs",R="code-reels-srs-stats",A=1.3,F=2.5,x=[1,3,7],I=180;function le(t,s){let{interval:r,easeFactor:a,repetitions:n}=t;switch(s){case"again":return{interval:1,easeFactor:Math.max(A,a-.2),repetitions:0};case"hard":return{interval:Math.max(1,Math.round(r*1.2)),easeFactor:Math.max(A,a-.15),repetitions:n+1};case"good":let d;return n<x.length?d=x[n]:d=Math.round(r*a),{interval:Math.min(I,d),easeFactor:a,repetitions:n+1};case"easy":let c;return n<x.length?c=x[Math.min(n+1,x.length-1)]*1.5:c=Math.round(r*a*1.3),{interval:Math.min(I,Math.round(c)),easeFactor:Math.min(3,a+.1),repetitions:n+1}}}function ce(t){const{repetitions:s,interval:r,correctStreak:a}=t;return s===0?0:r>=90&&a>=5?5:r>=30&&a>=4?4:r>=14&&a>=3?3:r>=7&&a>=2?2:s>=1?1:0}function y(){try{const t=localStorage.getItem(_);if(!t)return new Map;const s=JSON.parse(t);return new Map(Object.entries(s))}catch{return new Map}}function T(t){const s=Object.fromEntries(t);localStorage.setItem(_,JSON.stringify(s))}function de(t,s,r){const n=y().get(t);return n||{questionId:t,channel:s,difficulty:r,interval:0,easeFactor:F,repetitions:0,nextReview:new Date().toISOString().split("T")[0],lastReview:"",totalReviews:0,correctStreak:0,masteryLevel:0}}function Re(t,s,r,a){const n=y(),l=de(t,s,r),{interval:d,easeFactor:c,repetitions:o}=le(l,a),m=new Date().toISOString().split("T")[0],i=new Date;i.setDate(i.getDate()+d);const p={...l,interval:d,easeFactor:c,repetitions:o,nextReview:i.toISOString().split("T")[0],lastReview:m,totalReviews:l.totalReviews+1,correctStreak:a==="again"?0:l.correctStreak+1,masteryLevel:0};return p.masteryLevel=ce(p),n.set(t,p),T(n),ue(),p}function ue(){const t=new Date().toISOString().split("T")[0],s=localStorage.getItem(R),r=s?JSON.parse(s):{reviewStreak:0,lastReviewDate:null};if(r.lastReviewDate===t)return;const a=new Date;a.setDate(a.getDate()-1);const n=a.toISOString().split("T")[0];r.lastReviewDate===n?r.reviewStreak+=1:r.lastReviewDate!==t&&(r.reviewStreak=1),r.lastReviewDate=t,localStorage.setItem(R,JSON.stringify(r))}function Ae(t,s,r){const a=y();if(a.has(t))return a.get(t);const n={questionId:t,channel:s,difficulty:r,interval:1,easeFactor:F,repetitions:0,nextReview:new Date().toISOString().split("T")[0],lastReview:"",totalReviews:0,correctStreak:0,masteryLevel:0};return a.set(t,n),T(a),n}function Ie(t){return["New","Learning","Familiar","Proficient","Expert","Mastered"][Math.min(t,5)]}function De(t){return["text-muted-foreground","text-blue-500","text-cyan-500","text-green-500","text-purple-500","text-yellow-500"][Math.min(t,5)]}export{Ne as B,ke as G,Ee as Q,Ce as S,Se as Y,Ae as a,Ie as b,De as c,de as g,Re as r};
