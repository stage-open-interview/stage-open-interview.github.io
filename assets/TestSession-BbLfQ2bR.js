import{p as be,u as je,r as m,j as e,m as h,R as J,n as K,Z as L,H as U,o as X,i as z,X as V,q as ye,C as Ne,T as W,s as Z,v as G}from"./index-Bd4OfHjt.js";import{S as we}from"./SEOHead-DMy2H_zX.js";import{Q as ee}from"./QuestionFeedback-7XNX_Ww3.js";import{Q as ve}from"./QuestionHistory-Cr4J0pYT.js";import{D as Se}from"./DesktopSidebarWrapper-BeevHAYG.js";import{g as Ce,a as ke,b as $e,c as se,d as Ie,e as qe,f as Ae,h as Te,s as Ee}from"./tests-CRs_cQC6.js";import{T as Oe}from"./triangle-alert-BAlG1355.js";import{P as Re}from"./play-BG7X4e5c.js";import{A as te}from"./arrow-right-CW9QK2F-.js";import{E as re}from"./eye-C-FzVgPf.js";import{C as Pe}from"./chevron-down-DbHHO7xA.js";import{C as De}from"./circle-x-B7sOzyun.js";import{E as Qe}from"./external-link-BZ51eAeS.js";import{R as ne}from"./rotate-ccw-B1VCC6oM.js";import{S as ae}from"./share-2-_Ce2_qeN.js";import"./flag-DyXLOqyt.js";import"./ban-DFaZhzy2.js";import"./history-DUsbZf-4.js";import"./trash-2-CiRO1oFz.js";import"./square-pen-BF9EjQhR.js";import"./plus-DErikAio.js";import"./user-CyQS8Ggn.js";import"./bot-Djgfy9Gz.js";import"./clock-DxtfVdFZ.js";import"./UnifiedNav-BhtY2tpG.js";import"./book-open-C2d09uNf.js";import"./target-DhIvVmUJ.js";import"./mic-CdTPNIKc.js";import"./use-unified-toast-CTLjDvXk.js";import"./tag-Dn0a4MoH.js";import"./chart-column-8tMXumHP.js";import"./bookmark-BGMfdiyv.js";import"./UnifiedSearch-ClhsMaBY.js";import"./loader-circle-BLr-gu0E.js";function E(g){return g?g.split(/`([^`]+)`/g).map((v,n)=>n%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:v},n):v):null}const oe="test-auto-submit";function Fe(){try{const g=localStorage.getItem(oe);return g===null?!0:g==="true"}catch{return!0}}function Be(g){localStorage.setItem(oe,String(g))}function ys(){const{channelId:g}=be(),[ie,v]=je(),[n,le]=m.useState(null),[j,y]=m.useState("loading"),[p,Y]=m.useState([]),[x,S]=m.useState(0),[d,$]=m.useState({}),[A,_]=m.useState(0),[t,O]=m.useState(null),[I,ce]=m.useState(Fe),[N,C]=m.useState(null),[R,P]=m.useState(new Set),[b,de]=m.useState("all"),[u,D]=m.useState(null);m.useEffect(()=>{g&&Ce(g).then(s=>{if(s){le(s);const r=`test-session-${s.channelId}`,o=localStorage.getItem(r);if(o)try{const i=JSON.parse(o);if(i.questions&&i.questions.length>0){D(r),y("ready");return}}catch(i){console.error("Invalid session data:",i),localStorage.removeItem(r)}y("ready")}else y("loading")})},[g]),m.useEffect(()=>{if(j==="in-progress")return()=>{}},[j,A]);const Q=m.useCallback(()=>{if(!n||!u)return;const s={testId:n.id,channelId:n.channelId,channelName:n.channelName,questions:p,currentIndex:x,answers:d,startTime:A,lastAccessedAt:new Date().toISOString()};localStorage.setItem(u,JSON.stringify(s))},[n,u,p,x,d,A]),T=m.useCallback((s=!1)=>{if(!n)return;const r=`test-session-${n.channelId}`;if(D(r),s){const i=localStorage.getItem(r);if(i)try{const c=JSON.parse(i);Y(c.questions),$(c.answers||{}),S(c.currentIndex||0),_(c.startTime||Date.now()),O(null),y("in-progress");return}catch(c){console.error("Failed to resume session:",c)}}const o=ke(n,15);Y(o),$({}),S(0),_(Date.now()),O(null),y("in-progress")},[n]),H=m.useCallback(()=>{u&&(localStorage.removeItem(u),D(null))},[u]),a=p[x],k=$e(n?.id||""),f=n?se(n.channelId):se("default"),q=n&&k?Ie(n,k):!1,me=s=>{if(!a)return;const r=d[a.id]||[];if(a.type==="single"){const o={...d,[a.id]:[s]};if($(o),I){const c=a.options.find(l=>l.isCorrect)?.id===s;C(c?"correct":"incorrect"),setTimeout(()=>{C(null),x<p.length-1&&S(x+1)},600)}}else r.includes(s)?$({...d,[a.id]:r.filter(o=>o!==s)}):$({...d,[a.id]:[...r,s]})};m.useEffect(()=>{j==="in-progress"&&p.length>0&&Q()},[j,d,x,Q,p.length]);const xe=()=>{const s=!I;ce(s),Be(s)},ue=()=>{x<p.length-1&&S(x+1)},he=()=>{if(!a||a.type!=="multiple")return;const s=d[a.id]||[];if(s.length===0)return;const r=a.options.filter(l=>l.isCorrect).map(l=>l.id),o=r.every(l=>s.includes(l)),i=s.every(l=>r.includes(l));C(o&&i?"correct":"incorrect"),setTimeout(()=>{C(null),x<p.length-1&&S(x+1)},800)},pe=()=>{x>0&&S(x-1)},M=()=>{if(!n)return;const s=Te({...n,questions:p},d);O(s);const r={testId:n.id,startedAt:new Date(A).toISOString(),completedAt:new Date().toISOString(),answers:d,score:s.score,passed:s.passed};Ee(n.id,n.channelId,r,n.version),y("review"),H(),s.passed?G.celebrate():G.disappointed()},ge=()=>{Q(),v("/")},F=()=>p.map(s=>{const r=d[s.id]||[],o=s.options.filter(l=>l.isCorrect),i=o.map(l=>l.id);let c=!1;if(s.type==="single")c=r.length===1&&i.includes(r[0]);else{const l=i.every(B=>r.includes(B)),w=r.every(B=>i.includes(B));c=l&&w&&r.length>0}return{question:s,userAnswers:r,correctOptions:o,isCorrect:c}}),fe=Object.keys(d).length;return j==="loading"||!n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:n?"Loading test...":"No test available for this channel yet"}),e.jsx("button",{onClick:()=>v("/"),className:"mt-4 text-primary hover:underline text-sm",children:"Go back home"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{title:`${n.title} | Code Reels`,description:n.description,canonical:`https://open-interview.github.io/test/${g}`}),e.jsx(Se,{children:e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono w-full overflow-x-hidden",children:[j==="ready"&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 w-full overflow-x-hidden",children:e.jsxs(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`max-w-md w-full border bg-card rounded-lg p-6 relative overflow-hidden ${q?"border-amber-500/50":"border-border"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f.gradient} opacity-30`}),e.jsxs("div",{className:"relative z-10",children:[q&&e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-500",children:"Pass Expired!"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New questions added - retake to recertify"})]})]}),u&&localStorage.getItem(u)&&e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-primary/20 border border-primary/30 rounded-lg flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-primary flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Continue where you left off"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You have an in-progress test session"})]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl ${f.secondary} flex items-center justify-center mx-auto mb-4 shadow-lg ${f.glow}`,children:e.jsx("span",{className:"text-3xl",children:f.icon})}),e.jsx("h1",{className:`text-xl font-bold mb-2 ${f.primary}`,children:n.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),n.version>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-2 px-2 py-0.5 bg-primary/20 text-primary text-xs rounded-full",children:[e.jsx(K,{className:"w-3 h-3"})," v",n.version," - Updated"]})]}),e.jsxs("div",{className:"space-y-3 mb-6 text-sm",children:[e.jsxs("div",{className:`flex justify-between p-2 rounded ${f.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Questions"}),e.jsxs("span",{className:"font-bold",children:["15 (random from ",n.questions.length,")"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${f.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Passing Score"}),e.jsxs("span",{className:"font-bold",children:[n.passingScore,"%"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${f.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Question Types"}),e.jsx("span",{className:"font-bold",children:"Single & Multiple Choice"})]}),k&&!q&&e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded border border-green-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Your Best"}),e.jsxs("span",{className:"font-bold text-green-500",children:[k.bestScore,"%"]})]}),k&&q&&e.jsxs("div",{className:"flex justify-between p-2 bg-amber-500/10 rounded border border-amber-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Previous Best"}),e.jsxs("span",{className:"font-bold text-amber-500",children:[k.bestScore,"% (expired)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[u&&localStorage.getItem(u)&&e.jsxs("button",{onClick:()=>T(!0),className:`w-full py-3 ${f.badge} text-white font-bold rounded hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg ${f.glow}`,children:[e.jsx(Re,{className:"w-5 h-5"})," Resume Test"]}),e.jsx("button",{onClick:()=>{u&&localStorage.getItem(u)&&H(),T(!1)},className:`w-full py-3 ${u&&localStorage.getItem(u)?"bg-muted text-foreground":`${f.badge} text-white shadow-lg ${f.glow}`} font-bold rounded hover:opacity-90 transition-all flex items-center justify-center gap-2`,children:q?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"})," Retake Test"]}):u&&localStorage.getItem(u)?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5"})," Start New Test"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5"})," Start Test"]})}),e.jsx("button",{onClick:()=>v(`/channel/${g}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm",children:"Back to Channel"})]})]})]})}),j==="in-progress"&&a&&e.jsxs("div",{className:"min-h-screen flex flex-col w-full overflow-x-hidden",children:[e.jsxs("header",{className:"border-b border-border p-2.5 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ge,className:"flex items-center gap-1 px-2 py-1 text-xs text-muted-foreground hover:text-foreground transition-colors",title:"Exit and save progress",children:[e.jsx(U,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Exit"})]}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[x+1,"/",p.length]}),e.jsx("div",{className:"h-1 w-20 bg-muted/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(x+1)/p.length*100}%`}})})]}),e.jsxs("button",{onClick:xe,className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-medium transition-all ${I?"bg-primary/20 text-primary border border-primary/30":"bg-muted/30 text-muted-foreground border border-transparent"}`,title:I?"Auto-advance ON":"Auto-advance OFF",children:[e.jsx(L,{className:`w-3 h-3 ${I?"text-primary":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Auto"})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[fe,"/",p.length]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto w-full overflow-x-hidden",children:e.jsx("div",{className:"max-w-2xl mx-auto w-full",children:e.jsx(X,{mode:"wait",children:e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${a.type==="multiple"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:a.type==="multiple"?"Select all that apply":"Single choice"}),a.type==="multiple"&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",(d[a.id]||[]).length," selected)"]}),e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${a.difficulty==="beginner"?"bg-green-500/20 text-green-400":a.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:a.difficulty}),a.questionId&&e.jsx(ve,{questionId:a.questionId,questionType:"test",size:"sm"}),a.questionId&&e.jsx(ee,{questionId:a.questionId,className:"ml-auto"})]}),e.jsx("h2",{className:"text-lg font-bold mb-6",children:E(a.question)}),e.jsx("div",{className:"space-y-2",children:a.options.map((s,r)=>{const o=(d[a.id]||[]).includes(s.id),i=N&&s.isCorrect,c=N==="incorrect"&&o&&!s.isCorrect,l=a.type==="multiple";return e.jsx("button",{onClick:()=>me(s.id),disabled:N!==null,className:`w-full p-4 text-left border rounded-lg transition-all ${i?"border-green-500 bg-green-500/20":c?"border-red-500 bg-red-500/20":o?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${N?"cursor-default":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`w-6 h-6 ${l?"rounded-md":"rounded-full"} border-2 flex items-center justify-center flex-shrink-0 ${i?"border-green-500 bg-green-500":c?"border-red-500 bg-red-500":o?"border-primary bg-primary":"border-muted-foreground/30"}`,children:[i&&e.jsx(z,{className:"w-4 h-4 text-white"}),c&&e.jsx(V,{className:"w-4 h-4 text-white"}),!N&&o&&e.jsx(z,{className:"w-4 h-4 text-primary-foreground"})]}),e.jsx("span",{className:"text-sm",children:E(s.text)})]})},s.id)})}),a.type==="multiple"&&!N&&e.jsx("p",{className:"mt-3 text-xs text-muted-foreground text-center",children:'Select all correct answers, then click "Confirm" to continue'})]},a.id)})})}),e.jsx("footer",{className:"border-t border-border p-2 w-full overflow-x-hidden",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between gap-2 w-full",children:[e.jsxs("button",{onClick:pe,disabled:x===0,className:"flex items-center gap-0.5 px-2 py-1 text-xs disabled:opacity-30 hover:text-primary transition-colors shrink-0",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Prev"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground shrink-0",children:[e.jsx("span",{className:"font-medium text-foreground",children:x+1}),e.jsx("span",{children:"/"}),e.jsx("span",{children:p.length}),e.jsxs("span",{className:"hidden sm:inline text-[10px]",children:["(",Object.keys(d).length," answered)"]})]}),x===p.length-1?a?.type==="multiple"?e.jsx("button",{onClick:()=>{const s=d[a.id]||[];if(s.length===0)return;const r=a.options.filter(l=>l.isCorrect).map(l=>l.id),o=r.every(l=>s.includes(l)),i=s.every(l=>r.includes(l));C(o&&i?"correct":"incorrect"),setTimeout(()=>{C(null),M()},800)},disabled:(d[a.id]||[]).length===0||N!==null,className:"px-2.5 py-1 bg-primary text-primary-foreground text-xs font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors shrink-0",children:"Submit"}):e.jsx("button",{onClick:M,className:"px-2.5 py-1 bg-primary text-primary-foreground text-xs font-bold rounded hover:bg-primary/90 transition-colors shrink-0",children:"Submit"}):a?.type==="multiple"?e.jsxs("button",{onClick:he,disabled:(d[a.id]||[]).length===0||N!==null,className:"flex items-center gap-0.5 px-2.5 py-1 text-xs bg-primary text-primary-foreground font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors shrink-0",children:[e.jsx("span",{className:"hidden sm:inline",children:"Confirm"}),e.jsx("span",{className:"sm:hidden",children:"OK"}),e.jsx(te,{className:"w-3.5 h-3.5"})]}):e.jsxs("button",{onClick:ue,className:"flex items-center gap-0.5 px-2 py-1 text-xs hover:text-primary transition-colors shrink-0",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(te,{className:"w-3.5 h-3.5"})]})]})})]}),j==="review"&&t&&e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background via-background to-muted/20 w-full overflow-x-hidden",children:[e.jsxs("header",{className:`border-b p-4 relative overflow-hidden ${t.passed?"border-green-500/30":"border-orange-500/30"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${t.passed?"from-green-500/10 via-emerald-500/5 to-teal-500/10":"from-orange-500/10 via-amber-500/5 to-yellow-500/10"}`}),e.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h.div,{initial:{scale:0},animate:{scale:1},className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${t.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:e.jsx(re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:"Review Answers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tap any question to expand details"})]})]}),e.jsx(h.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:`flex items-center gap-3 px-4 py-2 rounded-xl ${t.passed?"bg-green-500/20 border border-green-500/30":"bg-orange-500/20 border border-orange-500/30"}`,children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-2xl font-bold ${t.passed?"text-green-500":"text-orange-500"}`,children:[t.score,"%"]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[t.correct,"/",t.total," correct"]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border/50",children:[e.jsx("div",{className:"flex bg-muted/30 rounded-lg p-1 gap-1",children:["all","incorrect","correct"].map(s=>e.jsx("button",{onClick:()=>de(s),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${b===s?s==="correct"?"bg-green-500 text-white shadow-sm":s==="incorrect"?"bg-red-500 text-white shadow-sm":"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:s==="all"?`All (${t.total})`:s==="correct"?`âœ“ ${t.correct}`:`âœ— ${t.total-t.correct}`},s))}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>{const s=F(),r=s.map((o,i)=>i).filter(o=>{const i=s[o];return b==="correct"?i.isCorrect:b==="incorrect"?!i.isCorrect:!0});R.size===r.length?P(new Set):P(new Set(r))},className:"px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground border border-border rounded-lg transition-all hover:bg-muted/30",children:R.size>0?"Collapse All":"Expand All"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-2",children:[F().map((s,r)=>({item:s,idx:r})).filter(({item:s})=>b==="correct"?s.isCorrect:b==="incorrect"?!s.isCorrect:!0).map(({item:s,idx:r})=>{const o=R.has(r);return e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.02},className:`rounded-xl overflow-hidden border transition-all duration-300 ${s.isCorrect?"border-green-500/30 hover:border-green-500/50":"border-red-500/30 hover:border-red-500/50"} ${o?"shadow-lg":"shadow-sm hover:shadow-md"}`,children:[e.jsxs("button",{onClick:()=>{P(i=>{const c=new Set(i);return c.has(r)?c.delete(r):c.add(r),c})},className:`w-full px-4 py-3 flex items-center gap-3 transition-all ${s.isCorrect?"bg-gradient-to-r from-green-500/10 to-transparent hover:from-green-500/20":"bg-gradient-to-r from-red-500/10 to-transparent hover:from-red-500/20"}`,children:[e.jsx(h.div,{animate:{scale:o?1.1:1,rotate:o?360:0},transition:{type:"spring",stiffness:200},className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${s.isCorrect?"bg-green-500 shadow-lg shadow-green-500/30":"bg-red-500 shadow-lg shadow-red-500/30"}`,children:s.isCorrect?e.jsx(z,{className:"w-5 h-5 text-white"}):e.jsx(V,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsxs("span",{className:`text-sm font-bold ${s.isCorrect?"text-green-500":"text-red-500"}`,children:["Q",r+1]}),e.jsx("span",{className:`px-1.5 py-0.5 text-[9px] uppercase rounded-full font-medium ${s.question.difficulty==="beginner"?"bg-green-500/20 text-green-400":s.question.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:s.question.difficulty})]}),e.jsx("p",{className:`text-sm truncate ${o?"text-foreground":"text-muted-foreground"}`,children:s.question.question})]}),e.jsx(h.div,{animate:{rotate:o?180:0},transition:{duration:.2},className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${o?"bg-primary/20":"bg-muted/30"}`,children:e.jsx(Pe,{className:`w-5 h-5 ${o?"text-primary":"text-muted-foreground"}`})})]}),e.jsx(X,{children:o&&e.jsx(h.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-card border-t border-border/50",children:[e.jsx("p",{className:"font-medium mb-4 leading-relaxed",children:E(s.question.question)}),e.jsx("div",{className:"space-y-2",children:s.question.options.map((i,c)=>{const l=s.userAnswers.includes(i.id),w=i.isCorrect;return e.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.05},className:`flex items-start gap-3 p-3 rounded-lg border transition-all ${w?"bg-green-500/10 border-green-500/40":l?"bg-red-500/10 border-red-500/40":"bg-muted/10 border-border/50"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${w?"bg-green-500 text-white":l?"bg-red-500 text-white":"bg-muted/50 text-muted-foreground"}`,children:w?e.jsx(Ne,{className:"w-4 h-4"}):l?e.jsx(De,{className:"w-4 h-4"}):e.jsx("span",{className:"text-xs font-medium",children:String.fromCharCode(65+c)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:`text-sm ${w?"text-green-400 font-medium":l?"text-red-400":"text-muted-foreground"}`,children:E(i.text)})}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[w&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-[9px] uppercase rounded-full font-medium",children:"âœ“ Correct"}),l&&!w&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-[9px] uppercase rounded-full font-medium",children:"Your Pick"})]})]},i.id)})}),s.question.explanation&&e.jsx(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-4 p-3 rounded-lg border ${s.isCorrect?"bg-blue-500/10 border-blue-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(K,{className:`w-4 h-4 flex-shrink-0 mt-0.5 ${s.isCorrect?"text-blue-400":"text-amber-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold uppercase ${s.isCorrect?"text-blue-400":"text-amber-400"}`,children:s.isCorrect?"ðŸ’¡ Why this is correct":"ðŸ“š Learn from this"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.question.explanation})]})]})}),s.question.questionId&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("a",{href:`/channel/${n.channelId}?q=${s.question.questionId}`,className:"inline-flex items-center gap-1.5 text-xs text-primary hover:text-primary/80 transition-colors",children:[e.jsx(Qe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Study full question"})]}),e.jsx(ee,{questionId:s.question.questionId})]})]})})})]},s.question.id)}),F().filter(s=>b==="correct"?s.isCorrect:b==="incorrect"?!s.isCorrect:!0).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center ${b==="correct"?"bg-green-500/20":"bg-red-500/20"}`,children:b==="correct"?e.jsx(W,{className:"w-8 h-8 text-green-500"}):e.jsx(Z,{className:"w-8 h-8 text-red-500"})}),e.jsx("p",{className:"text-muted-foreground",children:b==="correct"?"No correct answers to show":"No incorrect answers - Perfect score! ðŸŽ‰"})]})]})}),e.jsx("footer",{className:`border-t p-4 bg-background/95 backdrop-blur ${t.passed?"border-green-500/30":"border-orange-500/30"}`,children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-3",children:[e.jsxs("button",{onClick:T,className:"flex-1 py-3 border border-border rounded-xl font-medium hover:bg-muted/50 transition-all flex items-center justify-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>y("completed"),className:`flex-1 py-3 font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg ${t.passed?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-green-500/30 hover:shadow-green-500/50":"bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-orange-500/30 hover:shadow-orange-500/50"}`,children:[e.jsx(W,{className:"w-4 h-4"})," View Results"]})]})})]}),j==="completed"&&t&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 w-full overflow-x-hidden",children:e.jsxs(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full border border-border bg-card rounded-lg p-6 relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.passed?"from-green-500/20 via-emerald-500/10 to-teal-500/20":"from-orange-500/20 via-amber-500/10 to-yellow-500/20"} opacity-50`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(h.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:`w-20 h-20 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-lg ${t.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:t.passed?e.jsx(W,{className:"w-10 h-10 text-white"}):e.jsx(Z,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold mb-1",children:t.passed?"ðŸŽ‰ Congratulations!":"Keep Practicing!"}),e.jsx("p",{className:"text-muted-foreground",children:t.passed?"You passed the test!":`You need ${n.passingScore}% to pass`})]}),e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted/20"}),e.jsx(h.circle,{cx:"64",cy:"64",r:"56",fill:"none",stroke:t.passed?"#22c55e":"#f97316",strokeWidth:"8",strokeLinecap:"round",initial:{strokeDasharray:"0 352"},animate:{strokeDasharray:`${t.score/100*352} 352`},transition:{duration:1,delay:.3}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs(h.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:`text-3xl font-bold ${t.passed?"text-green-500":"text-orange-500"}`,children:[t.score,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.correct,"/",t.total]})]})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correct Answers"}),e.jsx("span",{className:"font-bold text-green-500",children:t.correct})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Incorrect"}),e.jsx("span",{className:"font-bold text-red-500",children:t.total-t.correct})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("a",{href:qe(n.channelName,t.score,t.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${t.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(ae,{className:"w-4 h-4"})," Share on X"]}),e.jsxs("a",{href:Ae(n.channelName,t.score,t.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${t.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(ae,{className:"w-4 h-4"})," Share"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>y("review"),className:`w-full py-2 font-bold rounded transition-all flex items-center justify-center gap-2 ${t.passed?"bg-green-500 text-white hover:bg-green-600":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:[e.jsx(re,{className:"w-4 h-4"})," Review Answers"]}),e.jsxs("button",{onClick:T,className:`w-full py-2 border font-bold rounded transition-all flex items-center justify-center gap-2 ${t.passed?"border-green-500 text-green-500 hover:bg-green-500/10":"border-primary text-primary hover:bg-primary/10"}`,children:[e.jsx(ne,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>v(`/channel/${g}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Back to Channel"]})]})]})]})})]})})]})}export{ys as default};
