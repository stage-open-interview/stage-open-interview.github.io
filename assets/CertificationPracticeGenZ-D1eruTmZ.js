import{d as ve,r as n,j as e,m as k,t as Oe,Z as we,B as it,A as oe,u as ot,v as ct,b as dt,a2 as mt,y as xt,n as ut,f as pt,$ as Me,J as ht,l as gt,C as ft,X as bt,M as jt}from"./index-DOYVIj8F.js";import{a as yt,b as Nt,g as wt}from"./progressive-quiz-DdzigBkm.js";import{S as vt}from"./SEOHead-DotXq0Bw.js";import{Q as kt,u as Ct,C as St}from"./use-swipe-DJX28tQc.js";import{g as Tt,b as $t,c as It,r as Et,a as Mt,Q as Rt,S as Lt,G as At,Y as Qt,B as Dt}from"./spaced-repetition-mVePD3xw.js";import{S as Pt}from"./sparkles-D8ZWFGtq.js";import{C as ce}from"./check-OjZPvGv4.js";import{b as Bt,a as Wt,B as Ot,F as Ft,T as _t,C as zt,G as Vt}from"./tag-DX-SISCc.js";import{C as Ht}from"./clock-DZHo2Bkc.js";import{T as Re,B as Ut,u as Jt,a as Gt,C as Kt}from"./use-unified-toast-XNmZYGPi.js";import{bF as Fe}from"./EnhancedMermaid-Dk2Pl9Qt.js";import{M as Yt,r as Xt,h as Zt,v as qt}from"./index-CCKYwlAy.js";import{E as es}from"./external-link-BPOzLB9f.js";import{F as ts}from"./file-text-ZYCW6qq9.js";import{C as ss}from"./copy-BVs5uFOL.js";import{L as de}from"./lightbulb-D64Ew7pF.js";import{C as _e}from"./chevron-down-BNvOPSj4.js";import{P as rs}from"./play-BWLqVZYH.js";import{d as ns,l as as}from"./tests-DRPiStcq.js";import{L as Le}from"./lock-uj3sbR5v.js";import{C as ls}from"./circle-x-zHme40zU.js";import{C as is}from"./chevron-up-CEv7AtAc.js";import{T as os}from"./triangle-alert-CBgvTCzE.js";import"./history-CUOmsJJ2.js";import"./trash-2-Cb-NtAzV.js";import"./square-pen-DGpJ2NWk.js";import"./plus-BdH1WiVw.js";import"./settings-DVDfluEg.js";import"./user-DzrWyxRh.js";import"./bot-mLZzPlkX.js";import"./coffee-CvmcKLji.js";import"./message-circle-DM0g0SvS.js";import"./flag-DJaTJv0q.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ds=ve("hash",cs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Ae=ve("lock-open",ms);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Qe=ve("skip-forward",xs);function us(s){return s?s.split(/`([^`]+)`/g).map((h,l)=>l%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:h},l):h):null}function ps({difficulty:s}){const r="hidden sm:block absolute bottom-8 right-8 w-32 h-32 lg:w-40 lg:h-40 opacity-[0.06] pointer-events-none select-none z-0";return s==="beginner"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("circle",{cx:"40",cy:"42",r:"5"}),e.jsx("circle",{cx:"60",cy:"42",r:"5"}),e.jsx("path",{d:"M38 52 Q50 62 62 52",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"5",r:"4"}),e.jsx("rect",{x:"18",y:"38",width:"6",height:"14",rx:"2"}),e.jsx("rect",{x:"76",y:"38",width:"6",height:"14",rx:"2"})]}):s==="intermediate"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("rect",{x:"35",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("rect",{x:"55",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("line",{x1:"40",y1:"55",x2:"60",y2:"55",strokeWidth:"3",stroke:"currentColor"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("polygon",{points:"50,2 46,8 54,8"}),e.jsx("circle",{cx:"82",cy:"50",r:"8",strokeWidth:"2",stroke:"currentColor",fill:"none"}),e.jsx("circle",{cx:"82",cy:"50",r:"3"})]}):e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("ellipse",{cx:"40",cy:"42",rx:"6",ry:"7"}),e.jsx("ellipse",{cx:"60",cy:"42",rx:"6",ry:"7"}),e.jsx("circle",{cx:"42",cy:"41",r:"2",fill:"white"}),e.jsx("circle",{cx:"62",cy:"41",r:"2",fill:"white"}),e.jsx("path",{d:"M38 56 Q50 52 62 56",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("ellipse",{cx:"78",cy:"35",rx:"3",ry:"5"}),e.jsx("ellipse",{cx:"82",cy:"45",rx:"2",ry:"4"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"5",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"3",r:"3"}),e.jsx("polygon",{points:"85,20 80,30 84,30 79,42 88,28 84,28"})]})}function De({question:s,questionNumber:r,totalQuestions:h,isMarked:l,isCompleted:o,onToggleMark:c,onTapQuestion:m,timerEnabled:g,timeLeft:u}){const[x,y]=n.useState(null),[d,j]=n.useState(!1),[a,N]=n.useState(!1);n.useEffect(()=>{if(s?.id){const b=Tt(s.id,s.channel,s.difficulty);y($=>$?.questionId===b.questionId&&$?.totalReviews===b.totalReviews?$:b),j(!1),N(b.totalReviews>0)}},[s?.id,s?.channel,s?.difficulty]);const T=b=>{if(!s)return;const $=Et(s.id,s.channel,s.difficulty,b);y($),j(!0),N(!1)},C=()=>{if(!s)return;const b=Mt(s.id,s.channel,s.difficulty);y(b),N(!0)},E=(()=>{switch(s.difficulty){case"beginner":return{icon:we,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/20",label:"Easy"};case"intermediate":return{icon:Re,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/20",label:"Medium"};case"advanced":return{icon:Ft,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",label:"Hard"};default:return{icon:Re,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",label:"Unknown"}}})(),me=E.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-y-auto relative","data-testid":"question-panel",children:[e.jsx(ps,{difficulty:s.difficulty}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-muted/50 border border-border rounded-md",children:[e.jsx(ds,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:s.id})]}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted rounded-md",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[r,e.jsx("span",{className:"text-muted-foreground/50",children:"/"}),h]})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md ${E.bg} border ${E.border}`,children:[e.jsx(me,{className:`w-3 h-3 ${E.color}`}),e.jsx("span",{className:`text-xs font-medium ${E.color}`,children:E.label})]}),s.isNew&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-md",children:[e.jsx(Pt,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"text-xs font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"NEW"})]}),o&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/10 border border-green-500/20 rounded-md",children:[e.jsx(ce,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Done"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(kt,{questionId:s.id,questionType:"question",size:"sm"}),e.jsx("button",{onClick:c,className:`p-1.5 rounded-md transition-colors ${l?"bg-primary/10 text-primary border border-primary/20":"bg-muted text-muted-foreground hover:text-primary"}`,children:e.jsx(Bt,{className:`w-4 h-4 ${l?"fill-current":""}`})})]})]}),e.jsxs("div",{className:`flex-1 flex flex-col justify-center max-w-2xl w-full ${m?"cursor-pointer lg:cursor-default":""}`,onClick:m,children:[s.companies&&s.companies.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[e.jsx(Wt,{className:"w-3.5 h-3.5 text-muted-foreground"}),s.companies.map((b,$)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 text-xs font-medium rounded-full",children:b},$))]}),e.jsx(k.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`font-bold text-foreground leading-tight ${s.question.length>200?"text-sm sm:text-base lg:text-lg":s.question.length>100?"text-base sm:text-lg lg:text-xl":"text-lg sm:text-xl lg:text-2xl"}`,children:us(s.question)}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground uppercase tracking-wider font-medium",children:s.subChannel})}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.tags.slice(0,5).map(b=>e.jsx("span",{className:"px-1.5 py-0.5 bg-muted text-[9px] sm:text-[10px] font-mono text-muted-foreground rounded border border-border",children:Oe(b)},b)),s.tags.length>5&&e.jsxs("span",{className:"text-[9px] text-muted-foreground py-0.5",children:["+",s.tags.length-5]})]}),g&&u>0&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-2 bg-primary/5 border border-primary/20 rounded-lg self-start",children:[e.jsx(Ht,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-lg font-mono font-bold text-primary tabular-nums",children:[String(Math.floor(u/60)).padStart(2,"0"),":",String(u%60).padStart(2,"0")]})]})]}),e.jsx("div",{className:"mt-auto pt-3 flex justify-start mb-12 sm:mb-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-500/5 border border-purple-500/20 rounded-lg px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ot,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-purple-500",children:"SRS"}),x&&e.jsx("span",{className:`text-[9px] px-1 py-0.5 rounded ${It(x.masteryLevel)} bg-muted/50`,children:$t(x.masteryLevel)})]}),d?e.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:"âœ“"}):a&&x?e.jsx("div",{className:"flex items-center gap-0.5",children:[{rating:"again",label:"ðŸ˜•",color:"bg-red-500/10 text-red-500 hover:bg-red-500/20"},{rating:"hard",label:"ðŸ¤”",color:"bg-orange-500/10 text-orange-500 hover:bg-orange-500/20"},{rating:"good",label:"ðŸ‘",color:"bg-green-500/10 text-green-500 hover:bg-green-500/20"},{rating:"easy",label:"ðŸŽ¯",color:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20"}].map(b=>e.jsx("button",{onClick:$=>{$.stopPropagation(),T(b.rating)},className:`w-6 h-6 flex items-center justify-center rounded text-xs transition-colors ${b.color}`,children:b.label},b.rating))}):e.jsx("button",{onClick:b=>{b.stopPropagation(),C()},className:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded hover:bg-purple-600",children:"+Add"})]})}),e.jsx("div",{className:"mt-3 text-center hidden sm:block",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[9px] font-mono",children:"â†’"})," to reveal answer"]})})]})}function hs(s){if(!s)return"";let r=s;r=r.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),r=r.replace(/\*\*\s*```/g,"**\n\n```"),r=r.replace(/```\s*\*\*/g,"```\n\n**"),r=r.replace(/```(\w*)\n([\s\S]*?)```/g,(o,c,m)=>{const g=m.replace(/\*\*/g,"");return"```"+c+`
`+g+"```"}),r=r.replace(/([^\n`])(\s*```)/g,"$1\n```"),r=r.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),r=r.replace(/:\s*```/g,":\n\n```"),r=r.replace(/^\*\*\s*$/gm,""),r=r.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(\d+\.\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(-\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*-\s+/g,`**
- `),r=r.replace(/\*\*(\d+)\.\s+/g,`**
$1. `),r=r.replace(/\*\*-\s*\*\*([^*]+)\*\*/g,`**
- **$1**`),r=r.replace(/\*\*-\s*\*\*([^*\n]+)/g,`**
- **$1**`),r=r.replace(/-\s*\*\*([^*]+)\*\*-\s+/g,`- **$1**
- `);const h=r.split(`
`),l=[];for(let o=0;o<h.length;o++){let c=h[o];const m=(c.match(/\*\*/g)||[]).length;m%2===1&&(c.trim().startsWith("**")&&m===1?c=c.replace(/^\s*\*\*\s*/,""):c.trim().endsWith("**")&&m===1&&(c=c.replace(/\s*\*\*\s*$/,""))),l.push(c)}return r=l.join(`
`),r=r.replace(/^[â€¢Â·]\s*/gm,"- "),(r.includes("â€¢")||r.includes("Â·"))&&(r=r.split(`
`).map(m=>{const g=(m.match(/[â€¢Â·]/g)||[]).length;if(g>1||g===1&&!m.trim().startsWith("â€¢")&&!m.trim().startsWith("Â·")){const u=m.split(/[â€¢Â·]/).map(x=>x.trim()).filter(x=>x);if(u.length>1)return u.map(x=>`- ${x}`).join(`
`)}return m.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),r=r.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),r=r.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),r=r.replace(/\n{3,}/g,`

`),r=r.replace(/^\n+/,""),r}function Pe(s){if(!s||typeof s!="string")return!1;const r=s.trim();if(!r||r.length<10)return!1;const h=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],l=r.split(`
`)[0].toLowerCase().trim();if(!h.some(g=>l.startsWith(g.toLowerCase())))return!1;const c=r.split(`
`).filter(g=>{const u=g.trim().toLowerCase();return u&&!u.startsWith("%%")&&!h.some(x=>u.startsWith(x.toLowerCase()))});if(c.length<3)return!1;const m=r.toLowerCase();return!(m.includes("start")&&m.includes("end")&&c.length<=3||m.match(/\bstart\b/g)?.length===1&&m.match(/\bend\b/g)?.length===1&&c.length<=2)}function Be(s){return s?s.split(/`([^`]+)`/g).map((h,l)=>l%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-cyan-500/20 text-cyan-300 rounded text-[0.9em] font-mono",children:h},l):h):null}function gs({title:s,icon:r,children:h,defaultExpanded:l=!0,variant:o="default",badge:c}){const[m,g]=n.useState(l),u=typeof window<"u"&&window.innerWidth<640,x={default:"bg-card border-border",highlight:"bg-primary/5 border-primary/20",success:"bg-green-500/5 border-green-500/20",purple:"bg-purple-500/5 border-purple-500/20"},y={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs("div",{className:`rounded-lg border overflow-hidden ${x[o]}`,children:[e.jsxs("button",{onClick:()=>g(!m),className:"w-full flex items-center justify-between px-2.5 py-1.5 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:y[o],children:r}),e.jsx("span",{className:"font-medium text-xs",children:s}),c&&e.jsx("span",{className:"px-1 py-0.5 bg-primary/10 text-primary text-[8px] font-medium rounded",children:c})]}),e.jsx(_e,{className:`w-3.5 h-3.5 text-muted-foreground transition-transform ${m?"":"-rotate-90"}`})]}),u?m&&e.jsx("div",{className:"px-2.5 pb-2",children:h}):e.jsx(oe,{initial:!1,children:m&&e.jsx(k.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-2.5 pb-2",children:h})})})]})}function fs({code:s,language:r}){const[h,l]=n.useState(!1),o=async()=>{await navigator.clipboard.writeText(s),l(!0),setTimeout(()=>l(!1),2e3)};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden border border-border bg-[#1e1e1e]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-1.5 sm:py-2 bg-muted/50 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary"}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:r||"code"})]}),e.jsx("button",{onClick:o,className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-0.5 sm:py-1 text-[10px] sm:text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-green-500",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(Zt,{language:r||"text",style:qt,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLines:!0,wrapLongLines:!0,className:"!text-xs sm:!text-sm !p-3 sm:!p-4",children:s})]})}function bs({question:s,hasTldr:r,hasDiagram:h,hasEli5:l,hasVideo:o}){const[c,m]=n.useState(null),g=h&&c!==!1,u=[];r&&u.push("tldr"),g&&u.push("diagram"),l&&u.push("eli5"),o&&u.push("video");const[x,y]=n.useState(()=>r?"tldr":l?"eli5":o?"video":"diagram");n.useEffect(()=>{c===!1&&x==="diagram"&&(r?y("tldr"):l?y("eli5"):o&&y("video"))},[c,x,r,l,o]);const d=n.useCallback(a=>{m(a)},[]);if(u.length===0&&c===!1)return null;if(u.length===0&&!r&&!l&&!o&&c===null)return e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-border bg-card p-4 text-center text-muted-foreground text-sm",children:"Loading..."});if(u.length===0)return null;const j={tldr:{label:"TL;DR",icon:e.jsx(de,{className:"w-3.5 h-3.5"}),color:"text-cyan-400"},diagram:{label:"Diagram",icon:e.jsx(Vt,{className:"w-3.5 h-3.5"}),color:"text-purple-400"},eli5:{label:"ELI5",icon:e.jsx(Dt,{className:"w-3.5 h-3.5"}),color:"text-green-400"},video:{label:"Video",icon:e.jsx(rs,{className:"w-3.5 h-3.5"}),color:"text-pink-400"}};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl border border-white/10 bg-black/40 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-white/10 bg-black/20",children:u.map(a=>e.jsxs("button",{onClick:()=>y(a),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs sm:text-sm font-medium transition-all relative ${x===a?`${j[a].color} bg-white/5`:"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:[e.jsx("span",{className:x===a?j[a].color:"",children:j[a].icon}),e.jsx("span",{children:j[a].label}),x===a&&e.jsx(k.div,{layoutId:"activeTabIndicator",className:`absolute bottom-0 left-0 right-0 h-0.5 ${a==="tldr"?"bg-cyan-400":a==="diagram"?"bg-purple-400":a==="eli5"?"bg-green-400":"bg-pink-400"}`})]},a))}),e.jsx("div",{className:"p-2 sm:p-3",children:e.jsxs(oe,{mode:"wait",children:[x==="tldr"&&r&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-cyan-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:Be(s.answer)})]},"tldr"),x==="diagram"&&h&&e.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(Fe,{chart:s.diagram,onRenderResult:d})},"diagram"),x==="eli5"&&l&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-base flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:Be(s.eli5||"")})]},"eli5"),x==="video"&&o&&e.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(Qt,{shortVideo:s.videos?.shortVideo,longVideo:s.videos?.longVideo})},"video")]})})]})}function We({question:s}){const r=n.useRef(null),h=typeof window<"u"&&window.innerWidth<640,[l,o]=n.useState(null);n.useEffect(()=>{it.getByQuestionId(s.id).then(o)},[s.id]);const c=!!s.answer,m=!h&&Pe(s.diagram),g=!!s.eli5,u=!!(s.videos?.shortVideo||s.videos?.longVideo),x=c||m||g||u,y=n.useCallback(d=>{const j=hs(d);return e.jsx(Yt,{remarkPlugins:[Xt],components:{code({className:a,children:N}){const T=/language-(\w+)/.exec(a||""),C=T?T[1]:"",B=String(N).replace(/\n$/,"");return!T&&!String(N).includes(`
`)?e.jsx("code",{className:"px-1 py-0.5 bg-primary/10 text-primary rounded text-[0.85em] font-mono",children:N}):C==="mermaid"?Pe(B)?e.jsx("div",{className:"my-3",children:e.jsx(Fe,{chart:B})}):null:e.jsx("div",{className:"my-2",children:e.jsx(fs,{code:B,language:C})})},p({children:a}){return e.jsx("p",{className:"mb-2 leading-relaxed text-foreground/90 text-sm",children:a})},h1({children:a}){return e.jsx("h1",{className:"text-base font-bold mb-2 mt-4 text-foreground border-b border-border pb-1",children:a})},h2({children:a}){return e.jsx("h2",{className:"text-sm font-bold mb-2 mt-3 text-foreground",children:a})},h3({children:a}){return e.jsx("h3",{className:"text-sm font-semibold mb-1.5 mt-2 text-foreground/90",children:a})},strong({children:a}){return e.jsx("strong",{className:"font-semibold text-foreground",children:a})},ul({children:a}){return e.jsx("ul",{className:"space-y-1 mb-2 ml-1",children:a})},ol({children:a}){return e.jsx("ol",{className:"space-y-1 mb-2 ml-1 [counter-reset:list-counter]",children:a})},li({children:a,node:N}){const C=N?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-2 text-foreground/90 text-sm [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-0.5",children:C?e.jsx("span",{className:"text-xs font-medium before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:a})]})},a({href:a,children:N}){return e.jsx("a",{href:a,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:N})},blockquote({children:a}){return e.jsx("blockquote",{className:"border-l-2 border-primary/50 pl-3 py-1 my-2 bg-primary/5 text-muted-foreground italic text-sm",children:a})},table({children:a}){return e.jsx("div",{className:"my-2 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-sm",children:a})})},th({children:a}){return e.jsx("th",{className:"px-2 py-1.5 text-left font-semibold bg-muted border border-border text-xs",children:a})},td({children:a}){return e.jsx("td",{className:"px-2 py-1.5 border border-border text-sm",children:a})}},children:j})},[]);return e.jsx(k.div,{ref:r,initial:h?!1:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-background",children:e.jsxs("div",{className:"w-full px-3 sm:px-4 lg:px-6 py-2 sm:py-3 pb-16 space-y-1.5",children:[x&&e.jsx(bs,{question:s,hasTldr:c,hasDiagram:m,hasEli5:g,hasVideo:u}),e.jsx(gs,{title:"Full Explanation",icon:e.jsx(Ut,{className:"w-3.5 h-3.5"}),defaultExpanded:!0,badge:s.explanation?`${Math.ceil(s.explanation.split(" ").length/200)} min`:void 0,children:e.jsx("div",{className:"prose prose-sm max-w-none",children:y(s.explanation)})}),e.jsxs("div",{className:"flex items-start justify-between gap-1.5 pt-0.5",children:[e.jsx("div",{className:"flex items-start gap-1.5 flex-1 min-w-0",children:s.tags&&s.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(_t,{className:"w-2.5 h-2.5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-0.5",children:s.tags.map(d=>e.jsx("span",{className:"px-1 py-0.5 bg-muted text-[8px] font-mono text-muted-foreground rounded border border-border",children:Oe(d)},d))})]})}),e.jsx(Rt,{questionId:s.id})]}),(s.sourceUrl||l)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[s.sourceUrl&&e.jsxs("a",{href:s.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-muted hover:bg-muted/80 border border-border rounded-md text-[10px]",children:[e.jsx(es,{className:"w-2.5 h-2.5 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Source"})]}),l&&e.jsxs("a",{href:`https://openstackdaily.github.io${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-cyan-500/10 hover:bg-cyan-500/20 border border-cyan-500/30 rounded-md text-[10px]",children:[e.jsx(ts,{className:"w-2.5 h-2.5 text-cyan-400"}),e.jsx("span",{className:"text-cyan-400",children:"Blog"})]})]}),e.jsx(Lt,{questionId:s.id,currentChannel:s.channel}),e.jsx(At,{questionId:s.id})]})})}const P=50,ie=5,js=3,ys=800;function tr(){const[s,r]=ot(),[,h]=ct("/certification/:id/:questionIndex?"),l=h?.id,o=l?yt(l):null;o&&Nt(o.id);const[c,m]=n.useState([]),[g,u]=n.useState(!0),[x,y]=n.useState(null),[d,j]=n.useState(0),[a,N]=n.useState("all"),[T,C]=n.useState("question"),[B,E]=n.useState(!1),[me,b]=n.useState(new Set),[$,ze]=n.useState(!1),[Y,Ve]=n.useState([]),[W,xe]=n.useState(!1),[I,ke]=n.useState([]),[z,ue]=n.useState(0),[H,pe]=n.useState([]),[V,X]=n.useState(!1),[he,Z]=n.useState(null),[O,ge]=n.useState(!1),[He,U]=n.useState(!1),[A,q]=n.useState(new Set),[Ue,fe]=n.useState(new Set),{toast:Q}=Jt(),{onQuestionSwipe:Ce,onQuestionView:Je,balance:be,formatCredits:Se,refreshBalance:Te}=dt(),je=`cert-progress-${l}`,ee=`cert-checkpoints-${l}`,te=`cert-session-${l}`,[D,Ge]=n.useState(()=>{try{const t=localStorage.getItem(je);return new Set(t?JSON.parse(t):[])}catch{return new Set}}),se=n.useCallback(()=>{if(!l||c.length===0)return;const t={certificationId:l,certificationName:o?.name,questions:c,currentIndex:d,completedIds:Array.from(D),passedCheckpoints:Array.from(A),selectedDifficulty:a,lastAccessedAt:new Date().toISOString()};localStorage.setItem(te,JSON.stringify(t))},[l,o,c,d,D,A,a,te]);n.useEffect(()=>{if(l)try{const t=localStorage.getItem(te);if(t){const i=JSON.parse(t);i.currentIndex!==void 0&&j(i.currentIndex)}}catch(t){console.error("Failed to load session:",t)}},[l,te]),n.useEffect(()=>{c.length>0&&se()},[d,D,A,se,c.length]);const Ke=n.useCallback(()=>{se(),r(`/certification/${l}`)},[se,l,r]);n.useEffect(()=>{try{const t=localStorage.getItem(ee);t&&q(new Set(JSON.parse(t)))}catch{}},[ee]),n.useEffect(()=>{l&&localStorage.setItem(je,JSON.stringify(Array.from(D)))},[D,l,je]),n.useEffect(()=>{l&&localStorage.setItem(ee,JSON.stringify(Array.from(A)))},[A,l,ee]),n.useEffect(()=>{if(!o)return;(async()=>{u(!0),y(null);try{const i=[],p=[];for(const S of o.channelMappings)try{let le=(await gt.getData(S.channelId)).questions;p.push(S.channelId),S.subChannels&&S.subChannels.length>0&&(le=le.filter(lt=>S.subChannels.includes(lt.subChannel)));const at=Math.ceil(le.length*(S.weight/100));i.push(...le.slice(0,at))}catch{}const w=await as();Ve(w.filter(S=>p.includes(S.channelId)));const R=Array.from(new Map(i.map(S=>[S.id,S])).values()),L=sessionStorage.getItem(`cert-seed-${l}`)||Date.now().toString();sessionStorage.setItem(`cert-seed-${l}`,L);const K=wt(R,R.length);m(K)}catch{y("Failed to load certification questions")}finally{u(!1)}})()},[o,l]);const $e=n.useMemo(()=>a==="all"?c:c.filter(t=>t.difficulty===a),[c,a]),f=$e[d],v=$e.length,J=n.useCallback(t=>t>0&&t%ie===0,[]),G=n.useCallback(t=>A.has(t),[A]),re=n.useCallback(()=>{if(Y.length===0)return[];const t=Y[Math.floor(Math.random()*Y.length)];return ns(t,js)},[Y]),ne=n.useCallback(()=>{const t=re();t.length>0?(ke(t),ue(0),pe([]),X(!1),Z(null),ge(!1),fe(new Set),xe(!0)):(q(i=>new Set(Array.from(i).concat(d))),Q({title:"Checkpoint passed!"}))},[re,d,Q]),Ye=n.useCallback(t=>{if(V)return;const i=I[z],p=i.options.find(L=>L.isCorrect),w=t===p?.id,R={questionId:i.id,selectedOptionId:t,isCorrect:w,correctOptionId:p?.id||""};pe(L=>[...L,R]),Z(R),X(!0),setTimeout(()=>{X(!1),Z(null),z<I.length-1?ue(L=>L+1):ge(!0)},ys)},[V,I,z]),M=n.useMemo(()=>{const t=H.filter(i=>i.isCorrect).length;return{correct:t,total:I.length,passed:t===I.length}},[H,I.length]),Xe=n.useCallback(()=>{const t=re();ke(t),ue(0),pe([]),X(!1),Z(null),ge(!1),fe(new Set)},[re]),Ze=n.useCallback(()=>{mt(P,"Skipped checkpoint test").success?(q(i=>new Set(Array.from(i).concat(d))),xe(!1),U(!1),Te(),Q({title:"Test Skipped",description:`-${P} credits`})):Q({title:"Insufficient Credits",description:`Need ${P} credits`})},[d,Te,Q]),qe=n.useCallback(()=>{M.passed&&q(t=>new Set(Array.from(t).concat(d))),xe(!1)},[M.passed,d]),et=t=>{fe(i=>{const p=new Set(i);return p.has(t)?p.delete(t):p.add(t),p})},ae=n.useCallback(()=>{if(d<v-1){const t=d+1;if(J(t)&&!G(t)){j(t),ne();return}j(t),C("question"),Ce?.()}},[d,v,J,G,ne,Ce]),ye=()=>{d>0&&(j(d-1),C("question"))},tt=()=>{f&&(Ge(t=>new Set(Array.from(t).concat(f.id))),Je?.())},Ie=()=>{f&&b(t=>{const i=new Set(t);return i.has(f.id)?i.delete(f.id):i.add(f.id),i})},Ne=Ct({onSwipeLeft:ae,onSwipeRight:ye});if(n.useEffect(()=>{const t=i=>{W||((i.key==="ArrowRight"||i.key==="j")&&ae(),(i.key==="ArrowLeft"||i.key==="k")&&ye())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[W,ae]),n.useEffect(()=>{f&&!W&&xt(f.id,f.channel,f.difficulty)},[f,W]),n.useEffect(()=>{J(d)&&!G(d)&&!W&&!g&&ne()},[d,J,G,W,g,ne]),n.useEffect(()=>{!g&&o&&c.length===0&&!x&&(Q({title:"Content coming soon!",description:`We're preparing questions for "${o.name}". Check back soon!`,variant:"warning"}),ze(!0))},[g,o,c.length,x]),n.useEffect(()=>{if(!o&&l){Q({title:"Certification not found",description:"Redirecting to home page...",variant:"warning"});const t=setTimeout(()=>{r("/")},1500);return()=>clearTimeout(t)}},[o,l,Q,r]),!o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ut,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/30"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Certification not found"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Redirecting to home..."})]})});const st=v>0?Math.round(D.size/v*100):0,F=f?D.has(f.id):!1,Ee=f?me.has(f.id):!1,_=I[z],rt=()=>W?e.jsx("div",{className:"fixed inset-0 z-50 bg-background/90 backdrop-blur-md flex items-center justify-center p-4",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-muted/50 border border-border rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-border bg-gradient-to-r from-amber-500/10 via-primary/10 to-amber-500/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${O?M.passed?"bg-green-500/20":"bg-red-500/20":"bg-amber-500/20"}`,children:O?M.passed?e.jsx(Ae,{className:"w-5 h-5 text-green-500"}):e.jsx(Le,{className:"w-5 h-5 text-red-500"}):e.jsx(we,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:O?M.passed?"ðŸŽ‰ Passed!":"âŒ Failed":"Checkpoint Test"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O?`${M.correct}/${M.total} correct`:`Q${z+1}/${I.length} â€¢ Tap answer to submit`})]})]}),!O&&e.jsx("div",{className:"flex items-center gap-1",children:I.map((t,i)=>e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${i<H.length?H[i]?.isCorrect?"bg-green-500":"bg-red-500":i===z?"bg-gradient-to-r from-primary to-cyan-500":"bg-muted"}`},i))})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:O?e.jsxs("div",{className:"space-y-3",children:[!M.passed&&e.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-sm",children:[e.jsx("span",{className:"font-medium text-red-500",children:"Need 100% to proceed."}),e.jsx("span",{className:"text-muted-foreground ml-1",children:"Review below, then retry or skip."})]}),I.map((t,i)=>{const p=H[i],w=Ue.has(i),R=t.options.find(K=>K.isCorrect),L=t.options.find(K=>K.id===p?.selectedOptionId);return e.jsxs("div",{className:`border rounded-xl overflow-hidden ${p?.isCorrect?"border-green-500/30":"border-red-500/30"}`,children:[e.jsxs("button",{onClick:()=>et(i),className:"w-full p-3 flex items-center gap-3 text-left hover:bg-muted/30",children:[p?.isCorrect?e.jsx(ft,{className:"w-5 h-5 text-green-500 flex-shrink-0"}):e.jsx(ls,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm line-clamp-1",children:t.question}),w?e.jsx(is,{className:"w-4 h-4"}):e.jsx(_e,{className:"w-4 h-4"})]}),e.jsx(oe,{children:w&&e.jsx(k.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden border-t border-border/50",children:e.jsxs("div",{className:"p-3 space-y-2 text-sm",children:[e.jsxs("div",{className:`p-2 rounded ${p?.isCorrect?"bg-green-500/10":"bg-red-500/10"}`,children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Your answer: "}),e.jsx("span",{className:p?.isCorrect?"text-green-500":"text-red-500",children:L?.text})]}),!p?.isCorrect&&e.jsxs("div",{className:"p-2 rounded bg-green-500/10",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Correct: "}),e.jsx("span",{className:"text-green-500",children:R?.text})]}),t.explanation&&e.jsxs("div",{className:"p-2 rounded bg-blue-500/10 flex gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-muted-foreground",children:t.explanation})]})]})})})]},t.id)})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${_?.difficulty==="beginner"?"bg-green-500/10 text-green-500":_?.difficulty==="intermediate"?"bg-yellow-500/10 text-yellow-500":"bg-red-500/10 text-red-500"}`,children:_?.difficulty})}),e.jsx("h4",{className:"font-medium mb-5",children:_?.question}),e.jsx("div",{className:"space-y-2",children:_?.options.map(t=>{const i=he?.selectedOptionId===t.id,p=t.isCorrect,w=V&&(i||p);return e.jsx("button",{onClick:()=>Ye(t.id),disabled:V,className:`w-full p-4 text-left border-2 rounded-xl transition-all ${w?p?"border-green-500 bg-green-500/10":i?"border-red-500 bg-red-500/10":"border-border":"border-border hover:border-primary/50 hover:bg-muted/30"} ${V?"cursor-default":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${w&&p?"border-green-500 bg-green-500":w&&i&&!p?"border-red-500 bg-red-500":"border-muted-foreground/30"}`,children:[w&&p&&e.jsx(ce,{className:"w-3 h-3 text-foreground"}),w&&i&&!p&&e.jsx(bt,{className:"w-3 h-3 text-foreground"})]}),e.jsx("span",{className:"text-sm",children:t.text})]})},t.id)})}),V&&he&&!he.isCorrect&&_?.explanation&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm flex gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-muted-foreground",children:_.explanation})]})]})}),e.jsx("div",{className:"p-4 border-t border-border bg-muted/30",children:O?e.jsx("div",{className:"flex gap-3",children:M.passed?e.jsxs("button",{onClick:qe,className:"flex-1 py-3 bg-green-500 text-foreground rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"})," Continue"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Xe,className:"flex-1 py-3 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(jt,{className:"w-4 h-4"})," Retry"]}),e.jsxs("button",{onClick:()=>U(!0),className:"flex-1 py-3 bg-muted rounded-xl font-medium flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(Qe,{className:"w-4 h-4"})," Skip (-",P,")"]})]})}):e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-1 hover:text-foreground",children:[e.jsx(Qe,{className:"w-4 h-4"})," Skip (-",P,")"]}),e.jsx("span",{children:"Tap an answer to submit"})]})})]})}):null,nt=()=>e.jsx(oe,{children:He&&e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-background/80 flex items-center justify-center p-4",onClick:()=>U(!1),children:e.jsx(k.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-muted/50 border border-border rounded-2xl w-full max-w-sm p-5",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx(os,{className:"w-12 h-12 mx-auto mb-3 text-amber-500"}),e.jsx("h3",{className:"font-bold mb-2",children:"Skip Test?"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Cost: ",e.jsxs("span",{className:"text-red-500 font-bold",children:[P," credits"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 p-2 bg-muted/50 rounded-lg text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-amber-500"}),e.jsxs("span",{children:["Balance: ",e.jsx("b",{children:Se(be)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-2.5 bg-muted rounded-xl font-medium",children:"Cancel"}),e.jsx("button",{onClick:Ze,disabled:be<P,className:"flex-1 py-2.5 bg-red-500 text-foreground rounded-xl font-medium disabled:opacity-50",children:"Skip"})]})]})})})});return e.jsxs(e.Fragment,{children:[e.jsx(vt,{title:`${o.name} Practice`,description:o.description}),e.jsx(rt,{}),e.jsx(nt,{}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur border-b border-border",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Ke,className:"p-1.5 hover:bg-muted rounded-md shrink-0",title:"Exit and save progress",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"font-semibold text-sm leading-tight",children:o.name}),e.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:o.provider})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground tabular-nums",children:["Q",d+1,"/",v]}),e.jsxs("div",{className:"relative flex-1 h-1.5 bg-muted rounded-full overflow-hidden max-w-[200px]",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-cyan-500 rounded-full transition-all",style:{width:`${(d+1)/v*100}%`}}),Array.from({length:Math.floor(v/ie)}).map((t,i)=>{const p=(i+1)*ie,w=p/v*100,R=A.has(p);return e.jsx("div",{className:`absolute top-1/2 w-1.5 h-1.5 rounded-full ${R?"bg-green-500":"bg-amber-500"}`,style:{left:`${w}%`,transform:"translate(-50%, -50%)"}},i)})]}),e.jsxs("span",{className:"text-[10px] text-primary font-medium tabular-nums",children:[st,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[["all","beginner","intermediate","advanced"].map(t=>e.jsx("button",{onClick:()=>{N(t),j(0)},className:`px-2 py-0.5 text-[10px] rounded-md capitalize hidden sm:block ${a===t?t==="beginner"?"bg-green-500/20 text-green-500":t==="intermediate"?"bg-yellow-500/20 text-yellow-500":t==="advanced"?"bg-red-500/20 text-red-500":"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"}`,children:t==="all"?"All":t==="beginner"?"Easy":t==="intermediate"?"Med":"Hard"},t)),e.jsxs("div",{className:"flex items-center gap-0.5 px-1.5 py-0.5 bg-amber-500/10 border border-amber-500/20 rounded-md ml-1",children:[e.jsx(Me,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-[10px] font-bold text-amber-500 tabular-nums",children:Se(be)})]}),e.jsx("button",{onClick:()=>E(!B),className:"p-1 hover:bg-muted rounded-md",children:e.jsx(ht,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{className:"flex items-center gap-1 mt-1.5 sm:hidden overflow-x-auto no-scrollbar",children:["all","beginner","intermediate","advanced"].map(t=>e.jsx("button",{onClick:()=>{N(t),j(0)},className:`px-2 py-0.5 text-[10px] rounded-md capitalize shrink-0 ${a===t?t==="beginner"?"bg-green-500/20 text-green-500":t==="intermediate"?"bg-yellow-500/20 text-yellow-500":t==="advanced"?"bg-red-500/20 text-red-500":"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground":"bg-muted/50 text-muted-foreground"}`,children:t==="all"?"All":t==="beginner"?"Easy":t==="intermediate"?"Medium":"Hard"},t))})]})}),B&&e.jsx("div",{className:"bg-muted/30 border-b border-border px-3 py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Level:"})," ",e.jsx("span",{className:"font-medium capitalize",children:o.difficulty})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"})," ",e.jsxs("span",{className:"font-medium",children:[o.estimatedHours,"h"]})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Done:"})," ",e.jsxs("span",{className:"font-medium",children:[D.size,"/",v]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(we,{className:"w-3 h-3 text-amber-500"}),e.jsxs("span",{children:["Test every ",ie,"Q â€¢ Skip: ",P,"cr"]})]})]})}),g?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):x?e.jsx("div",{className:"flex items-center justify-center h-[60vh] text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-red-500 mb-2",children:x}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary",children:"Retry"})]})}):v===0?e.jsx(St,{type:"certification",name:o.name,redirectTo:"/certifications",redirectDelay:5e3}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden lg:flex h-[calc(100vh-100px)]",children:[e.jsx("div",{className:"w-[40%] border-r border-border overflow-y-auto",children:f&&e.jsx(De,{question:f,questionNumber:d+1,totalQuestions:v,isMarked:Ee,isCompleted:F,onToggleMark:Ie,timerEnabled:!1,timeLeft:0})}),e.jsx("div",{className:"w-[60%] overflow-y-auto",children:f&&e.jsx(We,{question:f,isCompleted:F})})]}),e.jsxs("div",{className:"lg:hidden flex flex-col h-[calc(100vh-140px)]",children:[e.jsxs("div",{className:"flex border-b border-border",children:[e.jsx("button",{onClick:()=>C("question"),className:`flex-1 py-2 text-sm font-medium ${T==="question"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Question"}),e.jsx("button",{onClick:()=>C("answer"),className:`flex-1 py-2 text-sm font-medium ${T==="answer"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Answer"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-14",onTouchStart:Ne.onTouchStart,onTouchMove:Ne.onTouchMove,onTouchEnd:Ne.onTouchEnd,children:T==="question"?f&&e.jsx(De,{question:f,questionNumber:d+1,totalQuestions:v,isMarked:Ee,isCompleted:F,onToggleMark:Ie,onTapQuestion:()=>C("answer"),timerEnabled:!1,timeLeft:0}):f&&e.jsx(We,{question:f,isCompleted:F})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur border-t border-border py-1.5 px-3",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[e.jsxs("button",{onClick:ye,disabled:d===0,className:"flex items-center gap-1 px-2.5 py-1.5 bg-muted rounded-md disabled:opacity-40 text-xs",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Prev"]}),e.jsxs("button",{onClick:tt,disabled:F,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium ${F?"bg-green-500/10 text-green-500":"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground"}`,children:[e.jsx(ce,{className:"w-3.5 h-3.5"}),F?"Done":"Mark Done"]}),e.jsxs("button",{onClick:ae,disabled:d===v-1,className:"flex items-center gap-1 px-2.5 py-1.5 bg-muted rounded-md disabled:opacity-40 text-xs",children:["Next",e.jsx(Kt,{className:"w-4 h-4"}),J(d+1)&&!G(d+1)&&e.jsx(Le,{className:"w-3 h-3 text-amber-500"})]})]})})]})]})]})}export{tr as default};
