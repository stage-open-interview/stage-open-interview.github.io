import{u as ue,r as u,c as fe,d as pe,j as e,q as Z,H as V,ad as X,m as $,C as be,n as R,Z as ee,k as se,T as ge,ae as je}from"./index-CQ_j5kne.js";import{S as M}from"./SEOHead-D-xrDY6z.js";import{u as we}from"./use-user-preferences-DP-qzbHC.js";import{L as te}from"./ListenButton-DiTxlFX8.js";import{Q as Ne}from"./QuestionHistory-B9nNMnpN.js";import{L as ve}from"./user-XHKDxKpK.js";import{T as F,B}from"./target-RLcZqdrx.js";import{M as ne}from"./message-square-BGLl-JaW.js";import{C as ye}from"./clock-oqI4R1a8.js";import{P as Se}from"./play-D7RiC5zd.js";import{P as Ce}from"./pen-line-9z3Db_kw.js";import{S as ie}from"./square-D1xfWQaF.js";import{R as re}from"./rotate-ccw-DE9MMKKA.js";import{C as H}from"./circle-x-zdEOawlh.js";import{M as ae,A as K}from"./mic-B0FlmGCB.js";import{C as G}from"./chart-column-Cg6MV60z.js";import"./text-to-speech-JKTbiyjG.js";import"./volume-x-CF5RZmFF.js";import"./volume-2-NPC7S3Wo.js";import"./history-DD5x_MkK.js";import"./trash-2-C0F9GGC-.js";import"./triangle-alert-Dg7I3A0_.js";import"./square-pen-UScB4BM6.js";import"./plus-Bc3LL5Wb.js";import"./bot-BOJwyUpk.js";import"./chevron-down-CsWY2JiW.js";let L=[];async function ke(){if(L.length>0)return L;try{const s=await fetch("/data/voice-sessions.json");return s.ok?(L=(await s.json()).sessions||[],L):(console.warn("Voice sessions file not found, will generate from questions"),[])}catch(s){return console.error("Failed to load voice sessions:",s),[]}}function Ie(s,n){const t=[];for(let r=0;r<s.questionIds.length;r++){const l=s.questionIds[r],o=n.find(x=>x.id===l);if(o){const x=o.voiceKeywords||[],v=qe(x),a=$e(o.answer,x);t.push({id:o.id,question:o.question,criticalPoints:v,idealAnswer:a,difficulty:o.difficulty,order:r+1})}}return t}function qe(s){const n=[];for(let t=0;t<s.length;t++){const r=s[t],l=t===0?3:t<=2?2:1,o=Qe(r);n.push({phrase:r,weight:l,alternatives:o})}return n}function Qe(s){const n=s.toLowerCase(),t=[],r={kubernetes:["k8s","kube","container orchestration"],"load balancer":["lb","load balancing","traffic distribution"],database:["db","data store","datastore"],availability:["uptime","high availability","ha"],latency:["response time","delay","lag"],throughput:["bandwidth","capacity","requests per second"],microservices:["micro services","microservice","service-oriented"],authentication:["auth","authn","login"],authorization:["authz","permissions","access control"],caching:["cache","cached","in-memory"],replication:["replicate","replica","copies"],sharding:["shard","partitioning","horizontal partition"],monitoring:["monitor","observability","metrics"],deployment:["deploy","release","rollout"],scalability:["scale","scaling","scalable"],consistency:["consistent","data consistency"],idempotency:["idempotent","safe to retry"],"ci/cd":["continuous integration","continuous deployment","pipeline"],"eventual consistency":["eventually consistent","async consistency"],"strong consistency":["strongly consistent","immediate consistency"],"horizontal scaling":["scale out","scaling horizontally"],"vertical scaling":["scale up","scaling vertically"],"api gateway":["gateway","api management"],"message queue":["queue","message broker","mq"],"rate limiting":["throttling","rate limit"],"circuit breaker":["circuit breaking","fail fast"],"service mesh":["mesh","sidecar proxy"],container:["docker","containerized"],orchestration:["orchestrator","orchestrating"]};return r[n]&&t.push(...r[n]),n.endsWith("s")&&n.length>3?t.push(n.slice(0,-1)):n.endsWith("s")||t.push(n+"s"),n.includes("-")?t.push(n.replace(/-/g," ")):n.includes(" ")&&t.push(n.replace(/ /g,"-")),t}function $e(s,n){if(!s)return"";const t=s.split(/[.!?]+/).filter(x=>x.trim().length>10);if(t.length===0)return s.trim();const r=n.map(x=>x.toLowerCase()),l=t.filter(x=>r.some(v=>x.toLowerCase().includes(v)));return(l.length>0?l.slice(0,2):t.slice(0,2)).map(x=>x.trim()).join(". ")+"."}function Re(s,n){const t=s.toLowerCase().trim(),{criticalPoints:r}=n,l=[],o=[];let x=0,v=0;for(const b of r){const I=b.phrase.toLowerCase();if(v+=b.weight,t.includes(I)){l.push({phrase:b.phrase,weight:b.weight}),x+=b.weight;continue}b.alternatives.some(m=>t.includes(m.toLowerCase()))?(l.push({phrase:b.phrase,weight:b.weight}),x+=b.weight):o.push({phrase:b.phrase,weight:b.weight})}const a=v>0?x/v*100:50,w=Me(t,r.map(b=>b.phrase)),f=Math.min(w.length*3,10),k=t.split(/\s+/).length,p=k<5?15:k<8?5:0,N=Math.min(100,Math.max(0,Math.round(a+f-p))),C=N>=60,S=Pe(N,l,o);return{questionId:n.id,userAnswer:s,score:N,pointsCovered:l,pointsMissed:o,weightedScore:x,maxPossibleScore:v,isCorrect:C,feedback:S}}function Me(s,n){const t=["scalability","availability","reliability","latency","throughput","consistency","partition","replication","sharding","caching","load balancer","microservices","distributed","fault tolerance","monitoring","logging","alerting","sla","slo","sli","kubernetes","docker","ci/cd","deployment","rollback"],r=[],l=n.map(o=>o.toLowerCase());for(const o of t)s.includes(o)&&!l.includes(o)&&r.push(o);return r}function Pe(s,n,t){const l=[...t].sort((o,x)=>x.weight-o.weight).map(o=>o.phrase);return s>=80?"Excellent! You covered the key concepts well.":s>=60?l.length>0?`Good answer! Also consider: ${l.slice(0,2).join(", ")}.`:"Good answer with the main points covered.":s>=40?`Partial answer. Key terms to include: ${l.slice(0,3).join(", ")}.`:`Review this topic. Focus on: ${l.slice(0,3).join(", ")}.`}function Ae(s,n){return{session:s,questions:n,currentQuestionIndex:0,answers:[],startedAt:new Date().toISOString(),status:"intro"}}function Te(s){return{...s,status:"in-progress"}}function Fe(s){return s.status==="completed"?null:s.questions[s.currentQuestionIndex]||null}function Le(s,n){const t=s.questions[s.currentQuestionIndex];if(!t)return s;const r=Re(n,t),l=[...s.answers,r],o=s.currentQuestionIndex>=s.questions.length-1;return{...s,answers:l,status:o?"completed":"in-progress"}}function Ee(s){return s.currentQuestionIndex>=s.questions.length-1?{...s,status:"completed"}:{...s,currentQuestionIndex:s.currentQuestionIndex+1}}function ze(s){const{session:n,answers:t}=s,r=t.reduce((m,q)=>m+q.weightedScore,0),l=t.reduce((m,q)=>m+q.maxPossibleScore,0),o=l>0?Math.round(r/l*100):0;let x;o>=80?x="excellent":o>=60?x="good":o>=40?x="needs-work":x="review-topic";const a=t.flatMap(m=>m.pointsMissed).sort((m,q)=>q.weight-m.weight),w=Array.from(new Set(a.map(m=>m.phrase))),f=t.flatMap(m=>m.pointsCovered),k=Array.from(new Set(f.map(m=>m.phrase))),p=[],N=t.filter(m=>m.isCorrect).length;N===t.length?p.push("Perfect score - all questions answered correctly!"):N>=t.length*.7&&p.push(`Strong performance: ${N}/${t.length} correct`);const C=f.filter(m=>m.weight>=2).length;C>=3&&p.push(`Covered ${C} critical concepts`),k.length>=5&&p.push(`Good coverage: ${k.slice(0,4).join(", ")}`);const S=[],b=a.filter(m=>m.weight>=2);if(b.length>0){const m=b.slice(0,3).map(q=>q.phrase);S.push(`Critical concepts to review: ${m.join(", ")}`)}else w.length>0&&S.push(`Review: ${w.slice(0,5).join(", ")}`);const I=t.filter(m=>m.score<50).length;I>0&&S.push(`${I} question(s) need more practice`);const P=Oe(o,N,t.length,n.topic);return{sessionId:n.id,topic:n.topic,answers:t,overallScore:o,verdict:x,summary:P,strengths:p,areasToImprove:S,completedAt:new Date().toISOString()}}function Oe(s,n,t,r){return s>=80?`Excellent understanding of ${r}! You answered ${n}/${t} questions correctly.`:s>=60?`Good grasp of ${r}. ${n}/${t} correct. Keep practicing!`:s>=40?`Basic understanding of ${r} (${n}/${t}). Review the missed concepts.`:`${r} needs more study. Score: ${n}/${t}. Review fundamentals.`}function Ve(s){const n=[],t=s.filter(l=>l.voiceSuitable===!0&&l.voiceKeywords&&l.voiceKeywords.length>=3),r={};for(const l of t){const o=`${l.channel}:${l.subChannel}`;r[o]||(r[o]=[]),r[o].push(l)}for(const[l,o]of Object.entries(r)){if(o.length<4)continue;const[x,v]=l.split(":"),w=o.sort((p,N)=>{const C={beginner:0,intermediate:1,advanced:2};return(C[p.difficulty]||1)-(C[N.difficulty]||1)}).slice(0,6),f=w.map(p=>p.difficulty),k=f.includes("advanced")?"advanced":f.includes("intermediate")?"intermediate":"beginner";n.push({id:`gen-${x}-${v}-${Date.now()}`,topic:Be(v),description:`Practice session covering ${v} concepts`,channel:x,difficulty:k,questionIds:w.map(p=>p.id),totalQuestions:w.length,estimatedMinutes:w.length*2})}return n}function Be(s){return s.replace(/-/g," ").replace(/\b\w/g,n=>n.toUpperCase())}const D="voice-session-state",le="voice-session-history";function E(s){try{localStorage.setItem(D,JSON.stringify(s))}catch(n){console.error("Failed to save session state:",n)}}function He(){try{const s=localStorage.getItem(D);return s?JSON.parse(s):null}catch(s){return console.error("Failed to load session state:",s),null}}function ce(){try{localStorage.removeItem(D)}catch(s){console.error("Failed to clear session state:",s)}}function Ke(s){try{const n=Ge();n.unshift(s),localStorage.setItem(le,JSON.stringify(n.slice(0,20)))}catch(n){console.error("Failed to save session to history:",n)}}function Ge(){try{const s=localStorage.getItem(le);return s?JSON.parse(s):[]}catch(s){return console.error("Failed to load session history:",s),[]}}const oe=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window);function gs(){const[,s]=ue(),{preferences:n}=we(),[t,r]=u.useState("loading"),[l,o]=u.useState([]),[x,v]=u.useState([]),[a,w]=u.useState(null),[f,k]=u.useState(null),[p,N]=u.useState(""),[C,S]=u.useState(""),[b,I]=u.useState(0),[P,m]=u.useState(null),[q,z]=u.useState(""),y=u.useRef(null),A=u.useRef(null),{onVoiceInterview:Y}=fe(),{trackEvent:W}=pe(),Q=a?Fe(a):null;u.useEffect(()=>{async function i(){try{const c=await je();v(c);let d=await ke();d.length===0&&(d=Ve(c));const h=n.subscribedChannels,g=d.filter(T=>h.includes(T.channel));o(g);const j=He();if(j&&j.status!=="completed"){w(j),r("intro");return}r("select")}catch(c){m("Failed to load sessions"),console.error(c)}}i()},[n.subscribedChannels]),u.useEffect(()=>{if(!oe)return;const i=window.SpeechRecognition||window.webkitSpeechRecognition,c=new i;return c.continuous=!0,c.interimResults=!0,c.lang="en-US",c.onresult=d=>{let h="",g="";for(let j=d.resultIndex;j<d.results.length;j++){const T=d.results[j];T.isFinal?g+=T[0].transcript+" ":h+=T[0].transcript}g&&(t==="practice"?z(j=>j+g):N(j=>j+g)),S(h)},c.onerror=d=>{console.error("Speech recognition error:",d.error),d.error==="not-allowed"&&m("Microphone access denied.")},c.onend=()=>{if(t==="recording"||t==="practice")try{c.start()}catch{}},y.current=c,()=>{c.stop()}},[t]),u.useEffect(()=>(t==="recording"||t==="practice"?A.current=setInterval(()=>I(i=>i+1),1e3):A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[t]);const de=u.useCallback(i=>{const c=Ie(i,x);if(c.length<3){m("Not enough questions available for this session");return}const d=Ae(i,c);w(d),E(d),r("intro")},[x]),xe=u.useCallback(()=>{if(!a)return;const i=Te(a);if(w(i),E(i),N(""),S(""),I(0),y.current)try{y.current.start(),r("recording")}catch{m("Failed to start recording."),r("editing")}},[a]),me=u.useCallback(()=>{y.current&&y.current.stop(),r("editing")},[]),he=u.useCallback(()=>{if(!a||!p.trim()){m("Please provide an answer.");return}const i=Le(a,p.trim());w(i),E(i),r("feedback")},[a,p]),_=u.useCallback(()=>{if(a)if(a.currentQuestionIndex>=a.questions.length-1){const i=ze(a);k(i),Ke(i),ce();const c=i.overallScore>=60?"hire":"no-hire";Y(c),W({type:"voice_interview_completed",timestamp:new Date().toISOString()}),r("results")}else{const i=Ee(a);if(w(i),E(i),N(""),S(""),I(0),y.current)try{y.current.start(),r("recording")}catch{r("editing")}}},[a,Y,W]),J=u.useCallback(()=>{if(N(""),S(""),I(0),y.current)try{y.current.start(),r("recording")}catch{r("editing")}},[]),O=u.useCallback(()=>{ce(),w(null),k(null),r("select")},[]),U=i=>{const c=Math.floor(i/60),d=i%60;return`${c}:${d.toString().padStart(2,"0")}`};if(!oe)return e.jsx("div",{className:"min-h-screen bg-[#0d1117] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#d29922]/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(Z,{className:"w-10 h-10 text-[#d29922]"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Browser Not Supported"}),e.jsx("p",{className:"text-[#8b949e] mb-6",children:"Voice sessions require the Web Speech API. Use Chrome, Edge, or Safari."}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-[#238636] text-white font-medium rounded-xl hover:bg-[#2ea043] transition-colors",children:"Go Home"})]})});if(t==="loading")return e.jsx("div",{className:"min-h-screen bg-[#0d1117] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#58a6ff]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(ve,{className:"w-8 h-8 animate-spin text-[#58a6ff]"})}),e.jsx("p",{className:"text-[#8b949e]",children:"Loading sessions..."})]})});if(t==="select"){const i={};for(const c of l)i[c.channel]||(i[c.channel]=[]),i[c.channel].push(c);return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Voice Sessions | Code Reels",description:"Practice interview topics with focused question sessions"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(V,{className:"w-5 h-5 text-[#8b949e]"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#a371f7] to-[#f778ba] flex items-center justify-center",children:e.jsx(F,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white",children:"Voice Sessions"}),e.jsxs("p",{className:"text-xs text-[#8b949e]",children:[l.length," sessions available"]})]})]})]}),e.jsx(X,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-6",children:l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#21262d] flex items-center justify-center mx-auto mb-6",children:e.jsx(Z,{className:"w-10 h-10 text-[#6e7681]"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Sessions Available"}),e.jsx("p",{className:"text-[#8b949e] mb-6",children:"Subscribe to channels to unlock voice sessions."}),e.jsx("button",{onClick:()=>s("/channels"),className:"px-6 py-3 bg-[#238636] text-white font-medium rounded-xl hover:bg-[#2ea043] transition-colors",children:"Subscribe to Channels"})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(i).map(([c,d])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xs font-semibold text-[#8b949e] uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#58a6ff]"}),c.replace(/-/g," ")]}),e.jsx("div",{className:"grid gap-3",children:d.map(h=>e.jsx($.button,{onClick:()=>de(h),whileHover:{scale:1.01},whileTap:{scale:.99},className:"p-5 bg-[#161b22] border border-[#30363d] rounded-2xl text-left hover:border-[#58a6ff]/50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white group-hover:text-[#58a6ff] transition-colors mb-1",children:h.topic}),e.jsx("p",{className:"text-sm text-[#8b949e] mb-3",children:h.description}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg ${h.difficulty==="beginner"?"bg-[#238636]/20 text-[#3fb950]":h.difficulty==="intermediate"?"bg-[#d29922]/20 text-[#d29922]":"bg-[#f85149]/20 text-[#f85149]"}`,children:h.difficulty}),e.jsxs("span",{className:"text-xs text-[#6e7681] flex items-center gap-1",children:[e.jsx(ne,{className:"w-3.5 h-3.5"}),h.totalQuestions," questions"]}),e.jsxs("span",{className:"text-xs text-[#6e7681] flex items-center gap-1",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),"~",h.estimatedMinutes," min"]})]})]}),e.jsx("div",{className:"p-2 rounded-lg bg-[#21262d] group-hover:bg-[#58a6ff]/20 transition-colors",children:e.jsx(be,{className:"w-5 h-5 text-[#6e7681] group-hover:text-[#58a6ff]"})})]})},h.id))})]},c))})})]})]})}if(t==="intro"&&a)return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:`${a.session.topic} | Voice Session`,description:"Voice interview session practice"}),e.jsx("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3] flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-lg w-full",children:e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-[#a371f7] to-[#f778ba] flex items-center justify-center mx-auto mb-6",children:e.jsx(F,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:a.session.topic}),e.jsxs("p",{className:"text-[#8b949e] mb-6",children:[a.questions.length," questions â€¢ ~",a.session.estimatedMinutes," min"]}),e.jsx("div",{className:"bg-[#0d1117] rounded-xl p-4 mb-6 text-left",children:e.jsx("p",{className:"text-sm text-[#8b949e]",children:a.session.description})}),e.jsxs("div",{className:"space-y-3 mb-8 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#238636]/20 flex items-center justify-center",children:e.jsx(R,{className:"w-4 h-4 text-[#3fb950]"})}),e.jsx("span",{children:"Answer each question in 1-2 sentences"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#58a6ff]/20 flex items-center justify-center",children:e.jsx(ee,{className:"w-4 h-4 text-[#58a6ff]"})}),e.jsx("span",{children:"Use specific technical terms"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#8b949e]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#a371f7]/20 flex items-center justify-center",children:e.jsx(se,{className:"w-4 h-4 text-[#a371f7]"})}),e.jsx("span",{children:"Get instant feedback after each answer"})]})]})]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] border-t border-[#30363d] flex gap-3",children:[e.jsx("button",{onClick:O,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors",children:"Back"}),e.jsxs("button",{onClick:xe,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5"}),"Start Session"]})]})]})})})]});if((t==="recording"||t==="editing")&&a&&Q){const i=(a.currentQuestionIndex+1)/a.questions.length*100;return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:`Q${a.currentQuestionIndex+1} | ${a.session.topic}`,description:"Answer the interview question"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:O,className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(V,{className:"w-5 h-5 text-[#8b949e]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white text-sm",children:a.session.topic}),e.jsxs("p",{className:"text-xs text-[#8b949e]",children:["Question ",a.currentQuestionIndex+1," of ",a.questions.length]})]})]}),e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg ${Q.difficulty==="beginner"?"bg-[#238636]/20 text-[#3fb950]":Q.difficulty==="intermediate"?"bg-[#d29922]/20 text-[#d29922]":"bg-[#f85149]/20 text-[#f85149]"}`,children:Q.difficulty}),e.jsx(Ne,{questionId:Q.id,questionType:"question",size:"sm"})]}),e.jsx("div",{className:"pb-3",children:e.jsx("div",{className:"h-1.5 bg-[#21262d] rounded-full overflow-hidden",children:e.jsx($.div,{initial:{width:0},animate:{width:`${i}%`},className:"h-full bg-gradient-to-r from-[#a371f7] to-[#f778ba] rounded-full"})})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-[#58a6ff]/10 flex-shrink-0",children:e.jsx(ne,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-medium text-white leading-relaxed",children:Q.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx(te,{text:Q.question,label:"Listen",size:"sm"}),e.jsxs("span",{className:"text-xs text-[#6e7681]",children:[Q.criticalPoints.length," key points"]})]})]})]}),P&&e.jsx("div",{className:"mt-4 p-4 bg-[#f85149]/10 border border-[#f85149]/30 rounded-xl text-[#f85149] text-sm",children:P})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[t==="recording"&&e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-[#f85149]/10 border border-[#f85149]/30 rounded-full",children:[e.jsx("span",{className:"w-3 h-3 bg-[#f85149] rounded-full animate-pulse"}),e.jsx("span",{className:"font-mono text-[#f85149] font-medium",children:U(b)})]}),t==="editing"&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#d29922]/10 border border-[#d29922]/30 rounded-full",children:[e.jsx(Ce,{className:"w-4 h-4 text-[#d29922]"}),e.jsx("span",{className:"text-sm text-[#d29922]",children:"Edit, then submit"})]})]}),e.jsxs("div",{className:"mb-6",children:[t==="editing"?e.jsx("textarea",{value:p,onChange:c=>N(c.target.value),className:"w-full p-4 bg-[#0d1117] border border-[#d29922]/30 rounded-xl min-h-[100px] text-sm text-[#e6edf3] resize-y focus:outline-none focus:ring-2 focus:ring-[#d29922]/50",placeholder:"Edit your answer..."}):e.jsx("div",{className:"p-4 bg-[#0d1117] rounded-xl min-h-[80px] border border-[#30363d]",children:e.jsxs("p",{className:"text-sm text-[#e6edf3] whitespace-pre-wrap",children:[p,e.jsx("span",{className:"text-[#6e7681]",children:C}),t==="recording"&&e.jsx("span",{className:"animate-pulse text-[#58a6ff]",children:"|"})]})}),e.jsxs("p",{className:"text-xs text-[#6e7681] mt-2 flex items-center gap-1.5",children:[e.jsx(ee,{className:"w-3.5 h-3.5 text-[#d29922]"}),"Keep it brief: 1-2 sentences with key terms"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t==="recording"&&e.jsxs("button",{onClick:me,className:"flex items-center gap-3 px-8 py-4 bg-[#f85149] text-white font-semibold rounded-2xl hover:bg-[#da3633] transition-all",children:[e.jsx(ie,{className:"w-5 h-5"}),"Stop"]}),t==="editing"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-5 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Re-record"]}),e.jsxs("button",{onClick:he,disabled:!p.trim(),className:"flex items-center gap-3 px-8 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-all disabled:opacity-50",children:[e.jsx(R,{className:"w-5 h-5"}),"Submit"]})]})]})]})]})]})]})}if(t==="feedback"&&a){const i=a.answers[a.answers.length-1],c=a.questions[a.currentQuestionIndex],d=a.currentQuestionIndex>=a.questions.length-1,h=()=>{if(z(""),S(""),I(0),r("practice"),y.current)try{y.current.start()}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Feedback | Voice Session",description:"Review your answer feedback"}),e.jsx("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3] flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-lg w-full",children:e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-2xl flex items-center justify-center mx-auto mb-4 ${i.isCorrect?"bg-[#238636]/20":"bg-[#f85149]/20"}`,children:i.isCorrect?e.jsx(R,{className:"w-12 h-12 text-[#3fb950]"}):e.jsx(H,{className:"w-12 h-12 text-[#f85149]"})}),e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[i.score,"%"]}),e.jsx("p",{className:`text-sm font-medium ${i.isCorrect?"text-[#3fb950]":"text-[#f85149]"}`,children:i.isCorrect?"Good answer!":"Needs improvement"})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{className:"bg-[#0d1117] rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-[#8b949e]",children:i.feedback}),e.jsxs("div",{className:"mt-2 text-xs text-[#6e7681]",children:["Score: ",i.weightedScore,"/",i.maxPossibleScore," weighted points"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.pointsCovered.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-[#3fb950] mb-2 flex items-center gap-1.5",children:[e.jsx(R,{className:"w-3.5 h-3.5"})," Covered"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.pointsCovered.map((g,j)=>e.jsxs("span",{className:"px-2.5 py-1 text-xs bg-[#238636]/20 text-[#3fb950] rounded-lg font-medium flex items-center gap-1",children:[g.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",g.weight]})]},j))})]}),i.pointsMissed.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-[#f85149] mb-2 flex items-center gap-1.5",children:[e.jsx(H,{className:"w-3.5 h-3.5"})," Missed"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.pointsMissed.map((g,j)=>e.jsxs("span",{className:"px-2.5 py-1 text-xs bg-[#f85149]/20 text-[#f85149] rounded-lg font-medium flex items-center gap-1",children:[g.phrase,e.jsxs("span",{className:"opacity-60",children:["Ã—",g.weight]})]},j))})]})]}),c.idealAnswer&&e.jsx("div",{className:"bg-[#58a6ff]/10 border border-[#58a6ff]/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[#58a6ff]/20",children:e.jsx(B,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-[#58a6ff] mb-1",children:"Practice the Ideal Answer"}),e.jsx("p",{className:"text-xs text-[#8b949e] mb-3",children:"Read aloud to practice pronunciation and memorize key terms."}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-1.5 bg-[#58a6ff]/20 text-[#58a6ff] text-xs font-medium rounded-lg hover:bg-[#58a6ff]/30 transition-colors",children:[e.jsx(ae,{className:"w-3.5 h-3.5"}),"Practice Reading Aloud"]})]})]})})]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] border-t border-[#30363d] flex gap-3",children:[e.jsxs("button",{onClick:J,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Retry"]}),e.jsx("button",{onClick:_,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Results"]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(K,{className:"w-4 h-4"})]})})]})]})})})]})}if(t==="practice"&&a){const i=a.questions[a.currentQuestionIndex],c=a.currentQuestionIndex>=a.questions.length-1,d=()=>{y.current&&y.current.stop(),r("feedback")},h=()=>{y.current&&y.current.stop(),z(""),S(""),_()};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Practice Mode | Voice Session",description:"Practice reading the ideal answer"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:d,className:"p-2 hover:bg-[#21262d] rounded-lg transition-colors",children:e.jsx(K,{className:"w-5 h-5 rotate-180 text-[#8b949e]"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#58a6ff]/20 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-[#58a6ff]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white text-sm",children:"Practice Mode"}),e.jsx("p",{className:"text-xs text-[#8b949e]",children:"Read the ideal answer aloud"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-[#f85149]/10 border border-[#f85149]/30 rounded-full",children:[e.jsx("span",{className:"w-3 h-3 bg-[#f85149] rounded-full animate-pulse"}),e.jsx("span",{className:"font-mono text-sm text-[#f85149]",children:U(b)})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl bg-[#58a6ff]/10 border border-[#58a6ff]/30 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-[#58a6ff] flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Read This Aloud"]}),e.jsx(te,{text:i.idealAnswer,label:"Listen",size:"sm"})]}),e.jsx("p",{className:"text-lg text-white leading-relaxed",children:i.idealAnswer}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#58a6ff]/20",children:[e.jsx("p",{className:"text-xs text-[#8b949e] mb-2",children:"Key points to emphasize:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.criticalPoints.map((g,j)=>e.jsxs("span",{className:`px-2.5 py-1 text-xs rounded-lg font-medium flex items-center gap-1 ${g.weight===3?"bg-[#58a6ff]/30 text-[#79c0ff]":g.weight===2?"bg-[#58a6ff]/20 text-[#58a6ff]":"bg-[#58a6ff]/10 text-[#58a6ff]/80"}`,children:[g.phrase,g.weight>1&&e.jsxs("span",{className:"opacity-60",children:["Ã—",g.weight]})]},j))})]})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-[#f85149]"}),"Your Recording"]}),e.jsxs("div",{className:"p-4 bg-[#0d1117] rounded-xl min-h-[100px] border border-[#30363d]",children:[e.jsxs("p",{className:"text-sm text-[#e6edf3] whitespace-pre-wrap",children:[q,e.jsx("span",{className:"text-[#6e7681]",children:C}),e.jsx("span",{className:"animate-pulse text-[#58a6ff]",children:"|"})]}),!q&&!C&&e.jsx("p",{className:"text-[#6e7681] text-sm",children:"Start reading the answer above..."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:d,className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Back to Feedback"]}),e.jsx("button",{onClick:h,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Finish Session"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),"Done, Next Question"]})})]})]})]})]})}if(t==="results"&&f){const c=(d=>{switch(d){case"excellent":return{bg:"bg-[#238636]/20",text:"text-[#3fb950]",icon:"ðŸŒŸ"};case"good":return{bg:"bg-[#58a6ff]/20",text:"text-[#58a6ff]",icon:"ðŸ‘"};case"needs-work":return{bg:"bg-[#d29922]/20",text:"text-[#d29922]",icon:"ðŸ“š"};default:return{bg:"bg-[#f85149]/20",text:"text-[#f85149]",icon:"ðŸ”„"}}})(f.verdict);return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Results | Voice Session",description:"Your session results and score"}),e.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-[#e6edf3]",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#30363d] bg-[#0d1117]/95 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#f1c40f] to-[#d29922] flex items-center justify-center",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"font-semibold text-white",children:"Session Complete"})]}),e.jsx(X,{compact:!0,onClick:()=>s("/profile")})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-8 mb-6 text-center",children:[e.jsx("div",{className:`w-28 h-28 rounded-2xl ${c.bg} flex items-center justify-center mx-auto mb-6`,children:e.jsxs("span",{className:`text-5xl font-bold ${c.text}`,children:[f.overallScore,"%"]})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:f.topic}),e.jsxs("p",{className:`text-lg font-medium ${c.text} mb-4`,children:[c.icon," ",f.verdict==="excellent"?"Excellent!":f.verdict==="good"?"Good Job!":f.verdict==="needs-work"?"Keep Practicing":"Review Topic"]}),e.jsx("p",{className:"text-sm text-[#8b949e] max-w-md mx-auto",children:f.summary})]}),e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-[#58a6ff]"}),"Question Breakdown"]}),e.jsx("div",{className:"space-y-3",children:f.answers.map((d,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#0d1117] rounded-xl border border-[#30363d]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold ${d.isCorrect?"bg-[#238636]/20 text-[#3fb950]":"bg-[#f85149]/20 text-[#f85149]"}`,children:h+1}),e.jsxs("span",{className:"text-sm text-[#8b949e]",children:["Question ",h+1]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-lg font-bold ${d.score>=60?"text-[#3fb950]":"text-[#f85149]"}`,children:[d.score,"%"]}),d.isCorrect?e.jsx(R,{className:"w-5 h-5 text-[#3fb950]"}):e.jsx(H,{className:"w-5 h-5 text-[#f85149]"})]})]},d.questionId))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[f.strengths.length>0&&e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-5",children:[e.jsxs("h4",{className:"font-semibold text-[#3fb950] mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"})," Strengths"]}),e.jsx("ul",{className:"space-y-2",children:f.strengths.map((d,h)=>e.jsxs("li",{className:"text-sm text-[#8b949e] flex items-start gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-[#3fb950] flex-shrink-0 mt-0.5"}),d]},h))})]}),f.areasToImprove.length>0&&e.jsxs("div",{className:"rounded-2xl border border-[#30363d] bg-[#161b22] p-5",children:[e.jsxs("h4",{className:"font-semibold text-[#d29922] mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"})," To Improve"]}),e.jsx("ul",{className:"space-y-2",children:f.areasToImprove.map((d,h)=>e.jsxs("li",{className:"text-sm text-[#8b949e] flex items-start gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-[#d29922] flex-shrink-0 mt-0.5"}),d]},h))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>s("/"),className:"flex-1 px-4 py-3 border border-[#30363d] text-[#8b949e] hover:text-white hover:border-[#8b949e] rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Home"]}),e.jsxs("button",{onClick:O,className:"flex-1 px-4 py-3 bg-[#238636] text-white font-semibold rounded-xl hover:bg-[#2ea043] transition-colors flex items-center justify-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"New Session"]})]})]})]})]})}return null}export{gs as default};
