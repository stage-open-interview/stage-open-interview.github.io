import{u as je,a as ve,r as c,b as W,c as ye,d as Ne,e as Ce,t as ke,f as Se,j as e,Z as K,S as $e,C as J,g as qe}from"./index-Cn9kNtm6.js";import{g as Te}from"./data-Dh2ALuKv.js";import{u as Ee,a as Fe,b as Ae,R as Me,V as Le,c as Ie,T as Re,P as De,C as Qe,I as Pe}from"./index-C8v6hc7A.js";import{S as Ue}from"./SEOHead-DItNB6-0.js";import{Q as Z,A as G}from"./AnswerPanel-D_m2ll5E.js";import{U as ze}from"./UnifiedSearch-Cdu1O6U4.js";import{u as Ve,C as Be}from"./use-swipe-D13Q75ms.js";import{u as He,C as U}from"./use-unified-toast-ath2zPeP.js";import{T as F}from"./target-DZui4CLk.js";import{F as _,B as X}from"./tag-BRl1ewrE.js";import{C as Y}from"./chevron-down-BfeY-uKX.js";import{B as Oe}from"./bookmark-RaxySMG1.js";import{S as We}from"./share-2-BTJA_OSB.js";import"./mic-BCYZvu0b.js";import"./arrow-right-CCY2gbfn.js";import"./QuestionHistory-CcbZewbl.js";import"./history-BcXB0qHc.js";import"./trash-2-DTkTa6rs.js";import"./triangle-alert-t8INq6-J.js";import"./square-pen-CuEutDyN.js";import"./plus-BH8jUl7C.js";import"./user-DyCTHPmF.js";import"./bot-CVFwOzsV.js";import"./clock-5sf0K1n0.js";import"./index-8H2BZ9Cc.js";import"./hash-Fl6CEjnJ.js";import"./EnhancedMermaid-DwQOyETc.js";import"./zoom-out-4Dzlc8uE.js";import"./GiscusComments-BH_H6Z7w.js";import"./message-circle-BnchWNQR.js";import"./loader-circle-DHgpCF8c.js";import"./QuestionFeedback-DMdtCLLY.js";import"./flag-C-jWsy16.js";import"./external-link-DJtpf4ph.js";import"./ban-C7deroT0.js";import"./book-open-B8zbvylo.js";import"./file-text-ldP4aXjH.js";import"./copy-C-94UfBn.js";import"./lightbulb-B46-EML1.js";import"./play-DWJQyc2Q.js";import"./youtube-BVfKYq-0.js";import"./coffee-B7U82frS.js";function Rs(){const[o,r]=je(),[,f]=ve("/channel/:id/:questionId?"),t=f?.id,v=f?.questionId,b=new URLSearchParams(o.split("?")[1]||"").get("q"),u=b||v,g=Te(t||""),{subChannels:w}=Ee(t||""),l=g?{...g,subChannels:[{id:"all",name:"All Topics"},...w.map(i=>({id:i,name:i.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}))]}:null,[h,N]=c.useState("all"),[y,T]=c.useState("all"),[s,z]=c.useState("all"),[m,$]=c.useState(0),[A,q]=c.useState(!1),[M,C]=c.useState("question"),[ee,se]=c.useState(!1),{companiesWithCounts:te}=Fe(t||"",h,y),{preferences:V}=W(),ne=V.shuffleQuestions!==!1,ie=V.prioritizeUnvisited!==!1,{onQuestionSwipe:ae,onQuestionView:le}=ye(),{trackEvent:re}=Ne(),{question:n,questions:j,totalQuestions:d,loading:p,error:oe}=Ae(t||"",m,h,y,s,ne,ie),[L,B]=c.useState(!1);c.useEffect(()=>{if(!(p||j.length===0))if(u){const i=j.findIndex(a=>a.id===u);i>=0&&i!==m&&$(i),b&&r(`/channel/${t}/${u}`,{replace:!0}),B(!0)}else j[0]&&!L&&(r(`/channel/${t}/${j[0].id}`,{replace:!0}),B(!0))},[u,j.length,t,p,b]);const{completed:ce,markCompleted:de,saveLastVisitedIndex:me}=Ce(t||""),{isSubscribed:I,subscribeChannel:ue,unsubscribeChannel:he}=W(),{toast:k}=He();c.useEffect(()=>{t&&l&&!I(t)&&(p||(d>0&&j.length>0?(ue(t),k({title:"Channel added",description:`${l.name} added to your channels`})):(k({title:"Cannot add channel",description:`${l.name} has no questions available`,variant:"destructive"}),setTimeout(()=>{r("/")},2e3)))),t&&Me.trackChannelVisit(t)},[t,l,p,d,j.length]),c.useEffect(()=>{!p&&t&&l&&I(t)&&(d===0||j.length===0)&&(he(t),k({title:"Channel removed",description:`${l.name} has no questions available and was removed from your channels`,variant:"destructive"}),setTimeout(()=>{r("/")},2e3))},[p,d,j.length,t,l,I]);const[xe,fe]=c.useState(()=>{const i=localStorage.getItem(`marked-${t}`);return i?JSON.parse(i):[]}),R=Ve({onSwipeLeft:()=>C("answer"),onSwipeRight:()=>C("question")});c.useEffect(()=>{d>0&&m>=d&&$(0)},[d,m]),c.useEffect(()=>{!L||p||!t||!n||(n.id!==u&&r(`/channel/${t}/${n.id}`,{replace:!0}),me(m))},[m,L]),c.useEffect(()=>{n&&(ke(n.id,n.channel,n.difficulty),de(n.id),Se(),re({type:"question_completed",timestamp:new Date().toISOString(),data:{questionId:n.id,difficulty:n.difficulty,channel:n.channel}}))},[n?.id]),c.useEffect(()=>{const i=a=>{if((a.metaKey||a.ctrlKey)&&a.key==="k"){a.preventDefault(),q(!0);return}A||(a.key==="ArrowRight"||a.key==="ArrowDown"?(a.preventDefault(),H()):a.key==="ArrowLeft"||a.key==="ArrowUp"?(a.preventDefault(),O()):a.key==="Escape"&&r("/"))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[m,d,A]);const H=()=>{m<d-1&&($(i=>i+1),C("question"),ae(),le())},O=()=>{m>0&&($(i=>i-1),C("question"))},D=()=>{n&&fe(i=>{const a=i.includes(n.id)?i.filter(we=>we!==n.id):[...i,n.id];return localStorage.setItem(`marked-${t}`,JSON.stringify(a)),a})},pe=async()=>{try{await navigator.clipboard.writeText(window.location.href),k({title:"Link copied!",description:"Question link copied to clipboard"})}catch{k({title:"Share",description:window.location.href})}},be=(i,a)=>{$(0),i==="sub"?N(a):i==="diff"?T(a):z(a)};if(c.useEffect(()=>{!p&&l&&d===0&&(h!=="all"||y!=="all"||s!=="all"||(k({title:"Content coming soon!",description:`We're preparing questions for "${l.name}". Check back soon!`,variant:"warning"}),se(!0)))},[p,l,d,h,y,s]),p&&!n)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading questions..."})]})});if(oe||!l)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Channel not found"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:['The channel "',t,`" doesn't exist.`]}),e.jsx("button",{onClick:()=>r("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Go Home"})]})});if(!p&&(!n||d===0))return!(h!=="all"||y!=="all"||s!=="all")||ee?e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(P,{channel:l,onBack:()=>r("/"),onSearch:()=>q(!0)}),e.jsx(Be,{type:"channel",name:l?.name,redirectTo:"/channels",redirectDelay:5e3})]}):e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(P,{channel:l,onBack:()=>r("/"),onSearch:()=>q(!0)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters."}),e.jsx("button",{onClick:()=>{N("all"),T("all"),z("all")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Reset Filters"})]})})]});if(!n)return null;const Q=xe.includes(n.id),E=ce.includes(n.id),ge=Math.round((m+1)/d*100);return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{title:`${n.question.substring(0,55)}... | ${l.name} - Code Reels`,description:n.answer?.substring(0,120)||"Practice interview questions",canonical:`https://open-interview.github.io/channel/${t}/${m}`}),e.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[e.jsx(P,{channel:l,onBack:()=>r("/"),onSearch:()=>q(!0),currentIndex:m,totalQuestions:d,progress:ge,filters:{selectedSubChannel:h,selectedDifficulty:y,selectedCompany:s,companiesWithCounts:te,onFilterChange:be}}),e.jsxs("div",{className:"flex-1 flex overflow-hidden isolate","data-testid":"reels-content",children:[e.jsxs("div",{className:"hidden lg:flex flex-1",children:[e.jsx("div",{className:"w-1/2 border-r border-border overflow-hidden",children:e.jsx(Z,{question:n,questionNumber:m+1,totalQuestions:d,isMarked:Q,isCompleted:E,onToggleMark:D,timerEnabled:!1,timeLeft:0})}),e.jsx("div",{className:"w-1/2 overflow-hidden",children:e.jsx(G,{question:n,isCompleted:E})})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:hidden overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-border bg-background relative z-10",children:[e.jsx("button",{onClick:()=>C("question"),className:`flex-1 py-3 text-sm font-medium transition-colors ${M==="question"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Question"}),e.jsx("button",{onClick:()=>C("answer"),className:`flex-1 py-3 text-sm font-medium transition-colors ${M==="answer"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Answer"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-background relative z-0 pb-20",onTouchStart:R.onTouchStart,onTouchMove:R.onTouchMove,onTouchEnd:R.onTouchEnd,children:M==="question"?e.jsx(Z,{question:n,questionNumber:m+1,totalQuestions:d,isMarked:Q,isCompleted:E,onToggleMark:D,onTapQuestion:()=>C("answer"),timerEnabled:!1,timeLeft:0}):e.jsx(G,{question:n,isCompleted:E})})]})]}),e.jsx(Ke,{currentIndex:m,totalQuestions:d,onPrev:O,onNext:H,onShare:pe,isMarked:Q,onToggleMark:D})]}),e.jsx(ze,{isOpen:A,onClose:()=>q(!1)}),e.jsx(Le,{})]})}function P({channel:o,onBack:r,onSearch:f,currentIndex:t,totalQuestions:v,progress:x,filters:b}){const{selectedSubChannel:u,selectedDifficulty:g,selectedCompany:w,companiesWithCounts:l,onFilterChange:h}=b||{},[N,y]=c.useState(!1),T=u!=="all"||g!=="all"||w!=="all";return e.jsxs("header",{className:"bg-card/95 backdrop-blur-md border-b border-border shrink-0",children:[e.jsxs("div",{className:"h-14 flex items-center px-3 sm:px-4 gap-2 sm:gap-3",children:[e.jsx("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors shrink-0",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{className:"shrink-0 min-w-0 max-w-[200px] sm:max-w-none",children:[e.jsx("h1",{className:"font-semibold text-sm sm:text-base leading-tight",children:o.name}),v>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[t+1," of ",v]}),e.jsx("div",{className:"w-12 sm:w-16 h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${x}%`}})})]})]}),b&&e.jsxs("div",{className:"hidden sm:flex flex-1 items-center gap-2 overflow-x-auto no-scrollbar mx-2",children:[o.subChannels?.length>1&&e.jsx(S,{label:o.subChannels.find(s=>s.id===u)?.name||"Topic",options:o.subChannels.map(s=>({id:s.id,label:s.name})),selected:u,onSelect:s=>h("sub",s)}),e.jsx(S,{label:g==="all"?"Difficulty":g,options:[{id:"all",label:"All Levels",icon:e.jsx(F,{className:"w-3 h-3"})},{id:"beginner",label:"Easy",icon:e.jsx(K,{className:"w-3 h-3 text-green-500"})},{id:"intermediate",label:"Medium",icon:e.jsx(F,{className:"w-3 h-3 text-yellow-500"})},{id:"advanced",label:"Hard",icon:e.jsx(_,{className:"w-3 h-3 text-red-500"})}],selected:g,onSelect:s=>h("diff",s)}),l.length>0&&e.jsx(S,{label:w==="all"?"Company":w,options:[{id:"all",label:"All Companies",icon:e.jsx(X,{className:"w-3 h-3"})},...l.map(s=>({id:s.name,label:`${s.name} (${s.count})`}))],selected:w,onSelect:s=>h("company",s)})]}),b&&e.jsx("button",{onClick:()=>y(!N),className:`sm:hidden p-2 rounded-lg transition-colors ${N||T?"bg-primary/15 text-primary":"hover:bg-muted"}`,children:e.jsx(Y,{className:`w-4 h-4 transition-transform ${N?"rotate-180":""}`})}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-muted rounded-lg transition-colors shrink-0",children:e.jsx($e,{className:"w-5 h-5"})})]}),b&&N&&e.jsxs("div",{className:"sm:hidden px-3 pb-3 flex items-center gap-2 overflow-x-auto no-scrollbar",children:[o.subChannels?.length>1&&e.jsx(S,{label:o.subChannels.find(s=>s.id===u)?.name||"Topic",options:o.subChannels.map(s=>({id:s.id,label:s.name})),selected:u,onSelect:s=>h("sub",s)}),e.jsx(S,{label:g==="all"?"Level":g.slice(0,4),options:[{id:"all",label:"All Levels",icon:e.jsx(F,{className:"w-3 h-3"})},{id:"beginner",label:"Easy",icon:e.jsx(K,{className:"w-3 h-3 text-green-500"})},{id:"intermediate",label:"Medium",icon:e.jsx(F,{className:"w-3 h-3 text-yellow-500"})},{id:"advanced",label:"Hard",icon:e.jsx(_,{className:"w-3 h-3 text-red-500"})}],selected:g,onSelect:s=>h("diff",s)}),l.length>0&&e.jsx(S,{label:w==="all"?"Company":w.slice(0,8),options:[{id:"all",label:"All Companies",icon:e.jsx(X,{className:"w-3 h-3"})},...l.map(s=>({id:s.name,label:`${s.name} (${s.count})`}))],selected:w,onSelect:s=>h("company",s)})]})]})}function S({label:o,options:r,selected:f,onSelect:t}){const v=f!=="all";return e.jsxs(Ie,{children:[e.jsx(Re,{asChild:!0,children:e.jsxs("button",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-all whitespace-nowrap outline-none focus:outline-none ${v?"bg-primary/15 text-primary border border-primary/30":"bg-muted/50 hover:bg-muted border border-transparent"}`,children:[o,e.jsx(Y,{className:"w-3 h-3 opacity-60"})]})}),e.jsx(De,{children:e.jsx(Qe,{className:"min-w-[180px] max-h-[300px] overflow-y-auto bg-black/90 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl shadow-black/50 p-1.5 z-50",sideOffset:6,children:r.map(x=>e.jsxs(Pe,{onClick:()=>t(x.id),className:`flex items-center gap-2 px-3 py-2.5 rounded-lg cursor-pointer outline-none text-sm transition-colors ${f===x.id?"bg-primary/20 text-primary":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:[x.icon,e.jsx("span",{className:"flex-1",children:x.label}),f===x.id&&e.jsx(qe,{className:"w-4 h-4"})]},x.id))})})]})}function Ke({currentIndex:o,totalQuestions:r,onPrev:f,onNext:t,onShare:v,isMarked:x,onToggleMark:b}){const u=Math.round((o+1)/r*100);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 pointer-events-none lg:hidden",children:e.jsxs("div",{className:"pointer-events-auto flex items-center gap-0.5 p-1 bg-black/80 backdrop-blur-xl border border-white/15 rounded-xl shadow-2xl shadow-black/50",children:[e.jsx("button",{onClick:f,disabled:o===0,className:"w-11 h-11 flex items-center justify-center rounded-lg hover:bg-white/10 transition-all disabled:opacity-20 active:scale-90",children:e.jsx(U,{className:"w-5 h-5 text-white/70"})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("div",{className:"relative w-10 h-1 bg-white/15 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${u}%`}})}),e.jsxs("span",{className:"text-[11px] text-white/50 tabular-nums font-medium min-w-[36px]",children:[o+1,"/",r]})]}),e.jsx("button",{onClick:t,disabled:o===r-1,className:"w-11 h-11 flex items-center justify-center bg-primary text-white rounded-lg hover:bg-primary/80 transition-all disabled:opacity-20 active:scale-90",children:e.jsx(J,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 pointer-events-none hidden lg:block",children:e.jsxs("div",{className:"pointer-events-auto flex items-center gap-1 px-1.5 py-1 bg-black/80 backdrop-blur-xl border border-white/15 rounded-xl shadow-2xl shadow-black/50",children:[e.jsx("button",{onClick:f,disabled:o===0,className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/10 transition-all disabled:opacity-20 active:scale-95",children:e.jsx(U,{className:"w-5 h-5 text-white/70"})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("div",{className:"relative w-14 h-1 bg-white/15 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${u}%`}})}),e.jsxs("span",{className:"text-xs text-white/50 tabular-nums font-medium",children:[o+1,"/",r]})]}),e.jsx("button",{onClick:b,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-all active:scale-95 ${x?"bg-primary/20 text-primary":"hover:bg-white/10 text-white/50"}`,children:e.jsx(Oe,{className:`w-4 h-4 ${x?"fill-current":""}`})}),e.jsx("button",{onClick:v,className:"w-9 h-9 flex items-center justify-center rounded-lg hover:bg-white/10 text-white/50 transition-all active:scale-95",children:e.jsx(We,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:t,disabled:o===r-1,className:"flex items-center gap-1.5 h-10 pl-4 pr-3 bg-primary text-white rounded-lg hover:bg-primary/80 transition-all disabled:opacity-20 active:scale-95 text-sm font-medium",children:["Next",e.jsx(J,{className:"w-4 h-4"})]})]})})]})}export{Rs as default};
