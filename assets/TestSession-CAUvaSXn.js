import{o as me,u as xe,r as h,j as e,m,k as L,R as ue,Z as z,l as W,g as Q,X as _,p as he,n as pe,T as P,q as Y,H as fe,s as H}from"./index-Cn9kNtm6.js";import{S as ge}from"./SEOHead-DItNB6-0.js";import{Q as M}from"./QuestionFeedback-DMdtCLLY.js";import{Q as be}from"./QuestionHistory-CcbZewbl.js";import{D as je}from"./DesktopSidebarWrapper-Cg4siqDD.js";import{g as ye,a as Ne,b as we,c as K,d as ve,e as Ce,f as Se,h as ke,s as $e}from"./tests-CRs_cQC6.js";import{T as qe}from"./triangle-alert-t8INq6-J.js";import{A as U}from"./arrow-right-CCY2gbfn.js";import{E as X}from"./eye-Cu2uzdka.js";import{C as Ae}from"./chevron-down-BfeY-uKX.js";import{C as Ie}from"./circle-x-DQQplYX7.js";import{E as Te}from"./external-link-DJtpf4ph.js";import{R as V}from"./rotate-ccw-BC5wRnco.js";import{S as Z}from"./share-2-BTJA_OSB.js";import"./flag-C-jWsy16.js";import"./ban-C7deroT0.js";import"./history-BcXB0qHc.js";import"./trash-2-DTkTa6rs.js";import"./square-pen-CuEutDyN.js";import"./plus-BH8jUl7C.js";import"./user-DyCTHPmF.js";import"./bot-CVFwOzsV.js";import"./clock-5sf0K1n0.js";import"./UnifiedNav-DbSIdDh-.js";import"./book-open-B8zbvylo.js";import"./mic-BCYZvu0b.js";import"./use-unified-toast-ath2zPeP.js";import"./target-DZui4CLk.js";import"./tag-BRl1ewrE.js";import"./chart-column-C93i77F-.js";import"./bookmark-RaxySMG1.js";import"./UnifiedSearch-Cdu1O6U4.js";import"./loader-circle-DHgpCF8c.js";function A(x){return x?x.split(/`([^`]+)`/g).map((N,n)=>n%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:N},n):N):null}const G="test-auto-submit";function Ee(){try{const x=localStorage.getItem(G);return x===null?!0:x==="true"}catch{return!0}}function Re(x){localStorage.setItem(G,String(x))}function us(){const{channelId:x}=me(),[J,N]=xe(),[n,ee]=h.useState(null),[y,w]=h.useState("loading"),[p,se]=h.useState([]),[u,S]=h.useState(0),[c,q]=h.useState({}),[F,te]=h.useState(0),[t,D]=h.useState(null),[k,re]=h.useState(Ee),[b,v]=h.useState(null),[I,T]=h.useState(new Set),[f,ne]=h.useState("all");h.useEffect(()=>{x&&ye(x).then(s=>{s?(ee(s),w("ready")):w("loading")})},[x]),h.useEffect(()=>{if(y==="in-progress")return()=>{}},[y,F]);const E=h.useCallback(()=>{if(!n)return;const s=Ne(n,15);se(s),q({}),S(0),te(Date.now()),D(null),w("in-progress")},[n]),r=p[u],C=we(n?.id||""),g=n?K(n.channelId):K("default"),$=n&&C?ve(n,C):!1,ae=s=>{if(!r)return;const a=c[r.id]||[];if(r.type==="single"){const i={...c,[r.id]:[s]};if(q(i),k){const d=r.options.find(o=>o.isCorrect)?.id===s;v(d?"correct":"incorrect"),setTimeout(()=>{v(null),u<p.length-1&&S(u+1)},600)}}else a.includes(s)?q({...c,[r.id]:a.filter(i=>i!==s)}):q({...c,[r.id]:[...a,s]})},oe=()=>{const s=!k;re(s),Re(s)},ie=()=>{u<p.length-1&&S(u+1)},le=()=>{if(!r||r.type!=="multiple")return;const s=c[r.id]||[];if(s.length===0)return;const a=r.options.filter(o=>o.isCorrect).map(o=>o.id),i=a.every(o=>s.includes(o)),l=s.every(o=>a.includes(o));v(i&&l?"correct":"incorrect"),setTimeout(()=>{v(null),u<p.length-1&&S(u+1)},800)},de=()=>{u>0&&S(u-1)},B=()=>{if(!n)return;const s=ke({...n,questions:p},c);D(s);const a={testId:n.id,startedAt:new Date(F).toISOString(),completedAt:new Date().toISOString(),answers:c,score:s.score,passed:s.passed};$e(n.id,n.channelId,a,n.version),w("review"),s.passed?H.celebrate():H.disappointed()},R=()=>p.map(s=>{const a=c[s.id]||[],i=s.options.filter(o=>o.isCorrect),l=i.map(o=>o.id);let d=!1;if(s.type==="single")d=a.length===1&&l.includes(a[0]);else{const o=l.every(O=>a.includes(O)),j=a.every(O=>l.includes(O));d=o&&j&&a.length>0}return{question:s,userAnswers:a,correctOptions:i,isCorrect:d}}),ce=Object.keys(c).length;return y==="loading"||!n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:n?"Loading test...":"No test available for this channel yet"}),e.jsx("button",{onClick:()=>N("/"),className:"mt-4 text-primary hover:underline text-sm",children:"Go back home"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:`${n.title} | Code Reels`,description:n.description,canonical:`https://open-interview.github.io/test/${x}`}),e.jsx(je,{children:e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono w-full overflow-x-hidden",children:[y==="ready"&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 w-full overflow-x-hidden",children:e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`max-w-md w-full border bg-card rounded-lg p-6 relative overflow-hidden ${$?"border-amber-500/50":"border-border"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${g.gradient} opacity-30`}),e.jsxs("div",{className:"relative z-10",children:[$&&e.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-500",children:"Pass Expired!"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New questions added - retake to recertify"})]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl ${g.secondary} flex items-center justify-center mx-auto mb-4 shadow-lg ${g.glow}`,children:e.jsx("span",{className:"text-3xl",children:g.icon})}),e.jsx("h1",{className:`text-xl font-bold mb-2 ${g.primary}`,children:n.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),n.version>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-2 px-2 py-0.5 bg-primary/20 text-primary text-xs rounded-full",children:[e.jsx(L,{className:"w-3 h-3"})," v",n.version," - Updated"]})]}),e.jsxs("div",{className:"space-y-3 mb-6 text-sm",children:[e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Questions"}),e.jsxs("span",{className:"font-bold",children:["15 (random from ",n.questions.length,")"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Passing Score"}),e.jsxs("span",{className:"font-bold",children:[n.passingScore,"%"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Question Types"}),e.jsx("span",{className:"font-bold",children:"Single & Multiple Choice"})]}),C&&!$&&e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded border border-green-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Your Best"}),e.jsxs("span",{className:"font-bold text-green-500",children:[C.bestScore,"%"]})]}),C&&$&&e.jsxs("div",{className:"flex justify-between p-2 bg-amber-500/10 rounded border border-amber-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Previous Best"}),e.jsxs("span",{className:"font-bold text-amber-500",children:[C.bestScore,"% (expired)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:E,className:`w-full py-3 ${g.badge} text-white font-bold rounded hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg ${g.glow}`,children:$?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-5 h-5"})," Retake Test"]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5"})," Start Test"]})}),e.jsx("button",{onClick:()=>N(`/channel/${x}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm",children:"Back to Channel"})]})]})]})}),y==="in-progress"&&r&&e.jsxs("div",{className:"min-h-screen flex flex-col w-full overflow-x-hidden",children:[e.jsxs("header",{className:"border-b border-border p-2.5 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[u+1,"/",p.length]}),e.jsx("div",{className:"h-1 w-20 bg-muted/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(u+1)/p.length*100}%`}})})]}),e.jsxs("button",{onClick:oe,className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[9px] font-medium transition-all ${k?"bg-primary/20 text-primary border border-primary/30":"bg-muted/30 text-muted-foreground border border-transparent"}`,title:k?"Auto-advance ON":"Auto-advance OFF",children:[e.jsx(z,{className:`w-3 h-3 ${k?"text-primary":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Auto"})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[ce,"/",p.length]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto w-full overflow-x-hidden",children:e.jsx("div",{className:"max-w-2xl mx-auto w-full",children:e.jsx(W,{mode:"wait",children:e.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${r.type==="multiple"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:r.type==="multiple"?"Select all that apply":"Single choice"}),r.type==="multiple"&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",(c[r.id]||[]).length," selected)"]}),e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${r.difficulty==="beginner"?"bg-green-500/20 text-green-400":r.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:r.difficulty}),r.questionId&&e.jsx(be,{questionId:r.questionId,questionType:"test",size:"sm"}),r.questionId&&e.jsx(M,{questionId:r.questionId,className:"ml-auto"})]}),e.jsx("h2",{className:"text-lg font-bold mb-6",children:A(r.question)}),e.jsx("div",{className:"space-y-2",children:r.options.map((s,a)=>{const i=(c[r.id]||[]).includes(s.id),l=b&&s.isCorrect,d=b==="incorrect"&&i&&!s.isCorrect,o=r.type==="multiple";return e.jsx("button",{onClick:()=>ae(s.id),disabled:b!==null,className:`w-full p-4 text-left border rounded-lg transition-all ${l?"border-green-500 bg-green-500/20":d?"border-red-500 bg-red-500/20":i?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${b?"cursor-default":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`w-6 h-6 ${o?"rounded-md":"rounded-full"} border-2 flex items-center justify-center flex-shrink-0 ${l?"border-green-500 bg-green-500":d?"border-red-500 bg-red-500":i?"border-primary bg-primary":"border-muted-foreground/30"}`,children:[l&&e.jsx(Q,{className:"w-4 h-4 text-white"}),d&&e.jsx(_,{className:"w-4 h-4 text-white"}),!b&&i&&e.jsx(Q,{className:"w-4 h-4 text-primary-foreground"})]}),e.jsx("span",{className:"text-sm",children:A(s.text)})]})},s.id)})}),r.type==="multiple"&&!b&&e.jsx("p",{className:"mt-3 text-xs text-muted-foreground text-center",children:'Select all correct answers, then click "Confirm" to continue'})]},r.id)})})}),e.jsx("footer",{className:"border-t border-border p-2 w-full overflow-x-hidden",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between gap-2 w-full",children:[e.jsxs("button",{onClick:de,disabled:u===0,className:"flex items-center gap-0.5 px-2 py-1 text-xs disabled:opacity-30 hover:text-primary transition-colors shrink-0",children:[e.jsx(he,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Prev"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground shrink-0",children:[e.jsx("span",{className:"font-medium text-foreground",children:u+1}),e.jsx("span",{children:"/"}),e.jsx("span",{children:p.length}),e.jsxs("span",{className:"hidden sm:inline text-[10px]",children:["(",Object.keys(c).length," answered)"]})]}),u===p.length-1?r?.type==="multiple"?e.jsx("button",{onClick:()=>{const s=c[r.id]||[];if(s.length===0)return;const a=r.options.filter(o=>o.isCorrect).map(o=>o.id),i=a.every(o=>s.includes(o)),l=s.every(o=>a.includes(o));v(i&&l?"correct":"incorrect"),setTimeout(()=>{v(null),B()},800)},disabled:(c[r.id]||[]).length===0||b!==null,className:"px-2.5 py-1 bg-primary text-primary-foreground text-xs font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors shrink-0",children:"Submit"}):e.jsx("button",{onClick:B,className:"px-2.5 py-1 bg-primary text-primary-foreground text-xs font-bold rounded hover:bg-primary/90 transition-colors shrink-0",children:"Submit"}):r?.type==="multiple"?e.jsxs("button",{onClick:le,disabled:(c[r.id]||[]).length===0||b!==null,className:"flex items-center gap-0.5 px-2.5 py-1 text-xs bg-primary text-primary-foreground font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors shrink-0",children:[e.jsx("span",{className:"hidden sm:inline",children:"Confirm"}),e.jsx("span",{className:"sm:hidden",children:"OK"}),e.jsx(U,{className:"w-3.5 h-3.5"})]}):e.jsxs("button",{onClick:ie,className:"flex items-center gap-0.5 px-2 py-1 text-xs hover:text-primary transition-colors shrink-0",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(U,{className:"w-3.5 h-3.5"})]})]})})]}),y==="review"&&t&&e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background via-background to-muted/20 w-full overflow-x-hidden",children:[e.jsxs("header",{className:`border-b p-4 relative overflow-hidden ${t.passed?"border-green-500/30":"border-orange-500/30"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${t.passed?"from-green-500/10 via-emerald-500/5 to-teal-500/10":"from-orange-500/10 via-amber-500/5 to-yellow-500/10"}`}),e.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${t.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:"Review Answers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tap any question to expand details"})]})]}),e.jsx(m.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:`flex items-center gap-3 px-4 py-2 rounded-xl ${t.passed?"bg-green-500/20 border border-green-500/30":"bg-orange-500/20 border border-orange-500/30"}`,children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-2xl font-bold ${t.passed?"text-green-500":"text-orange-500"}`,children:[t.score,"%"]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[t.correct,"/",t.total," correct"]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border/50",children:[e.jsx("div",{className:"flex bg-muted/30 rounded-lg p-1 gap-1",children:["all","incorrect","correct"].map(s=>e.jsx("button",{onClick:()=>ne(s),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${f===s?s==="correct"?"bg-green-500 text-white shadow-sm":s==="incorrect"?"bg-red-500 text-white shadow-sm":"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:s==="all"?`All (${t.total})`:s==="correct"?`âœ“ ${t.correct}`:`âœ— ${t.total-t.correct}`},s))}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>{const s=R(),a=s.map((i,l)=>l).filter(i=>{const l=s[i];return f==="correct"?l.isCorrect:f==="incorrect"?!l.isCorrect:!0});I.size===a.length?T(new Set):T(new Set(a))},className:"px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground border border-border rounded-lg transition-all hover:bg-muted/30",children:I.size>0?"Collapse All":"Expand All"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-2",children:[R().map((s,a)=>({item:s,idx:a})).filter(({item:s})=>f==="correct"?s.isCorrect:f==="incorrect"?!s.isCorrect:!0).map(({item:s,idx:a})=>{const i=I.has(a);return e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.02},className:`rounded-xl overflow-hidden border transition-all duration-300 ${s.isCorrect?"border-green-500/30 hover:border-green-500/50":"border-red-500/30 hover:border-red-500/50"} ${i?"shadow-lg":"shadow-sm hover:shadow-md"}`,children:[e.jsxs("button",{onClick:()=>{T(l=>{const d=new Set(l);return d.has(a)?d.delete(a):d.add(a),d})},className:`w-full px-4 py-3 flex items-center gap-3 transition-all ${s.isCorrect?"bg-gradient-to-r from-green-500/10 to-transparent hover:from-green-500/20":"bg-gradient-to-r from-red-500/10 to-transparent hover:from-red-500/20"}`,children:[e.jsx(m.div,{animate:{scale:i?1.1:1,rotate:i?360:0},transition:{type:"spring",stiffness:200},className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${s.isCorrect?"bg-green-500 shadow-lg shadow-green-500/30":"bg-red-500 shadow-lg shadow-red-500/30"}`,children:s.isCorrect?e.jsx(Q,{className:"w-5 h-5 text-white"}):e.jsx(_,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsxs("span",{className:`text-sm font-bold ${s.isCorrect?"text-green-500":"text-red-500"}`,children:["Q",a+1]}),e.jsx("span",{className:`px-1.5 py-0.5 text-[9px] uppercase rounded-full font-medium ${s.question.difficulty==="beginner"?"bg-green-500/20 text-green-400":s.question.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:s.question.difficulty})]}),e.jsx("p",{className:`text-sm truncate ${i?"text-foreground":"text-muted-foreground"}`,children:s.question.question})]}),e.jsx(m.div,{animate:{rotate:i?180:0},transition:{duration:.2},className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-primary/20":"bg-muted/30"}`,children:e.jsx(Ae,{className:`w-5 h-5 ${i?"text-primary":"text-muted-foreground"}`})})]}),e.jsx(W,{children:i&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-card border-t border-border/50",children:[e.jsx("p",{className:"font-medium mb-4 leading-relaxed",children:A(s.question.question)}),e.jsx("div",{className:"space-y-2",children:s.question.options.map((l,d)=>{const o=s.userAnswers.includes(l.id),j=l.isCorrect;return e.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},className:`flex items-start gap-3 p-3 rounded-lg border transition-all ${j?"bg-green-500/10 border-green-500/40":o?"bg-red-500/10 border-red-500/40":"bg-muted/10 border-border/50"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${j?"bg-green-500 text-white":o?"bg-red-500 text-white":"bg-muted/50 text-muted-foreground"}`,children:j?e.jsx(pe,{className:"w-4 h-4"}):o?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx("span",{className:"text-xs font-medium",children:String.fromCharCode(65+d)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:`text-sm ${j?"text-green-400 font-medium":o?"text-red-400":"text-muted-foreground"}`,children:A(l.text)})}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[j&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-[9px] uppercase rounded-full font-medium",children:"âœ“ Correct"}),o&&!j&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-[9px] uppercase rounded-full font-medium",children:"Your Pick"})]})]},l.id)})}),s.question.explanation&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-4 p-3 rounded-lg border ${s.isCorrect?"bg-blue-500/10 border-blue-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(L,{className:`w-4 h-4 flex-shrink-0 mt-0.5 ${s.isCorrect?"text-blue-400":"text-amber-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold uppercase ${s.isCorrect?"text-blue-400":"text-amber-400"}`,children:s.isCorrect?"ðŸ’¡ Why this is correct":"ðŸ“š Learn from this"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.question.explanation})]})]})}),s.question.questionId&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("a",{href:`/channel/${n.channelId}?q=${s.question.questionId}`,className:"inline-flex items-center gap-1.5 text-xs text-primary hover:text-primary/80 transition-colors",children:[e.jsx(Te,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Study full question"})]}),e.jsx(M,{questionId:s.question.questionId})]})]})})})]},s.question.id)}),R().filter(s=>f==="correct"?s.isCorrect:f==="incorrect"?!s.isCorrect:!0).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center ${f==="correct"?"bg-green-500/20":"bg-red-500/20"}`,children:f==="correct"?e.jsx(P,{className:"w-8 h-8 text-green-500"}):e.jsx(Y,{className:"w-8 h-8 text-red-500"})}),e.jsx("p",{className:"text-muted-foreground",children:f==="correct"?"No correct answers to show":"No incorrect answers - Perfect score! ðŸŽ‰"})]})]})}),e.jsx("footer",{className:`border-t p-4 bg-background/95 backdrop-blur ${t.passed?"border-green-500/30":"border-orange-500/30"}`,children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-3",children:[e.jsxs("button",{onClick:E,className:"flex-1 py-3 border border-border rounded-xl font-medium hover:bg-muted/50 transition-all flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>w("completed"),className:`flex-1 py-3 font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg ${t.passed?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-green-500/30 hover:shadow-green-500/50":"bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-orange-500/30 hover:shadow-orange-500/50"}`,children:[e.jsx(P,{className:"w-4 h-4"})," View Results"]})]})})]}),y==="completed"&&t&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 w-full overflow-x-hidden",children:e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full border border-border bg-card rounded-lg p-6 relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.passed?"from-green-500/20 via-emerald-500/10 to-teal-500/20":"from-orange-500/20 via-amber-500/10 to-yellow-500/20"} opacity-50`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:`w-20 h-20 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-lg ${t.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:t.passed?e.jsx(P,{className:"w-10 h-10 text-white"}):e.jsx(Y,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold mb-1",children:t.passed?"ðŸŽ‰ Congratulations!":"Keep Practicing!"}),e.jsx("p",{className:"text-muted-foreground",children:t.passed?"You passed the test!":`You need ${n.passingScore}% to pass`})]}),e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted/20"}),e.jsx(m.circle,{cx:"64",cy:"64",r:"56",fill:"none",stroke:t.passed?"#22c55e":"#f97316",strokeWidth:"8",strokeLinecap:"round",initial:{strokeDasharray:"0 352"},animate:{strokeDasharray:`${t.score/100*352} 352`},transition:{duration:1,delay:.3}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs(m.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:`text-3xl font-bold ${t.passed?"text-green-500":"text-orange-500"}`,children:[t.score,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.correct,"/",t.total]})]})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correct Answers"}),e.jsx("span",{className:"font-bold text-green-500",children:t.correct})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Incorrect"}),e.jsx("span",{className:"font-bold text-red-500",children:t.total-t.correct})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("a",{href:Ce(n.channelName,t.score,t.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${t.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(Z,{className:"w-4 h-4"})," Share on X"]}),e.jsxs("a",{href:Se(n.channelName,t.score,t.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${t.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(Z,{className:"w-4 h-4"})," Share"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>w("review"),className:`w-full py-2 font-bold rounded transition-all flex items-center justify-center gap-2 ${t.passed?"bg-green-500 text-white hover:bg-green-600":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:[e.jsx(X,{className:"w-4 h-4"})," Review Answers"]}),e.jsxs("button",{onClick:E,className:`w-full py-2 border font-bold rounded transition-all flex items-center justify-center gap-2 ${t.passed?"border-green-500 text-green-500 hover:bg-green-500/10":"border-primary text-primary hover:bg-primary/10"}`,children:[e.jsx(V,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>N(`/channel/${x}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"})," Back to Channel"]})]})]})]})})]})})]})}export{us as default};
