import{c as i,r as n,a7 as k,i as S}from"./index-D5IX74-T.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_=i("chart-column",p);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],w=i("square",y),o="user-preferences",l={role:null,subscribedChannels:[],onboardingComplete:!1,createdAt:new Date().toISOString()};function x(){const[r,t]=n.useState(()=>{if(typeof window>"u")return l;try{const e=localStorage.getItem(o);if(e)return JSON.parse(e)}catch(e){console.error("Failed to load preferences:",e)}return l});n.useEffect(()=>{try{localStorage.setItem(o,JSON.stringify(r))}catch(e){console.error("Failed to save preferences:",e)}},[r]);const u=n.useCallback(e=>{const a=k(e).map(c=>c.id);t(c=>({...c,role:e,subscribedChannels:a,onboardingComplete:!0}))},[]),d=n.useCallback(e=>{t(s=>s.subscribedChannels.includes(e)?s:{...s,subscribedChannels:[...s.subscribedChannels,e]})},[]),b=n.useCallback(e=>{t(s=>({...s,subscribedChannels:s.subscribedChannels.filter(a=>a!==e)}))},[]),C=n.useCallback(e=>{t(s=>s.subscribedChannels.includes(e)?{...s,subscribedChannels:s.subscribedChannels.filter(a=>a!==e)}:{...s,subscribedChannels:[...s.subscribedChannels,e]})},[]),h=n.useCallback(e=>r.subscribedChannels.includes(e),[r.subscribedChannels]),f=n.useCallback(()=>S.filter(e=>r.subscribedChannels.includes(e.id)),[r.subscribedChannels]),m=n.useCallback(()=>{t(l),localStorage.removeItem(o)},[]),g=n.useCallback(()=>{const e=["system-design","algorithms","frontend","backend","database","devops"];t(s=>({...s,subscribedChannels:e,onboardingComplete:!0}))},[]);return{preferences:r,setRole:u,subscribeChannel:d,unsubscribeChannel:b,toggleSubscription:C,isSubscribed:h,getSubscribedChannels:f,resetPreferences:m,skipOnboarding:g,needsOnboarding:!r.onboardingComplete}}export{_ as C,w as S,x as u};
