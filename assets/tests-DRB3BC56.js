const g="test-progress";let i=null;async function p(){if(i)return i;try{const e=await fetch("/data/tests.json");return e.ok?(i=await e.json(),i||[]):[]}catch{return[]}}async function S(e){return(await p()).find(t=>t.channelId===e)||null}function f(){try{const e=localStorage.getItem(g);return e?JSON.parse(e):{}}catch{return{}}}function m(e){return f()[e]||null}function b(e,s,t){const n=f();n[e]||(n[e]={testId:e,channelId:s,attempts:[],bestScore:0,passed:!1}),n[e].attempts.push(t),n[e].lastAttemptAt=t.completedAt,t.score!==void 0&&(t.score>n[e].bestScore&&(n[e].bestScore=t.score),t.passed&&(n[e].passed=!0)),localStorage.setItem(g,JSON.stringify(n))}function w(e,s){let t=0;const n=e.questions.length;e.questions.forEach(a=>{const l=s[a.id]||[],o=a.options.filter(c=>c.isCorrect).map(c=>c.id);if(a.type==="single")l.length===1&&o.includes(l[0])&&t++;else{const c=o.every(u=>l.includes(u)),d=l.every(u=>o.includes(u));c&&d&&l.length>0&&t++}});const r=Math.round(t/n*100);return{score:r,correct:t,total:n,passed:r>=e.passingScore}}function h(e){const s=[...e];for(let t=s.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[s[t],s[n]]=[s[n],s[t]]}return s}function T(e,s=20){return h(e.questions).slice(0,Math.min(s,e.questions.length)).map(r=>({...r,options:h(r.options)}))}function y(e,s,t){const r=`${t?"âœ…":"ðŸ“Š"} I scored ${s}% on the ${e} test on Code Reels!`;return`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}&url=${encodeURIComponent("https://open-interview.github.io/")}`}function v(e,s,t){return`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent("https://open-interview.github.io/")}`}function A(){const e=f(),s=Object.values(e),t=s.length,n=s.filter(o=>o.passed).length,r=s.reduce((o,c)=>o+c.attempts.length,0),a=s.map(o=>o.bestScore).filter(o=>o>0),l=a.length>0?Math.round(a.reduce((o,c)=>o+c,0)/a.length):0;return{totalTests:t,passedTests:n,totalAttempts:r,averageScore:l}}export{T as a,m as b,y as c,v as d,w as e,f,S as g,A as h,p as l,b as s};
