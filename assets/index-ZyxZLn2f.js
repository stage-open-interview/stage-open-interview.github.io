import{aF as tt,aG as et,aH as nt,aI as at,aJ as Y,aK as st,aL as it,aM as rt,aN as ot,aO as lt,aP as ut,aQ as ct,aR as ft,aS as mt,aT as ht,aU as pt,aV as gt,aW as j,aX as dt,aY as yt,aZ as At}from"./index-Bb5bc9Dq.js";const St=(t,e,n)=>{const a=e-t;return((n-t)%a+a)%a+t};function Z(t,e){return tt(t)?t[St(0,t.length,e)]:t}class Et{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let a=0;a<this.animations.length;a++)this.animations[a][e]=n}attachTimeline(e){const n=this.animations.map(a=>a.attachTimeline(e));return()=>{n.forEach((a,s)=>{a&&a(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return J(this.animations,"duration")}get iterationDuration(){return J(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function J(t,e){let n=0;for(let a=0;a<t.length;a++){const s=t[a][e];s!==null&&s>n&&(n=s)}return n}class Vt extends Et{then(e,n){return this.finished.finally(e).then(()=>{})}}function C(t){return typeof t=="object"&&!Array.isArray(t)}function $(t,e,n,a){return typeof t=="string"&&C(e)?et(t,n,a):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function vt(t,e,n){return t*(e+1)}function Q(t,e,n,a){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):a.get(e)??t}function Tt(t,e,n){for(let a=0;a<t.length;a++){const s=t[a];s.at>e&&s.at<n&&(at(t,s),a--)}}function bt(t,e,n,a,s,o){Tt(t,s,o);for(let i=0;i<e.length;i++)t.push({value:e[i],at:nt(s,o,a[i]),easing:Z(n,i)})}function Dt(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Mt(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Ot="easeInOut";function xt(t,{defaultTransition:e={},...n}={},a,s){const o=e.duration||.3,i=new Map,l=new Map,p={},S=new Map;let D=0,u=0,w=0;for(let T=0;T<t.length;T++){const m=t[T];if(typeof m=="string"){S.set(m,u);continue}else if(!Array.isArray(m)){S.set(m.name,Q(u,m.at,D,S));continue}let[v,h,c={}]=m;c.at!==void 0&&(u=Q(u,c.at,D,S));let f=0;const b=(g,d,E,M=0,O=0)=>{const r=Gt(g),{delay:L=0,times:y=st(r),type:B="keyframes",repeat:F,repeatType:Rt,repeatDelay:zt=0,...q}=d;let{ease:V=e.ease||"easeOut",duration:A}=d;const W=typeof L=="function"?L(M,O):L,P=r.length,R=ot(B)?B:s?.[B||"keyframes"];if(P<=2&&R){let x=100;if(P===2&&Ft(r)){const G=r[1]-r[0];x=Math.abs(G)}const K={...q};A!==void 0&&(K.duration=lt(A));const N=it(K,x,R);V=N.ease,A=N.duration}A??(A=o);const z=u+W;y.length===1&&y[0]===0&&(y[1]=1);const H=y.length-r.length;if(H>0&&rt(y,H),r.length===1&&r.unshift(null),F){A=vt(A,F);const x=[...r],K=[...y];V=Array.isArray(V)?[...V]:[V];const N=[...V];for(let G=0;G<F;G++){r.push(...x);for(let I=0;I<x.length;I++)y.push(K[I]+(G+1)),V.push(I===0?"linear":Z(N,I-1))}Dt(y,F)}const _=z+A;bt(E,r,V,y,z,_),f=Math.max(W+A,f),w=Math.max(_,w)};if(Y(v)){const g=U(v,l);b(h,c,X("default",g))}else{const g=$(v,h,a,p),d=g.length;for(let E=0;E<d;E++){h=h,c=c;const M=g[E],O=U(M,l);for(const r in h)b(h[r],It(c,r),X(r,O),E,d)}}D=u,u+=f}return l.forEach((T,m)=>{for(const v in T){const h=T[v];h.sort(Mt);const c=[],f=[],b=[];for(let d=0;d<h.length;d++){const{at:E,value:M,easing:O}=h[d];c.push(M),f.push(ut(0,w,E)),b.push(O||"easeOut")}f[0]!==0&&(f.unshift(0),c.unshift(c[0]),b.unshift(Ot)),f[f.length-1]!==1&&(f.push(1),c.push(null)),i.has(m)||i.set(m,{keyframes:{},transition:{}});const g=i.get(m);g.keyframes[v]=c,g.transition[v]={...e,duration:w,ease:b,times:f,...n}}}),i}function U(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function X(t,e){return e[t]||(e[t]=[]),e[t]}function Gt(t){return Array.isArray(t)?t:[t]}function It(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const wt=t=>typeof t=="number",Ft=t=>t.every(wt);function Kt(t,e){return t in e}class Nt extends ct{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(Kt(n,e)){const a=e[n];if(typeof a=="string"||typeof a=="number")return a}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return ft()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function jt(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=mt(t)&&!ht(t)?new pt(e):new gt(e);n.mount(t),j.set(t,n)}function Lt(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Nt(e);n.mount(t),j.set(t,n)}function Bt(t,e){return Y(t)||typeof t=="number"||typeof t=="string"&&!C(e)}function k(t,e,n,a){const s=[];if(Bt(t,e))s.push(dt(t,C(e)&&e.default||e,n&&(n.default||n)));else{const o=$(t,e,a),i=o.length;for(let l=0;l<i;l++){const p=o[l],S=p instanceof Element?jt:Lt;j.has(p)||S(p);const D=j.get(p),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(l,i)),s.push(...yt(D,{...e,transition:u},{}))}}return s}function Ct(t,e,n){const a=[];return xt(t,e,n,{spring:At}).forEach(({keyframes:o,transition:i},l)=>{a.push(...k(l,o,i))}),a}function Wt(t){return Array.isArray(t)&&t.some(Array.isArray)}function Pt(t){function e(n,a,s){let o=[],i;if(Wt(n))o=Ct(n,a,t);else{const{onComplete:p,...S}=s||{};typeof p=="function"&&(i=p),o=k(n,a,S,t)}const l=new Vt(o);return i&&l.finished.then(i),l}return e}const _t=Pt();export{_t as a};
