import{a8 as d,a9 as a,r as f,aa as m,ab as p,ac as h,ad as A,ae as C,af as i}from"./index-droZKZMs.js";function V(...t){const n=!Array.isArray(t[0]),e=n?0:-1,o=t[0+e],s=t[1+e],u=t[2+e],c=t[3+e],r=d(s,u,c);return n?r(o):r}function x(t){const n=a(()=>p(t)),{isStatic:e}=f.useContext(m);if(e){const[,o]=f.useState(t);f.useEffect(()=>n.on("change",o),[])}return n}function y(t,n){const e=x(n()),o=()=>e.set(n());return o(),h(()=>{const s=()=>C.preRender(o,!1,!0),u=t.map(c=>c.on("change",s));return()=>{u.forEach(c=>c()),A(o)}}),e}function E(t){i.current=[],t();const n=y(i.current,t);return i.current=void 0,n}function b(t,n,e,o){if(typeof t=="function")return E(t);if(e!==void 0&&!Array.isArray(e)&&typeof n!="function")return k(t,n,e,o);const c=typeof n=="function"?n:V(n,e,o);return Array.isArray(t)?l(t,c):l([t],([r])=>c(r))}function l(t,n){const e=a(()=>[]);return y(t,()=>{e.length=0;const o=t.length;for(let s=0;s<o;s++)e[s]=t[s].get();return n(e)})}function k(t,n,e,o){const s=a(()=>Object.keys(e)),u=a(()=>({}));for(const c of s)u[c]=b(t,n,e[c],o);return u}export{b as a,x as u};
