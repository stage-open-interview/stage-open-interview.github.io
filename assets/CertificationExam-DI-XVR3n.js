import{u as ue,N as he,r as i,j as e,D as V,k as fe,m as q,B as Z,A as U,C as pe,T as ee,p as ge}from"./index-CkhVBA_0.js";import{g as be}from"./certifications-config-DDgXicH7.js";import{g as je,b as Ne,a as ve}from"./certification-questions-CQ4bllu-.js";import{S as ye}from"./SEOHead-DazwDgHF.js";import{A as we}from"./arrow-left-DekX-5Xk.js";import{L as se}from"./lightbulb-BK2IQ5cY.js";import{C as G}from"./clock-xqr71Z3c.js";import{P as te}from"./play-CGWatA9W.js";import{P as Ce}from"./pause-Bzx6lswv.js";import{F as X}from"./flag-DYVxpPr3.js";import{C as ke}from"./circle-x-DM78kEKh.js";import{C as Se}from"./chevron-left-CE3D8Fpb.js";import{R as _}from"./rotate-ccw-DvTFtHdO.js";import{T as $e}from"./target-CTH2rqPk.js";import{C as J}from"./chart-column-DFiEUCGg.js";import"./progressive-quiz-Cb_l7al6.js";function Ue(){const[,p]=ue(),[,l]=he("/certification/:id/exam"),s=l?.id,c=s?be(s):void 0,r=s?ve(s):void 0,y=s?je(s):[],[x,N]=i.useState("setup"),[d,n]=i.useState("practice"),[w,B]=i.useState(10),[u,I]=i.useState([]),[h,C]=i.useState(0),[m,F]=i.useState([]),[D,k]=i.useState(null),[Q,S]=i.useState(!1),[L,$]=i.useState(new Set),[M,f]=i.useState(0),[o,g]=i.useState(!1),[b,E]=i.useState(Date.now());i.useEffect(()=>{if(x!=="active"||d!=="timed"||o)return;const t=setInterval(()=>{f(a=>a<=1?(clearInterval(t),K(),0):a-1)},1e3);return()=>clearInterval(t)},[x,d,o]);const j=u[h],W=m.some(t=>t.questionId===j?.id),re=m.find(t=>t.questionId===j?.id),ae=i.useCallback(()=>{const t=Ne(s,w);if(I(t),C(0),F([]),k(null),S(!1),$(new Set),E(Date.now()),d==="timed"&&r){const a=r.timeLimit*60/r.totalQuestions;f(Math.round(a*w))}N("active")},[s,w,d,r]),ie=i.useCallback(t=>{if(!j||W)return;const a=j.options.find(R=>R.isCorrect),v=t===a?.id,z=Math.round((Date.now()-b)/1e3),O={questionId:j.id,selectedOptionId:t,isCorrect:v,timeSpent:z};F(R=>[...R,O]),k(t),d==="practice"&&S(!0)},[j,W,b,d]),ne=i.useCallback(()=>{h<u.length-1&&(C(t=>t+1),k(null),S(!1),E(Date.now()))},[h,u.length]),le=i.useCallback(()=>{if(h>0){C(a=>a-1);const t=m.find(a=>a.questionId===u[h-1]?.id);k(t?.selectedOptionId||null),S(!1)}},[h,m,u]),oe=i.useCallback(t=>{C(t);const a=m.find(v=>v.questionId===u[t]?.id);k(a?.selectedOptionId||null),S(!1),E(Date.now())},[m,u]),ce=i.useCallback(()=>{$(t=>{const a=new Set(t);return a.has(h)?a.delete(h):a.add(h),a})},[h]),K=i.useCallback(()=>{N("results")},[]),de=i.useMemo(()=>{const t=m.filter(P=>P.isCorrect).length,a=u.length,v=a>0?Math.round(t/a*100):0,z=r?v>=r.passingScore:v>=70,O=m.reduce((P,T)=>P+T.timeSpent,0),R=m.length>0?Math.round(O/m.length):0,Y={};return r&&r.domains.forEach(P=>{const T=u.filter(A=>A.domain===P.id),H=m.filter(A=>T.some(xe=>xe.id===A.questionId)).filter(A=>A.isCorrect).length;Y[P.id]={correct:H,total:T.length,percentage:T.length>0?Math.round(H/T.length*100):0}}),{correct:t,total:a,percentage:v,passed:z,totalTime:O,avgTime:R,domainResults:Y}},[m,u,r]),me=t=>{const a=Math.floor(t/60),v=t%60;return`${a}:${v.toString().padStart(2,"0")}`};return c?y.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(fe,{className:"w-16 h-16 mx-auto mb-4 text-amber-500"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Questions Coming Soon"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["We're preparing certification-specific questions for ",c.name,". In the meantime, try the general practice mode."]}),e.jsx("button",{onClick:()=>p(`/certification/${s}`),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Go to Practice Mode"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{title:`${c.name} Exam Practice`,description:`Practice exam for ${c.name} certification`}),e.jsxs("div",{className:"min-h-screen bg-background",children:[x==="setup"&&e.jsx(Pe,{certification:c,examConfig:r,totalQuestions:y.length,examMode:d,setExamMode:n,questionCount:w,setQuestionCount:B,onStart:ae,onBack:()=>p(`/certification/${s}`)}),x==="active"&&j&&e.jsx(Te,{certification:c,examMode:d,currentIndex:h,totalQuestions:u.length,currentQuestion:j,selectedOption:D,isAnswered:W,currentAnswer:re,showExplanation:Q,flaggedQuestions:L,timeRemaining:M,isPaused:o,answers:m,questions:u,onSelectOption:ie,onNext:ne,onPrev:le,onGoToQuestion:oe,onToggleFlag:ce,onTogglePause:()=>g(!o),onFinish:K,formatTime:me}),x==="results"&&e.jsx(Ee,{certification:c,examConfig:r,results:de,questions:u,answers:m,onRetry:()=>{N("setup")},onReview:()=>{n("review"),C(0),N("active")},onBack:()=>p(`/certification/${s}`)})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/30"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Certification not found"}),e.jsx("button",{onClick:()=>p("/certifications"),className:"text-primary hover:underline",children:"Browse certifications"})]})})}function Pe({certification:p,examConfig:l,totalQuestions:s,examMode:c,setExamMode:r,questionCount:y,setQuestionCount:x,onStart:N,onBack:d}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-4",children:[e.jsx(we,{className:"w-4 h-4"}),"Back to certification"]}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:e.jsx(V,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:p.name}),e.jsx("p",{className:"text-muted-foreground",children:p.provider})]}),l&&e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-primary"}),"Exam Details"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Questions"}),e.jsx("div",{className:"font-semibold",children:l.totalQuestions})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Time Limit"}),e.jsxs("div",{className:"font-semibold",children:[l.timeLimit," min"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Passing"}),e.jsxs("div",{className:"font-semibold",children:[l.passingScore,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h3",{className:"font-semibold",children:"Practice Mode"}),e.jsx("button",{onClick:()=>r("practice"),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${c==="practice"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${c==="practice"?"bg-primary text-white":"bg-muted"}`,children:e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Learning Mode"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"See explanations after each answer"})]})]})}),e.jsx("button",{onClick:()=>r("timed"),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${c==="timed"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${c==="timed"?"bg-primary text-white":"bg-muted"}`,children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Exam Simulation"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Timed test, results at the end"})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold mb-3",children:["Questions (",s," available)"]}),e.jsx("div",{className:"flex gap-2",children:[5,10,15,20].filter(n=>n<=s).map(n=>e.jsx("button",{onClick:()=>x(n),className:`flex-1 py-2 rounded-lg font-medium transition-all ${y===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:n},n))})]}),e.jsxs("button",{onClick:N,className:"w-full py-4 bg-gradient-to-r from-primary to-primary/80 text-primary-foreground rounded-xl font-semibold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity",children:[e.jsx(te,{className:"w-5 h-5"}),"Start Practice"]})]})})}function Te({certification:p,examMode:l,currentIndex:s,totalQuestions:c,currentQuestion:r,selectedOption:y,isAnswered:x,currentAnswer:N,showExplanation:d,flaggedQuestions:n,timeRemaining:w,isPaused:B,answers:u,questions:I,onSelectOption:h,onNext:C,onPrev:m,onGoToQuestion:F,onToggleFlag:D,onTogglePause:k,onFinish:Q,formatTime:S}){const[L,$]=i.useState(!1),M=n.has(s);return r.options.find(f=>f.isCorrect),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card/95 backdrop-blur border-b border-border",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:p.name})}),e.jsxs("div",{className:"flex items-center gap-3",children:[l==="timed"&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${w<60?"bg-red-500/10 text-red-500":"bg-muted"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono font-semibold",children:S(w)}),e.jsx("button",{onClick:k,className:"ml-1",children:B?e.jsx(te,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>$(!L),className:"px-3 py-1.5 bg-muted rounded-lg text-sm font-medium",children:[s+1,"/",c]})]})]}),e.jsx("div",{className:"mt-2 h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(s+1)/c*100}%`}})})]})}),e.jsx(U,{children:L&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>$(!1),children:e.jsxs(q.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"absolute bottom-0 left-0 right-0 bg-card rounded-t-2xl p-4 max-h-[60vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-1 bg-muted rounded-full mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold",children:"Question Navigator"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:I.map((f,o)=>{const g=u.find(j=>j.questionId===I[o].id),b=o===s,E=n.has(o);return e.jsxs("button",{onClick:()=>{F(o),$(!1)},className:`relative aspect-square rounded-lg font-medium text-sm transition-all ${b?"bg-primary text-primary-foreground":g?g.isCorrect?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500":"bg-muted hover:bg-muted/80"}`,children:[o+1,E&&e.jsx(X,{className:"absolute top-0.5 right-0.5 w-3 h-3 text-amber-500"})]},o)})}),e.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-muted-foreground justify-center",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20"})," Correct"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500/20"})," Wrong"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-muted"})," Unanswered"]})]})]})})}),e.jsxs("main",{className:"flex-1 max-w-4xl mx-auto w-full px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full font-medium",children:r.domain.replace(/-/g," ")}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${r.difficulty==="beginner"?"bg-green-500/10 text-green-500":r.difficulty==="intermediate"?"bg-yellow-500/10 text-yellow-500":"bg-red-500/10 text-red-500"}`,children:r.difficulty}),e.jsx("button",{onClick:D,className:`ml-auto p-1.5 rounded-lg transition-colors ${M?"bg-amber-500/10 text-amber-500":"hover:bg-muted text-muted-foreground"}`,children:e.jsx(X,{className:"w-4 h-4"})})]}),e.jsx("h2",{className:"text-lg font-medium mb-6 leading-relaxed",children:r.question}),e.jsx("div",{className:"space-y-3 mb-6",children:r.options.map(f=>{const o=y===f.id,g=x&&(l==="practice"||l==="review"),b=f.isCorrect;return e.jsx("button",{onClick:()=>!x&&h(f.id),disabled:x&&l!=="review",className:`w-full p-4 text-left border-2 rounded-xl transition-all ${g?b?"border-green-500 bg-green-500/10":o?"border-red-500 bg-red-500/10":"border-border":o?"border-primary bg-primary/5":"border-border hover:border-primary/50"} ${x&&l!=="review"?"cursor-default":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${g&&b?"border-green-500 bg-green-500":g&&o&&!b?"border-red-500 bg-red-500":o?"border-primary bg-primary":"border-muted-foreground/30"}`,children:[g&&b&&e.jsx(pe,{className:"w-4 h-4 text-white"}),g&&o&&!b&&e.jsx(ke,{className:"w-4 h-4 text-white"}),!g&&o&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})]}),e.jsx("span",{className:"text-sm leading-relaxed",children:f.text})]})},f.id)})}),e.jsx(U,{children:d&&r.explanation&&e.jsx(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(se,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-500 mb-1",children:"Explanation"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.explanation})]})]})})})})]}),e.jsx("footer",{className:"sticky bottom-0 bg-card/95 backdrop-blur border-t border-border p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("button",{onClick:m,disabled:s===0,className:"flex items-center gap-2 px-4 py-2 bg-muted rounded-lg disabled:opacity-50",children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),s===c-1?e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-6 py-2 bg-primary text-primary-foreground rounded-lg font-medium",children:[e.jsx(ee,{className:"w-5 h-5"}),"Finish"]}):e.jsxs("button",{onClick:C,disabled:!x&&l==="practice",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg disabled:opacity-50",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(ge,{className:"w-5 h-5"})]})]})})]})}function Ee({certification:p,examConfig:l,results:s,questions:c,answers:r,onRetry:y,onReview:x,onBack:N}){return e.jsx("div",{className:"min-h-screen p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-8",children:[e.jsx("div",{className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center ${s.passed?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-rose-600"}`,children:s.passed?e.jsx(ee,{className:"w-12 h-12 text-white"}):e.jsx(_,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.passed?"ðŸŽ‰ Congratulations!":"Keep Practicing!"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s.passed?`You passed the ${p.name} practice exam!`:`You need ${l?.passingScore||70}% to pass. Keep studying!`}),e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:`${s.percentage*3.52} 352`,className:s.passed?"text-green-500":"text-red-500"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[s.percentage,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.correct,"/",s.total]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 text-center",children:[e.jsx($e,{className:"w-5 h-5 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:s.correct}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Correct"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 text-center",children:[e.jsx(G,{className:"w-5 h-5 mx-auto mb-2 text-primary"}),e.jsxs("div",{className:"text-2xl font-bold",children:[s.avgTime,"s"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Time"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 text-center",children:[e.jsx(J,{className:"w-5 h-5 mx-auto mb-2 text-primary"}),e.jsxs("div",{className:"text-2xl font-bold",children:[l?.passingScore||70,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pass Mark"})]})]}),l&&Object.keys(s.domainResults).length>0&&e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-primary"}),"Domain Performance"]}),e.jsx("div",{className:"space-y-3",children:l.domains.map(d=>{const n=s.domainResults[d.id];return!n||n.total===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:d.name}),e.jsxs("span",{className:`font-medium ${n.percentage>=70?"text-green-500":"text-red-500"}`,children:[n.correct,"/",n.total," (",n.percentage,"%)"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${n.percentage>=70?"bg-green-500":"bg-red-500"}`,style:{width:`${n.percentage}%`}})})]},d.id)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:x,className:"w-full py-3 bg-primary text-primary-foreground rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Review Answers"]}),e.jsxs("button",{onClick:y,className:"w-full py-3 bg-muted rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Try Again"]}),e.jsx("button",{onClick:N,className:"w-full py-3 text-muted-foreground hover:text-foreground transition-colors",children:"Back to Certification"})]})]})})}export{Ue as default};
