import{c as S,r as x,j as e,n as E,f as A,m as y,ah as B,O as _,F,Z as Y,ai as V,l as $,X,aj as z,B as G,ak as Q}from"./index-Df-g6eHu.js";import{k as U,a as H,b as O,r as Z,j as J}from"./spaced-repetition-DSAPBUPS.js";import{B as K,a as q,T as ee,C as te,G as se}from"./tag-DeYHYzBh.js";import{C as k}from"./clock-kDN6QvDj.js";import{T as D}from"./target-CX2gGI70.js";import{bF as re,bG as ae,bJ as P,bH as ne,bI as le}from"./index-CC0PdDAx.js";import{P as C}from"./play-BNfvUvw8.js";import{G as oe,C as ie}from"./GiscusComments-D4tEjCPB.js";import{E as ce}from"./external-link-CO0coFDM.js";import{F as de}from"./file-text-DRERxGpa.js";import{L as M}from"./lightbulb-D8Sv4a_1.js";import{C as me}from"./chevron-down-CHU9T3aH.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],pe=S("baby",xe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ge=S("hash",ue);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],L=S("youtube",he);function fe(t){return t?t.split(/`([^`]+)`/g).map((a,r)=>r%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:a},r):a):null}function be({difficulty:t}){const s="hidden sm:block absolute bottom-8 right-8 w-32 h-32 lg:w-40 lg:h-40 opacity-[0.06] pointer-events-none select-none z-0";return t==="beginner"?e.jsxs("svg",{className:s,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("circle",{cx:"40",cy:"42",r:"5"}),e.jsx("circle",{cx:"60",cy:"42",r:"5"}),e.jsx("path",{d:"M38 52 Q50 62 62 52",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"5",r:"4"}),e.jsx("rect",{x:"18",y:"38",width:"6",height:"14",rx:"2"}),e.jsx("rect",{x:"76",y:"38",width:"6",height:"14",rx:"2"})]}):t==="intermediate"?e.jsxs("svg",{className:s,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("rect",{x:"35",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("rect",{x:"55",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("line",{x1:"40",y1:"55",x2:"60",y2:"55",strokeWidth:"3",stroke:"currentColor"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("polygon",{points:"50,2 46,8 54,8"}),e.jsx("circle",{cx:"82",cy:"50",r:"8",strokeWidth:"2",stroke:"currentColor",fill:"none"}),e.jsx("circle",{cx:"82",cy:"50",r:"3"})]}):e.jsxs("svg",{className:s,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("ellipse",{cx:"40",cy:"42",rx:"6",ry:"7"}),e.jsx("ellipse",{cx:"60",cy:"42",rx:"6",ry:"7"}),e.jsx("circle",{cx:"42",cy:"41",r:"2",fill:"white"}),e.jsx("circle",{cx:"62",cy:"41",r:"2",fill:"white"}),e.jsx("path",{d:"M38 56 Q50 52 62 56",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("ellipse",{cx:"78",cy:"35",rx:"3",ry:"5"}),e.jsx("ellipse",{cx:"82",cy:"45",rx:"2",ry:"4"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"5",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"3",r:"3"}),e.jsx("polygon",{points:"85,20 80,30 84,30 79,42 88,28 84,28"})]})}function Pe({question:t,questionNumber:s,totalQuestions:a,isMarked:r,isCompleted:o,onToggleMark:l,onTapQuestion:n,timerEnabled:m,timeLeft:c}){const[d,f]=x.useState(null),[h,g]=x.useState(!1),[p,i]=x.useState(!1);x.useEffect(()=>{if(t?.id){const u=U(t.id,t.channel,t.difficulty);f(w=>w?.questionId===u.questionId&&w?.totalReviews===u.totalReviews?w:u),g(!1),i(u.totalReviews>0)}},[t?.id,t?.channel,t?.difficulty]);const b=u=>{if(!t)return;const w=Z(t.id,t.channel,t.difficulty,u);f(w),g(!0),i(!1)},N=()=>{if(!t)return;const u=J(t.id,t.channel,t.difficulty);f(u),i(!0)},j=(()=>{switch(t.difficulty){case"beginner":return{icon:Y,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/20",label:"Easy"};case"intermediate":return{icon:D,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/20",label:"Medium"};case"advanced":return{icon:F,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",label:"Hard"};default:return{icon:D,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",label:"Unknown"}}})(),R=j.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col px-3 sm:px-6 lg:px-12 py-3 sm:py-6 overflow-y-auto relative","data-testid":"question-panel",children:[e.jsx(be,{difficulty:t.difficulty}),e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6 lg:mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-1.5 px-2.5 py-1.5 bg-muted/50 border border-border rounded-lg",children:[e.jsx(ge,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:t.id})]}),e.jsx("div",{className:"flex items-center gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 bg-muted rounded-full sm:rounded-lg",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[s," ",e.jsx("span",{className:"text-muted-foreground/50",children:"/"})," ",a]})}),e.jsxs("div",{className:`flex items-center gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 rounded-full sm:rounded-lg ${j.bg} border ${j.border}`,children:[e.jsx(R,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${j.color}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${j.color}`,children:j.label})]}),o&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 bg-green-500/10 border border-green-500/20 rounded-full sm:rounded-lg",children:[e.jsx(E,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-green-500",children:"Done"})]}),t.relevanceScore!==void 0&&t.relevanceScore>=60&&e.jsxs("div",{className:`hidden sm:flex items-center gap-1.5 px-3 py-1.5 rounded-lg border ${t.relevanceScore>=80?"bg-green-500/10 border-green-500/20":"bg-yellow-500/10 border-yellow-500/20"}`,children:[e.jsx(A,{className:`w-4 h-4 ${t.relevanceScore>=80?"text-green-500":"text-yellow-500"}`}),e.jsxs("span",{className:`text-sm font-medium ${t.relevanceScore>=80?"text-green-500":"text-yellow-500"}`,children:[t.relevanceScore,"% relevant"]})]})]}),e.jsx("button",{onClick:l,className:`p-2 sm:p-2.5 rounded-full sm:rounded-lg transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"bg-muted text-muted-foreground hover:text-primary hover:bg-primary/5 border border-transparent"}`,title:r?"Remove bookmark":"Bookmark question",children:e.jsx(K,{className:`w-5 h-5 sm:w-6 sm:h-6 ${r?"fill-current":""}`})})]}),e.jsxs("div",{className:`flex-1 flex flex-col justify-center max-w-3xl mx-auto w-full ${n?"cursor-pointer lg:cursor-default":""}`,onClick:n,children:[t.companies&&t.companies.length>0&&e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4 flex-wrap",children:[e.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground"}),t.companies.map((u,w)=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-500/10 text-blue-500 text-xs sm:text-sm font-medium rounded-full",children:u},w))]}),e.jsx(y.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`font-bold text-foreground leading-snug sm:leading-normal ${t.question.length>200?"text-base sm:text-lg lg:text-xl":t.question.length>100?"text-lg sm:text-xl lg:text-2xl":"text-xl sm:text-2xl lg:text-3xl"}`,children:fe(t.question)}),e.jsx("div",{className:"mt-3 sm:mt-4 lg:mt-6",children:e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground uppercase tracking-wider font-medium",children:t.subChannel})}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-wrap gap-1.5 sm:gap-2",children:[t.tags.slice(0,6).map(u=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-muted text-[10px] sm:text-xs font-mono text-muted-foreground rounded-md border border-border",children:B(u)},u)),t.tags.length>6&&e.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground py-0.5 sm:py-1",children:["+",t.tags.length-6," more"]})]}),m&&c>0&&e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-6 sm:mt-8 inline-flex items-center gap-3 sm:gap-4 px-4 sm:px-6 py-3 sm:py-4 bg-primary/5 border border-primary/20 rounded-xl self-start",children:[e.jsx(k,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:"Time Remaining"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-mono font-bold text-primary tabular-nums",children:[String(Math.floor(c/60)).padStart(2,"0"),":",String(c%60).padStart(2,"0")]})]})]})]}),e.jsx("div",{className:"mt-auto pt-4 max-w-3xl mx-auto w-full flex justify-start mb-16 sm:mb-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 sm:gap-3 bg-purple-500/5 border border-purple-500/20 rounded-xl px-2.5 sm:px-3 py-1.5 sm:py-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-purple-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-semibold text-purple-500",children:"SRS"}),d&&e.jsx("span",{className:`text-[9px] sm:text-[10px] px-1.5 py-0.5 rounded-md ${O(d.masteryLevel)} bg-muted/50`,children:H(d.masteryLevel)})]}),h?e.jsx("span",{className:"text-[10px] sm:text-xs text-green-500 font-medium",children:"âœ“ Reviewed"}):p&&d?e.jsx("div",{className:"flex items-center gap-1",children:[{rating:"again",label:"ðŸ˜•",color:"bg-red-500/10 text-red-500 border-red-500/30 hover:bg-red-500/20"},{rating:"hard",label:"ðŸ¤”",color:"bg-orange-500/10 text-orange-500 border-orange-500/30 hover:bg-orange-500/20"},{rating:"good",label:"ðŸ‘",color:"bg-green-500/10 text-green-500 border-green-500/30 hover:bg-green-500/20"},{rating:"easy",label:"ðŸŽ¯",color:"bg-blue-500/10 text-blue-500 border-blue-500/30 hover:bg-blue-500/20"}].map(u=>e.jsx("button",{onClick:w=>{w.stopPropagation(),b(u.rating)},className:`w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-lg border text-xs sm:text-sm transition-colors ${u.color}`,title:u.rating,children:u.label},u.rating))}):e.jsx("button",{onClick:u=>{u.stopPropagation(),N()},className:"px-2 sm:px-2.5 py-0.5 sm:py-1 bg-purple-500 text-white text-[10px] sm:text-xs font-medium rounded-lg hover:bg-purple-600 transition-colors",children:"+ Add"})]})}),e.jsx("div",{className:"mt-4 sm:mt-6 text-center hidden sm:block",children:e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-xs font-mono",children:"â†’"})," or click the Answer tab to reveal"]})})]})}function T(t){if(!t)return null;const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const a of s){const r=t.match(a);if(r)return r[1]}return null}function ye(t){return t?.includes("/shorts/")||!1}function je({shortVideo:t,longVideo:s}){const[a,r]=x.useState(null),o=x.useRef(null),l=t?T(t):null,n=s?T(s):null;if(!l&&!n)return null;const m=()=>r(null);return x.useEffect(()=>{const c=d=>{d.key==="Escape"&&a&&m()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[a]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full clear-both",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-3",children:[l&&e.jsxs("button",{onClick:()=>r("short"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(L,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Quick"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," Under 60s"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]}),n&&e.jsxs("button",{onClick:()=>r("long"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx(L,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Deep Dive"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," 5-20 min"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]})]})}),typeof document<"u"&&V.createPortal(e.jsx($,{children:a&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 sm:p-8 lg:p-12",onClick:m,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-5xl mx-auto",onClick:c=>c.stopPropagation(),children:[e.jsxs("button",{onClick:m,className:"absolute -top-12 right-0 z-20 p-2 text-white hover:text-white/80 transition-colors",children:[e.jsx(X,{className:"w-6 h-6"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx("div",{className:`relative bg-black rounded-lg overflow-hidden border border-white/20 shadow-2xl ${a==="short"&&ye(t||"")?"max-w-sm mx-auto aspect-[9/16]":"w-full aspect-video"}`,children:e.jsx("iframe",{ref:o,src:`https://www.youtube.com/embed/${a==="short"?l:n}?autoplay=1&rel=0&playsinline=1`,title:a==="short"?"Quick Explanation":"Deep Dive Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-white/50",children:a==="short"?"âš¡ Quick Explanation":"ðŸ“š Deep Dive"})})]})})}),document.body)]})}function we(t){if(!t)return"";let s=t;s=s.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),s=s.replace(/([^\n`])(\s*```)/g,"$1\n```"),s=s.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),s=s.replace(/:\s*```/g,":\n\n```"),s=s.replace(/^\*\*\s*$/gm,""),s=s.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**");const a=s.split(`
`),r=[];for(let o=0;o<a.length;o++){let l=a[o];const n=(l.match(/\*\*/g)||[]).length;n%2===1&&(l.trim().startsWith("**")&&n===1?l=l.replace(/^\s*\*\*\s*/,""):l.trim().endsWith("**")&&n===1&&(l=l.replace(/\s*\*\*\s*$/,""))),r.push(l)}return s=r.join(`
`),s=s.replace(/^[â€¢Â·]\s*/gm,"- "),(s.includes("â€¢")||s.includes("Â·"))&&(s=s.split(`
`).map(n=>{const m=(n.match(/[â€¢Â·]/g)||[]).length;if(m>1||m===1&&!n.trim().startsWith("â€¢")&&!n.trim().startsWith("Â·")){const c=n.split(/[â€¢Â·]/).map(d=>d.trim()).filter(d=>d);if(c.length>1)return c.map(d=>`- ${d}`).join(`
`)}return n.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),s=s.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),s=s.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),s=s.replace(/\n{3,}/g,`

`),s=s.replace(/^\n+/,""),s}function I(t){if(!t||typeof t!="string")return!1;const s=t.trim();if(!s||s.length<10)return!1;const a=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],r=s.split(`
`)[0].toLowerCase().trim();if(!a.some(m=>r.startsWith(m.toLowerCase())))return!1;const l=s.split(`
`).filter(m=>{const c=m.trim().toLowerCase();return c&&!c.startsWith("%%")&&!a.some(d=>c.startsWith(d.toLowerCase()))});if(l.length<3)return!1;const n=s.toLowerCase();return!(n.includes("start")&&n.includes("end")&&l.length<=3||n.match(/\bstart\b/g)?.length===1&&n.match(/\bend\b/g)?.length===1&&l.length<=2)}function W(t){return t?t.split(/`([^`]+)`/g).map((a,r)=>r%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-cyan-500/20 text-cyan-300 rounded text-[0.9em] font-mono",children:a},r):a):null}function Ne({title:t,icon:s,children:a,defaultExpanded:r=!0,variant:o="default",badge:l}){const[n,m]=x.useState(r),c=typeof window<"u"&&window.innerWidth<640,d={default:"bg-card border-border",highlight:"bg-primary/5 border-primary/20",success:"bg-green-500/5 border-green-500/20",purple:"bg-purple-500/5 border-purple-500/20"},f={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs("div",{className:`rounded-xl sm:rounded-2xl border overflow-hidden ${d[o]}`,children:[e.jsxs("button",{onClick:()=>m(!n),className:"w-full flex items-center justify-between px-3 sm:px-4 lg:px-5 py-2.5 sm:py-3 lg:py-4 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:f[o],children:s}),e.jsx("span",{className:"font-semibold text-sm sm:text-base",children:t}),l&&e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-primary/10 text-primary text-[10px] sm:text-xs font-medium rounded",children:l})]}),e.jsx(me,{className:`w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground transition-transform ${n?"":"-rotate-90"}`})]}),c?n&&e.jsx("div",{className:"px-3 pb-3",children:a}):e.jsx($,{initial:!1,children:n&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-3 sm:px-4 lg:px-5 pb-3 sm:pb-4 lg:pb-5",children:a})})})]})}function ve({code:t,language:s}){const[a,r]=x.useState(!1),o=async()=>{await navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden border border-border bg-[#1e1e1e]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-1.5 sm:py-2 bg-muted/50 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary"}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:s||"code"})]}),e.jsx("button",{onClick:o,className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-0.5 sm:py-1 text-[10px] sm:text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded transition-colors",children:a?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-green-500",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(ne,{language:s||"text",style:le,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLines:!0,wrapLongLines:!0,className:"!text-xs sm:!text-sm !p-3 sm:!p-4",children:t})]})}function ke({question:t,hasTldr:s,hasDiagram:a,hasEli5:r,hasVideo:o}){const[l,n]=x.useState(null),m=a&&l!==!1,c=[];s&&c.push("tldr"),m&&c.push("diagram"),r&&c.push("eli5"),o&&c.push("video"),x.useCallback(()=>s?"tldr":l===null&&a?r?"eli5":o?"video":"diagram":c[0]||"tldr",[s,a,r,o,l,c]);const[d,f]=x.useState(()=>s?"tldr":r?"eli5":o?"video":"diagram");x.useEffect(()=>{l===!1&&d==="diagram"&&(s?f("tldr"):r?f("eli5"):o&&f("video"))},[l,d,s,r,o]);const h=x.useCallback(p=>{n(p)},[]);if(c.length===0&&l===!1)return null;if(c.length===0&&!s&&!r&&!o&&l===null)return e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-border bg-card p-4 text-center text-muted-foreground text-sm",children:"Loading..."});if(c.length===0)return null;const g={tldr:{label:"TL;DR",icon:e.jsx(M,{className:"w-4 h-4"}),color:"text-cyan-400"},diagram:{label:"Diagram",icon:e.jsx(se,{className:"w-4 h-4"}),color:"text-purple-400"},eli5:{label:"ELI5",icon:e.jsx(pe,{className:"w-4 h-4"}),color:"text-green-400"},video:{label:"Video",icon:e.jsx(C,{className:"w-4 h-4"}),color:"text-pink-400"}};return e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-white/10 bg-black/40 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-white/10 bg-black/20",children:c.map(p=>e.jsxs("button",{onClick:()=>f(p),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 sm:py-3 text-sm font-medium transition-all relative ${d===p?`${g[p].color} bg-white/5`:"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:[e.jsx("span",{className:d===p?g[p].color:"",children:g[p].icon}),e.jsx("span",{children:g[p].label}),d===p&&e.jsx(y.div,{layoutId:"activeTabIndicator",className:`absolute bottom-0 left-0 right-0 h-0.5 ${p==="tldr"?"bg-cyan-400":p==="diagram"?"bg-purple-400":p==="eli5"?"bg-green-400":"bg-pink-400"}`})]},p))}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-5",children:e.jsxs($,{mode:"wait",children:[d==="tldr"&&s&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-lg shrink-0",children:e.jsx(M,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed",children:W(t.answer)})]},"tldr"),d==="diagram"&&a&&e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(P,{chart:t.diagram,onRenderResult:h})},"diagram"),d==="eli5"&&r&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed",children:W(t.eli5||"")})]},"eli5"),d==="video"&&o&&e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(je,{shortVideo:t.videos?.shortVideo,longVideo:t.videos?.longVideo})},"video")]})})]})}function Ae({question:t,isCompleted:s}){const a=x.useRef(null),r=typeof window<"u"&&window.innerWidth<640,[o,l]=x.useState(null);x.useEffect(()=>{z.getByQuestionId(t.id).then(l)},[t.id]);const n=!!t.answer,m=!r&&I(t.diagram),c=!!t.eli5,d=!!(t.videos?.shortVideo||t.videos?.longVideo),f=n||m||c||d,h=x.useCallback(g=>{const p=we(g);return e.jsx(re,{remarkPlugins:[ae],components:{code({className:i,children:b}){const N=/language-(\w+)/.exec(i||""),v=N?N[1]:"",j=String(b).replace(/\n$/,"");return!N&&!String(b).includes(`
`)?e.jsx("code",{className:"px-1 sm:px-1.5 py-0.5 bg-primary/10 text-primary rounded text-[0.85em] font-mono",children:b}):v==="mermaid"?I(j)?e.jsx("div",{className:"my-4 sm:my-6",children:e.jsx(P,{chart:j})}):null:e.jsx("div",{className:"my-3 sm:my-4",children:e.jsx(ve,{code:j,language:v})})},p({children:i}){return e.jsx("p",{className:"mb-3 sm:mb-4 leading-relaxed text-foreground/90 text-sm sm:text-base",children:i})},h1({children:i}){return e.jsx("h1",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 mt-4 sm:mt-6 text-foreground border-b border-border pb-2",children:i})},h2({children:i}){return e.jsx("h2",{className:"text-sm sm:text-base lg:text-lg font-bold mb-2 sm:mb-3 mt-4 sm:mt-5 text-foreground",children:i})},h3({children:i}){return e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-2 mt-3 sm:mt-4 text-foreground/90",children:i})},strong({children:i}){return e.jsx("strong",{className:"font-semibold text-foreground",children:i})},ul({children:i}){return e.jsx("ul",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4 ml-1",children:i})},ol({children:i}){return e.jsx("ol",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4 ml-1 [counter-reset:list-counter]",children:i})},li({children:i,node:b}){const v=b?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-2 sm:gap-3 text-foreground/90 text-sm sm:text-base [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-0.5",children:v?e.jsx("span",{className:"text-xs sm:text-sm font-medium before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:i})]})},a({href:i,children:b}){return e.jsx("a",{href:i,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:b})},blockquote({children:i}){return e.jsx("blockquote",{className:"border-l-2 sm:border-l-4 border-primary/50 pl-3 sm:pl-4 py-1 sm:py-2 my-3 sm:my-4 bg-primary/5 text-muted-foreground italic text-sm sm:text-base",children:i})},table({children:i}){return e.jsx("div",{className:"my-3 sm:my-4 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-sm sm:text-base",children:i})})},th({children:i}){return e.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold bg-muted border border-border text-xs sm:text-sm",children:i})},td({children:i}){return e.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 border border-border text-sm sm:text-base",children:i})}},children:p})},[]);return e.jsx(y.div,{ref:a,initial:r?!1:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-background",children:e.jsxs("div",{className:"max-w-3xl lg:max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-3 sm:py-6 lg:py-8 pb-24 space-y-2.5 sm:space-y-4 lg:space-y-5",children:[f&&e.jsx(ke,{question:t,hasTldr:n,hasDiagram:m,hasEli5:c,hasVideo:d}),e.jsx(Ne,{title:"Full Explanation",icon:e.jsx(G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),defaultExpanded:!0,badge:t.explanation?`${Math.ceil(t.explanation.split(" ").length/200)} min read`:void 0,children:e.jsx("div",{className:"prose prose-sm sm:prose-base max-w-none",children:h(t.explanation)})}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 pt-2 sm:pt-3",children:[e.jsx(ee,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:t.tags.map(g=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-muted text-[10px] sm:text-xs font-mono text-muted-foreground rounded-full border border-border",children:B(g)},g))})]}),(t.sourceUrl||o)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.sourceUrl&&e.jsxs("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-muted hover:bg-muted/80 border border-border rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base",children:[e.jsx(ce,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"View Source"})]}),o&&e.jsxs("a",{href:`https://openstackdaily.github.io${o.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-cyan-500/10 hover:bg-cyan-500/20 border border-cyan-500/30 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base",children:[e.jsx(de,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-cyan-400"}),e.jsx("span",{className:"text-cyan-400",children:"Read Blog Post"})]})]}),e.jsx(oe,{questionId:t.id})]})})}function _e(t,s={}){const{minDistance:a=Q.MIN_SWIPE_DISTANCE,preventScroll:r=!1}=s,o=x.useRef(null),l=x.useRef(null),n=x.useRef(null),m=x.useRef(null),c=x.useCallback(h=>{n.current=null,m.current=null,o.current=h.targetTouches[0].clientX,l.current=h.targetTouches[0].clientY},[]),d=x.useCallback(h=>{if(n.current=h.targetTouches[0].clientX,m.current=h.targetTouches[0].clientY,r&&o.current!==null&&n.current!==null){const g=Math.abs(o.current-n.current),p=Math.abs((l.current??0)-(m.current??0));g>p&&h.preventDefault()}},[r]),f=x.useCallback(()=>{if(o.current===null||l.current===null||n.current===null||m.current===null)return;const h=o.current-n.current,g=l.current-m.current,p=Math.abs(h),i=Math.abs(g),b=p>i;b&&p>a?h>0?t.onSwipeLeft?.():t.onSwipeRight?.():!b&&i>a&&(g>0?t.onSwipeUp?.():t.onSwipeDown?.()),o.current=null,l.current=null,n.current=null,m.current=null},[t,a]);return{onTouchStart:c,onTouchMove:d,onTouchEnd:f}}export{Ae as A,Pe as Q,_e as u};
