import{u as ae,r as o,q as R,j as t,m,i as D,Z as re,X as B,T as se,A as ie,S as ne,n as oe}from"./index-4gP9q0LG.js";import{A as le}from"./AppLayout-CyTphitQ.js";import{S as ce}from"./SEOHead-D7_c4On_.js";import{S as de}from"./sparkles-GJsFnXoQ.js";import{B as N,a as me}from"./tag-CqrMsBxs.js";import{P as xe}from"./plus-BZ2_i4Jp.js";import{C as Q,T as ge}from"./use-unified-toast-CsB08-AT.js";import{C as J}from"./check-BPRyoBJz.js";import{S as he}from"./square-pen-2SkFAoLp.js";import{T as ue}from"./trash-2-9tXHZcMu.js";import{C as fe}from"./clock-d5bL_iwt.js";import{C as ye}from"./UnifiedNav-B2aXs9hO.js";import{R as pe}from"./rocket-CbA2cq79.js";import"./UnifiedSearch-D1W2emq4.js";import"./chart-column-w1Gl43-T.js";import"./user-Dpn1OLK3.js";function Fe(){const[,q]=ae(),[g,H]=o.useState("all"),[h,b]=o.useState([]),[T,W]=o.useState([]),[k,F]=o.useState([]),[Z,w]=o.useState(!1),[i,I]=o.useState("create"),[x,C]=o.useState(null),[u,P]=o.useState("channels"),[j,E]=o.useState(""),[l,y]=o.useState({name:"",channels:[],certifications:[]}),[c,p]=o.useState({name:"",channels:[],certifications:[]});o.useEffect(()=>{try{const e=localStorage.getItem("customLearningPaths");e&&b(JSON.parse(e))}catch(e){console.error("Failed to load custom paths:",e)}},[]),o.useEffect(()=>{async function e(){try{const r=await fetch("/data/certifications.json");if(r.ok){const n=await r.json();W(n)}}catch(a){console.error("Failed to load certifications:",a)}}e()},[]),o.useEffect(()=>{async function e(){try{const a=await fetch("/api/learning-paths");if(a.ok){const n=(await a.json()).map(s=>({id:s.id,name:s.title,icon:U(s.pathType),color:z(s.pathType),description:s.description,channels:JSON.parse(s.channels||"[]"),difficulty:s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1),duration:`${s.estimatedHours}h`,totalQuestions:JSON.parse(s.questionIds||"[]").length,jobs:s.learningObjectives?JSON.parse(s.learningObjectives).slice(0,3):[],skills:JSON.parse(s.tags||"[]").slice(0,5),salary:G(s.targetJobTitle),pathType:s.pathType,targetCompany:s.targetCompany,milestones:JSON.parse(s.milestones||"[]")}));F(n)}}catch(a){console.error("Failed to load curated paths:",a),F([])}}e()},[]);const U=e=>({"job-title":ye,company:me,skill:N,certification:oe})[e]||pe,z=e=>({"job-title":"from-blue-500 to-cyan-500",company:"from-green-500 to-emerald-500",skill:"from-purple-500 to-pink-500",certification:"from-orange-500 to-red-500"})[e]||"from-indigo-500 to-purple-500",G=e=>e?{"frontend-engineer":"$80k - $120k","backend-engineer":"$90k - $140k","fullstack-engineer":"$100k - $160k","devops-engineer":"$110k - $170k","data-engineer":"$95k - $150k","mobile-developer":"$85k - $130k"}[e]||"$80k - $150k":"",f=(()=>{try{const e=localStorage.getItem("activeLearningPaths");if(e)return JSON.parse(e).map(r=>{const n=h.find(A=>A.id===r);if(n)return{...n,type:"custom"};const s=k.find(A=>A.id===r);return s?{...s,type:"curated"}:null}).filter(Boolean)}catch{}return[]})(),S=e=>{try{const a=localStorage.getItem("activeLearningPaths"),r=a?JSON.parse(a):[];r.includes(e)||(r.push(e),localStorage.setItem("activeLearningPaths",JSON.stringify(r)),window.location.reload())}catch(a){console.error("Failed to activate path:",a)}},$=e=>{try{const a=localStorage.getItem("activeLearningPaths"),n=(a?JSON.parse(a):[]).filter(s=>s!==e);localStorage.setItem("activeLearningPaths",JSON.stringify(n)),window.location.reload()}catch(a){console.error("Failed to deactivate path:",a)}},V=e=>{if(confirm("Delete this path? This cannot be undone."))try{const a=h.filter(r=>r.id!==e);localStorage.setItem("customLearningPaths",JSON.stringify(a)),b(a),$(e)}catch(a){console.error("Failed to delete path:",a)}},X=()=>{if(!x||!c.name||c.channels.length===0&&c.certifications.length===0){alert("Please enter a name and select at least one channel or certification");return}const e=h.map(a=>a.id===x.id?{...a,name:c.name,channels:c.channels,certifications:c.certifications}:a);localStorage.setItem("customLearningPaths",JSON.stringify(e)),b(e),w(!1),C(null),p({name:"",channels:[],certifications:[]})},L=(e,a)=>{I(a),C(e),P("channels"),a==="create"?y({name:"",channels:[],certifications:[]}):a==="edit"&&p({name:e.name,channels:e.channels||[],certifications:e.certifications||[]}),w(!0)},v=()=>{w(!1),C(null),I("create"),E("")},K=e=>{p(a=>({...a,channels:a.channels.includes(e)?a.channels.filter(r=>r!==e):[...a.channels,e]}))},Y=e=>{p(a=>({...a,certifications:a.certifications.includes(e)?a.certifications.filter(r=>r!==e):[...a.certifications,e]}))},_=()=>{if(!l.name||l.channels.length===0&&l.certifications.length===0){alert("Please enter a name and select at least one channel or certification");return}const e={id:`custom-${Date.now()}`,name:l.name,channels:l.channels,certifications:l.certifications,createdAt:new Date().toISOString()},a=[...h,e];localStorage.setItem("customLearningPaths",JSON.stringify(a)),b(a),y({name:"",channels:[],certifications:[]}),v(),S(e.id)},ee=Object.values(R).filter(e=>e.name.toLowerCase().includes(j.toLowerCase())),te=T.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.provider.toLowerCase().includes(j.toLowerCase())),d=i==="view",O=i==="create"?l.channels:i==="edit"?c.channels:x?.channels||[],M=i==="create"?l.certifications:i==="edit"?c.certifications:x?.certifications||[];return t.jsxs(t.Fragment,{children:[t.jsx(ce,{title:"Learning Paths - CodeReels",description:"Choose your career path and start learning"}),t.jsxs(le,{children:[t.jsx("div",{className:"min-h-screen bg-background text-foreground",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[t.jsxs("h1",{className:"text-6xl md:text-7xl font-black mb-4",children:["Learning",t.jsx("br",{}),t.jsx("span",{className:"bg-gradient-to-r from-primary to-cyan-500 bg-clip-text text-transparent",children:"Paths"})]}),t.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:[f.length>0&&`${f.length} active • `,h.length," custom • ",k.length," curated"]})]}),t.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2",children:[{id:"all",label:"All Paths",icon:de},{id:"custom",label:"My Custom",icon:N},{id:"curated",label:"Curated",icon:D}].map(({id:e,label:a,icon:r})=>t.jsxs("button",{onClick:()=>H(e),className:`flex items-center gap-2 px-6 py-3 rounded-[16px] font-bold transition-all whitespace-nowrap ${g===e?"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground":"bg-muted/50 text-gray-600 dark:text-gray-400 hover:bg-muted"}`,children:[t.jsx(r,{className:"w-5 h-5"}),a]},e))}),t.jsx(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>L(null,"create"),className:"w-full p-8 bg-gradient-to-r from-primary/20 to-cyan-500/20 backdrop-blur-xl rounded-[24px] border-2 border-dashed border-primary/30 hover:border-primary/60 transition-all group mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-cyan-500 rounded-full flex items-center justify-center",children:t.jsx(xe,{className:"w-8 h-8 text-primary-foreground",strokeWidth:3})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-2xl font-bold mb-1",children:"Create Custom Path"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Build your own learning journey"})]})]}),t.jsx(Q,{className:"w-8 h-8 text-primary group-hover:translate-x-2 transition-transform"})]})}),f.length>0&&(g==="all"||g==="custom")&&t.jsxs("div",{className:"mb-12",children:[t.jsxs("h2",{className:"text-3xl font-black mb-6 flex items-center gap-3",children:[t.jsx(re,{className:"w-8 h-8 text-primary"}),"Active Paths"]}),t.jsx("div",{className:"grid gap-6",children:f.map(e=>{const a=e.icon||N;return e.type,t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative p-6 bg-gradient-to-br from-card to-card/50 backdrop-blur-xl rounded-[24px] border border-primary/30 hover:border-primary/60 transition-all group",children:[t.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 bg-primary text-primary-foreground rounded-full text-xs font-bold flex items-center gap-1",children:[t.jsx(J,{className:"w-3 h-3"}),"Active"]}),t.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${e.color||"from-purple-500 to-pink-500"} rounded-[16px] flex items-center justify-center`,children:t.jsx(a,{className:"w-8 h-8 text-foreground",strokeWidth:2.5})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-2xl font-bold mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description||`Created ${new Date(e.createdAt).toLocaleDateString()}`})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>q(`/channel/${e.channels[0]}`),className:"flex-1 py-3 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground rounded-[16px] font-bold hover:scale-105 transition-all",children:"Continue Learning"}),t.jsx("button",{onClick:()=>$(e.id),className:"px-4 py-3 bg-muted/50 hover:bg-muted rounded-[16px] transition-all",children:t.jsx(B,{className:"w-5 h-5"})})]})]},e.id)})})]}),(g==="all"||g==="custom")&&h.length>0&&t.jsxs("div",{className:"mb-12",children:[t.jsxs("h2",{className:"text-3xl font-black mb-6 flex items-center gap-3",children:[t.jsx(N,{className:"w-8 h-8 text-purple-400"}),"My Custom Paths"]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:h.map(e=>{const a=f.some(r=>r.id===e.id);return t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 bg-white dark:bg-gray-900 backdrop-blur-xl rounded-[24px] border border-gray-200 dark:border-gray-800 hover:border-primary/30 transition-all",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold",children:e.name}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:r=>{r.stopPropagation(),L(e,"edit")},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-[8px] transition-all",children:t.jsx(he,{className:"w-4 h-4 text-primary"})}),t.jsx("button",{onClick:r=>{r.stopPropagation(),V(e.id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-[8px] transition-all",children:t.jsx(ue,{className:"w-4 h-4 text-red-500"})})]})]}),t.jsx("div",{className:"space-y-2 mb-4",children:t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.channels.length," channels • ",e.certifications.length," certifications"]})}),t.jsx("button",{onClick:()=>a?$(e.id):S(e.id),className:`w-full py-3 rounded-[16px] font-bold transition-all ${a?"bg-muted text-foreground":"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground hover:scale-105"}`,children:a?"Deactivate":"Activate Path"})]},e.id)})})]}),(g==="all"||g==="curated")&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-black mb-6 flex items-center gap-3",children:[t.jsx(D,{className:"w-8 h-8 text-amber-400"}),"Curated Career Paths"]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:k.map(e=>{const a=e.icon,r=f.some(n=>n.id===e.id);return t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 bg-white dark:bg-gray-900 backdrop-blur-xl rounded-[24px] border border-gray-200 dark:border-gray-800 hover:border-primary/30 transition-all group cursor-pointer",onClick:()=>L(e,"view"),children:[t.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${e.color} rounded-[16px] flex items-center justify-center`,children:t.jsx(a,{className:"w-8 h-8 text-foreground",strokeWidth:2.5})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{children:[t.jsx(fe,{className:"w-3 h-3 inline mr-1"}),e.duration]}),t.jsxs("div",{children:[t.jsx(ge,{className:"w-3 h-3 inline mr-1"}),e.totalQuestions,"Q"]}),t.jsxs("div",{children:[t.jsx(se,{className:"w-3 h-3 inline mr-1"}),e.difficulty]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-bold text-primary",children:e.salary}),r?t.jsx("span",{className:"px-3 py-1 bg-primary/20 text-primary rounded-full text-xs font-bold",children:"Active"}):t.jsx(Q,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]},e.id)})})]})]})}),t.jsx(ie,{children:Z&&t.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:v,children:t.jsxs(m.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-[32px] max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-8 border-b border-gray-200 dark:border-gray-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-3xl font-black",children:i==="create"?"Create Path":i==="edit"?"Edit Path":x?.name}),t.jsx("button",{onClick:v,className:"w-10 h-10 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full flex items-center justify-center transition-all",children:t.jsx(B,{className:"w-5 h-5"})})]}),!d&&t.jsx("input",{type:"text",placeholder:"Path name (e.g., 'My Frontend Journey')",value:i==="create"?l.name:c.name,onChange:e=>{i==="create"?y(a=>({...a,name:e.target.value})):p(a=>({...a,name:e.target.value}))},className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-[16px] text-xl focus:outline-none focus:border-primary transition-all"}),d&&x?.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:x.description})]}),t.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-800 px-8",children:[t.jsxs("button",{onClick:()=>P("channels"),className:`flex-1 py-4 text-sm font-bold transition-colors relative ${u==="channels"?"text-primary":"text-gray-600 dark:text-gray-400 hover:text-foreground"}`,children:["Channels (",O.length,")",u==="channels"&&t.jsx(m.div,{layoutId:"modal-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),t.jsxs("button",{onClick:()=>P("certifications"),className:`flex-1 py-4 text-sm font-bold transition-colors relative ${u==="certifications"?"text-primary":"text-gray-600 dark:text-gray-400 hover:text-foreground"}`,children:["Certifications (",M.length,")",u==="certifications"&&t.jsx(m.div,{layoutId:"modal-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]}),!d&&t.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:t.jsxs("div",{className:"relative",children:[t.jsx(ne,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-600 dark:text-gray-400"}),t.jsx("input",{type:"text",placeholder:`Search ${u}...`,value:j,onChange:e=>E(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-[12px] focus:outline-none focus:border-primary transition-all"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:u==="channels"?t.jsx("div",{className:"grid grid-cols-2 gap-3",children:(d?Object.values(R).filter(e=>O.includes(e.id)):ee).map(e=>{const a=O.includes(e.id);return t.jsx("button",{onClick:()=>{d||(i==="create"?y(r=>({...r,channels:a?r.channels.filter(n=>n!==e.id):[...r.channels,e.id]})):K(e.id))},disabled:d,className:`p-4 rounded-[12px] border text-left transition-all ${a?"bg-gradient-to-r from-primary/20 to-cyan-500/20 border-primary":d?"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary/30 cursor-pointer"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:e.name}),a&&t.jsx(J,{className:"w-5 h-5 text-primary"})]})},e.id)})}):t.jsx("div",{className:"grid grid-cols-2 gap-3",children:(d?T.filter(e=>M.includes(e.id)):te).map(e=>{const a=M.includes(e.id);return t.jsx("button",{onClick:()=>{d||(i==="create"?y(r=>({...r,certifications:a?r.certifications.filter(n=>n!==e.id):[...r.certifications,e.id]})):Y(e.id))},disabled:d,className:`p-4 rounded-[12px] border text-left transition-all ${a?"bg-gradient-to-r from-primary/20 to-cyan-500/20 border-primary":d?"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary/30 cursor-pointer"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:e.provider}),t.jsx("div",{className:"font-semibold text-sm",children:e.name})]}),a&&t.jsx(J,{className:"w-5 h-5 text-primary"})]})},e.id)})})}),t.jsx("div",{className:"p-8 border-t border-gray-200 dark:border-gray-800",children:d?t.jsx("button",{onClick:()=>{S(x.id),v()},className:"w-full py-4 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground rounded-[16px] font-bold text-xl hover:scale-105 transition-all",children:"Activate This Path"}):t.jsx("button",{onClick:i==="create"?_:X,disabled:i==="create"&&(!l.name||l.channels.length===0&&l.certifications.length===0)||i==="edit"&&(!c.name||c.channels.length===0&&c.certifications.length===0),className:"w-full py-4 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground rounded-[16px] font-bold text-xl disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 transition-all",children:i==="create"?"Create Path":"Save Changes"})})]})})})]})]})}export{Fe as default};
