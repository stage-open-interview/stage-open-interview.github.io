import{r as c,j as e,i as f,o as g,m as h,X as w,n as v,R as j}from"./index-Bj61abp1.js";import{F as y}from"./flag-C5ERWomh.js";import{E as N}from"./external-link-h9rbZy50.js";import{B as k}from"./ban-SX2Xdbjf.js";const m=[{type:"improve",icon:e.jsx(v,{className:"w-3 h-3"}),label:"Improve",color:"text-blue-400 hover:bg-blue-500/20",issueLabel:"improve"},{type:"rewrite",icon:e.jsx(j,{className:"w-3 h-3"}),label:"Rewrite",color:"text-amber-400 hover:bg-amber-500/20",issueLabel:"rewrite"},{type:"disable",icon:e.jsx(k,{className:"w-3 h-3"}),label:"Remove",color:"text-red-400 hover:bg-red-500/20",issueLabel:"disable"}],C="open-interview/open-interview",d="question-feedback";function u(){try{return JSON.parse(localStorage.getItem(d)||"[]")}catch{return[]}}function S(t){const s=u().filter(n=>n.questionId!==t.questionId);s.push(t),localStorage.setItem(d,JSON.stringify(s))}function $(t){return u().find(s=>s.questionId===t)||null}function F(t){const s=u().filter(n=>n.questionId!==t);localStorage.setItem(d,JSON.stringify(s))}function E(t,s){const n=`[${s.toUpperCase()}] Question: ${t}`,o=`## Question Feedback

**Question ID:** \`${t}\`
**Feedback Type:** ${s}
**Page URL:** ${window.location.href}

---

### Details
<!-- Please describe what needs to be ${s==="improve"?"improved":s==="rewrite"?"rewritten":"removed"} -->



---
*This issue was created via the question feedback button.*
`,i=`bot:processor,feedback:${s}`;return`https://github.com/${C}/issues/new?title=${encodeURIComponent(n)}&body=${encodeURIComponent(o)}&labels=${encodeURIComponent(i)}`}function Q({questionId:t,className:s=""}){const[n,o]=c.useState(!1),[i,l]=c.useState(null);c.useEffect(()=>{l($(t)),o(!1)},[t]);const p=r=>{const a={questionId:t,type:r,timestamp:new Date().toISOString()};S(a),l(a),o(!1);const x=E(t,r);window.open(x,"_blank","noopener,noreferrer")},b=()=>{F(t),l(null)};if(i){const r=m.find(a=>a.type===i.type);return e.jsxs("button",{onClick:b,className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] transition-all ${i.type==="improve"?"bg-blue-500/20 text-blue-400":i.type==="rewrite"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"} ${s}`,title:"Click to clear",children:[e.jsx(f,{className:"w-2.5 h-2.5"}),e.jsx("span",{className:"hidden sm:inline",children:r?.label})]})}return e.jsxs("div",{className:`relative inline-flex ${s}`,children:[e.jsx("button",{onClick:()=>o(!n),className:"p-2 rounded-lg bg-card border border-border text-muted-foreground hover:text-foreground hover:bg-muted transition-all",title:"Flag question for review",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx(g,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs(h.div,{initial:{opacity:0,scale:.9,y:-4},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-4},transition:{duration:.15},className:"absolute right-0 top-full mt-1 z-50 bg-card/95 backdrop-blur border border-border rounded-lg shadow-xl p-1.5 min-w-[120px]",children:[e.jsxs("p",{className:"text-[9px] text-muted-foreground px-2 pb-1 flex items-center gap-1",children:[e.jsx(N,{className:"w-2.5 h-2.5"}),"Opens GitHub Issue"]}),m.map(r=>e.jsxs("button",{onClick:()=>p(r.type),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-[11px] transition-all ${r.color}`,children:[r.icon,r.label]},r.type)),e.jsxs("button",{onClick:()=>o(!1),className:"w-full flex items-center gap-2 px-2 py-1 rounded text-[10px] text-muted-foreground/60 hover:text-muted-foreground mt-0.5",children:[e.jsx(w,{className:"w-2.5 h-2.5"}),"Cancel"]})]})]})})]})}export{Q};
