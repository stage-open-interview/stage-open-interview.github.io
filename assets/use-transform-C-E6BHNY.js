import{ar as p,as as l,r as u,aj as d,at as h,au as y,ag as C,av as V,aw as c}from"./index-C-IC1LIA.js";function g(...t){const e=!Array.isArray(t[0]),n=e?0:-1,o=t[0+n],s=t[1+n],a=t[2+n],r=t[3+n],f=p(s,a,r);return e?f(o):f}function x(t){const e=l(()=>h(t)),{isStatic:n}=u.useContext(d);if(n){const[,o]=u.useState(t);u.useEffect(()=>e.on("change",o),[])}return e}function m(t,e){const n=x(e()),o=()=>n.set(e());return o(),y(()=>{const s=()=>C.preRender(o,!1,!0),a=t.map(r=>r.on("change",s));return()=>{a.forEach(r=>r()),V(o)}}),n}function A(t){c.current=[],t();const e=m(c.current,t);return c.current=void 0,e}function M(t,e,n,o){if(typeof t=="function")return A(t);const s=typeof e=="function"?e:g(e,n,o);return Array.isArray(t)?i(t,s):i([t],([a])=>s(a))}function i(t,e){const n=l(()=>[]);return m(t,()=>{n.length=0;const o=t.length;for(let s=0;s<o;s++)n[s]=t[s].get();return e(n)})}export{x as a,M as u};
