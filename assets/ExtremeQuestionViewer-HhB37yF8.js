import{r as s,at as Et,au as It,av as Vr,P as je,j as e,m as C,C as Hr,Z as Tt,ai as Qr,ah as Wr,A as ke,W as Re,a4 as re,a0 as X,_ as Ye,$ as q,a1 as S,aw as rt,ax as _t,ay as zr,az as Yr,Y as Ee,aA as Xr,aB as qr,a2 as Jr,aC as Zr,aD as en,aE as Dt,u as tn,k as wt,b as rn,J as nn,am as on,aj as sn,ak as an,an as ln,S as cn,X as dn,E as un}from"./index-Bb5bc9Dq.js";import{g as At}from"./data-D9ONYv5s.js";import{u as mn,a as pn,b as fn,V as xn,S as yt}from"./VoiceReminder-DMVhwrIj.js";import{Q as hn,u as gn,C as bn}from"./use-swipe-sYmGwoTs.js";import{g as vn,Q as wn,a as yn,b as Cn,r as jn,c as Nn,S as Sn,G as Mn,Y as kn,B as Rn}from"./spaced-repetition-BKiJnHiD.js";import{S as Pt}from"./sparkles-5qaI5_ia.js";import{B as Xe,b as qe,a as Ot,F as Ft,T as En,C as In,G as Tn}from"./use-focus-trap-B3UEM0WV.js";import{T as Ne,B as _n,u as Dn,a as Je,C as Ct}from"./use-unified-toast-BEJqNzYt.js";import{bF as $t,bH as An}from"./EnhancedMermaid-CeER_1_5.js";import{M as Pn,r as On,h as Fn,v as $n}from"./index-CbLdUijL.js";import{E as Ln}from"./external-link-CKrYzESY.js";import{F as Gn}from"./file-text-C5G5BfBw.js";import{C as Lt}from"./check-CFZdmRp5.js";import{C as Kn}from"./copy-CKeSW8Cr.js";import{L as jt}from"./lightbulb-ClEuuavh.js";import{C as Gt}from"./chevron-down-Ck_u8-nu.js";import{P as Un}from"./play-DHC_rCXo.js";import{U as Bn}from"./UnifiedSearch-BXjkTzZC.js";import{d as Vn,l as Hn}from"./tests-DRPiStcq.js";import{h as Qn,u as Wn,R as zn,F as Yn}from"./index-CvbyFNTD.js";import{S as Xn}from"./settings-Djo4NlAU.js";import{S as qn}from"./SEOHead-CApfqhSl.js";import"./history-CoFIOLkp.js";import"./trash-2-zkLD-kEU.js";import"./triangle-alert-Ctbf-nmK.js";import"./square-pen-CmztTANh.js";import"./plus-Bdh_XGHX.js";import"./user-B0PZynB9.js";import"./bot-coH7CMyn.js";import"./clock-CJly0H7l.js";import"./coffee-BO6OOe3x.js";import"./message-circle-R0k3ZU2C.js";import"./flag-BYg9723F.js";var Jn=Et[" useId ".trim().toString()]||(()=>{}),Zn=0;function Ze(t){const[r,n]=s.useState(Jn());return It(()=>{n(o=>o??String(Zn++))},[t]),t||(r?`radix-${r}`:"")}var eo=Et[" useInsertionEffect ".trim().toString()]||It;function Kt({prop:t,defaultProp:r,onChange:n=()=>{},caller:o}){const[i,a,d]=to({defaultProp:r,onChange:n}),c=t!==void 0,m=c?t:i;{const u=s.useRef(t!==void 0);s.useEffect(()=>{const p=u.current;p!==c&&console.warn(`${o} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=c},[c,o])}const l=s.useCallback(u=>{if(c){const p=ro(u)?u(t):u;p!==t&&d.current?.(p)}else a(u)},[c,t,a,d]);return[m,l]}function to({defaultProp:t,onChange:r}){const[n,o]=s.useState(t),i=s.useRef(n),a=s.useRef(r);return eo(()=>{a.current=r},[r]),s.useEffect(()=>{i.current!==n&&(a.current?.(n),i.current=n)},[n,i]),[n,o,a]}function ro(t){return typeof t=="function"}const nt="user-engagement-data",Ve="last-new-content-check";function ce(){if(typeof window>"u")return{channels:{},lastGlobalVisit:new Date().toISOString(),totalVisits:0};try{const t=localStorage.getItem(nt);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load engagement data:",t)}return{channels:{},lastGlobalVisit:new Date().toISOString(),totalVisits:0}}function no(t){if(!(typeof window>"u"))try{localStorage.setItem(nt,JSON.stringify(t))}catch(r){console.error("Failed to save engagement data:",r)}}const oo={trackChannelVisit(t){const r=ce(),n=new Date().toISOString();r.channels[t]||(r.channels[t]={channelId:t,visitCount:0,lastVisited:n,completedCount:0,markedCount:0}),r.channels[t].visitCount++,r.channels[t].lastVisited=n,r.lastGlobalVisit=n,r.totalVisits++,r.channels[t].completedCount=je.getCompleted(t).length,r.channels[t].markedCount=je.getMarked(t).length,no(r)},getTopChannels(t=5){const r=ce();return Object.values(r.channels).map(n=>({...n,score:n.visitCount*2+n.completedCount*3+n.markedCount*1})).sort((n,o)=>o.score-n.score).slice(0,t)},async findNewQuestions(t){if(!t)return[];const r=ce(),n=[];if(Object.keys(r.channels).length===0)return[];for(const[i,a]of Object.entries(t.questions)){const d=a.latestEvent?.createdAt;if(!d)continue;const c=new Date(d),m=new Date(r.lastGlobalVisit);c>m&&n.push({questionId:i,channelId:"",createdAt:d,questionType:a.questionType==="coding"?"coding":"question"})}return n.sort((i,a)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime())},async generateRecommendations(t,r){ce();const n=[],o=this.getTopChannels(10);for(const c of o.slice(0,3)){const m=je.getCompleted(c.channelId),l=r[c.channelId]||0;if(l>0&&m.length<l){const u=Math.round(m.length/l*100);n.push({type:"continue",channelId:c.channelId,reason:`Continue your progress (${u}% complete)`,priority:100-u})}}if(t){const c=localStorage.getItem(Ve),m=c?new Date(c):new Date(0);for(const l of o){let u=0;for(const[,p]of Object.entries(t.questions)){const h=p.latestEvent?.createdAt;h&&new Date(h)>m&&u++}u>0&&n.push({type:"new_content",channelId:l.channelId,reason:`${u} new question${u>1?"s":""} added`,priority:90,newCount:u})}localStorage.setItem(Ve,new Date().toISOString())}for(const c of o){const m=je.getMarked(c.channelId);m.length>0&&n.push({type:"review",channelId:c.channelId,reason:`${m.length} question${m.length>1?"s":""} marked for review`,priority:70,questionIds:m})}const i={"system-design":["backend","database","devops"],algorithms:["data-structures","dynamic-programming"],frontend:["react-native","testing"],backend:["database","system-design","devops"],aws:["aws-saa","aws-dva","terraform"],kubernetes:["cka","ckad","devops"],"machine-learning":["generative-ai","nlp","computer-vision"]},a=new Set(o.map(c=>c.channelId)),d=new Set;for(const c of o.slice(0,3)){const m=i[c.channelId]||[];for(const l of m)!a.has(l)&&!d.has(l)&&(d.add(l),n.push({type:"explore",channelId:l,reason:`Related to ${c.channelId}`,priority:50}))}return n.sort((c,m)=>m.priority-c.priority).slice(0,8)},getEngagementSummary(){const t=ce(),r=Object.values(t.channels);return{totalChannelsVisited:r.length,totalQuestionsCompleted:r.reduce((n,o)=>n+o.completedCount,0),currentStreak:Vr.getStreak(),topChannel:r.length>0?r.sort((n,o)=>o.visitCount-n.visitCount)[0].channelId:null}},clearEngagementData(){typeof window>"u"||(localStorage.removeItem(nt),localStorage.removeItem(Ve))}};function so(t){if(!t)return null;const r=t.split(`
`);return r.map((n,o)=>{const a=n.split(/`([^`]+)`/g).map((d,c)=>c%2===1?e.jsx("code",{className:"px-2 py-1 mx-1 bg-primary/10 text-primary rounded-md text-[0.95em] font-mono border border-primary/20",children:d},`${o}-${c}`):d);return e.jsxs("span",{children:[a,o<r.length-1&&e.jsx("br",{})]},o)})}function Nt({question:t,questionNumber:r,totalQuestions:n,isMarked:o,isCompleted:i,onToggleMark:a,onTapQuestion:d}){const[c,m]=s.useState(null),[l,u]=s.useState(!1),[p,h]=s.useState(!1),[x,b]=s.useState(!0);s.useEffect(()=>{if(t?.id){const w=vn(t.id,t.channel,t.difficulty);m(E=>E?.questionId===w.questionId&&E?.totalReviews===w.totalReviews?E:w),u(!1),h(w.totalReviews>0)}},[t?.id,t?.channel,t?.difficulty]);const N=w=>{if(!t)return;const E=jn(t.id,t.channel,t.difficulty,w);m(E),u(!0),h(!1)},f=()=>{if(!t)return;const w=Nn(t.id,t.channel,t.difficulty);m(w),h(!0)},R=(()=>{switch(t.difficulty){case"beginner":return{icon:Tt,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/30",glow:"shadow-green-500/20",label:"Easy",gradient:"from-green-500/10 to-emerald-500/10"};case"intermediate":return{icon:Ne,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/30",glow:"shadow-yellow-500/20",label:"Medium",gradient:"from-yellow-500/10 to-orange-500/10"};case"advanced":return{icon:Ft,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/30",glow:"shadow-red-500/20",label:"Hard",gradient:"from-red-500/10 to-pink-500/10"};default:return{icon:Ne,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",glow:"shadow-muted/20",label:"Unknown",gradient:"from-muted/10 to-muted/10"}}})(),M=R.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col relative overflow-hidden bg-gradient-to-br from-background via-background to-muted/20","data-testid":"extreme-question-panel",onClick:d,children:[x&&e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-20",children:[...Array(10)].map((w,E)=>e.jsx(C.div,{className:"absolute w-1 h-1 bg-primary/40 rounded-full",initial:{x:Math.random()*(typeof window<"u"?window.innerWidth:1e3),y:Math.random()*(typeof window<"u"?window.innerHeight:1e3),scale:Math.random()*.5+.5},animate:{y:[null,Math.random()*(typeof window<"u"?window.innerHeight:1e3)],opacity:[.2,.4,.2],scale:[null,Math.random()*1.5+.5]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"}},E))}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6 overflow-y-auto",children:[e.jsxs(C.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"flex items-center justify-between gap-3 mb-6 pb-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg ${R.bg} border ${R.border}`,children:[e.jsx(M,{className:`w-3.5 h-3.5 ${R.color}`}),e.jsx("span",{className:`text-xs font-bold ${R.color}`,children:R.label})]}),t.isNew&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 bg-primary/10 border border-primary/30 rounded-lg",children:[e.jsx(Pt,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:"NEW"})]}),i&&e.jsx("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 bg-green-500/10 border border-green-500/30 rounded-lg",children:e.jsx(Hr,{className:"w-3.5 h-3.5 text-green-500"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(wn,{questionId:t.id}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 bg-card border border-border rounded-lg",children:[e.jsx(Xe,{className:"w-3.5 h-3.5 text-primary"}),c&&e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full ${Cn(c.masteryLevel)} font-medium`,children:yn(c.masteryLevel).slice(0,3)}),!l&&p&&c?e.jsx("div",{className:"flex items-center gap-0.5",children:[{rating:"again",label:"ðŸ˜•"},{rating:"hard",label:"ðŸ¤”"},{rating:"good",label:"ðŸ‘"},{rating:"easy",label:"ðŸŽ¯"}].map(w=>e.jsx("button",{onClick:E=>{E.stopPropagation(),N(w.rating)},className:"w-5 h-5 flex items-center justify-center rounded text-[10px] hover:bg-muted transition-all",children:w.label},w.rating))}):!l&&!p?e.jsx("button",{onClick:w=>{w.stopPropagation(),f()},className:"px-2 py-0.5 bg-primary hover:bg-primary/90 text-primary-foreground text-[9px] font-bold rounded transition-all",children:"+"}):e.jsx("span",{className:"text-[10px] text-green-500",children:"âœ“"})]}),e.jsx(hn,{questionId:t.id,questionType:"question",size:"sm"}),e.jsx(C.button,{onClick:w=>{w.stopPropagation(),a()},className:`p-2 rounded-lg transition-all ${o?"bg-primary/10 text-primary border border-primary/30":"bg-card text-muted-foreground hover:text-primary border border-border"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(qe,{className:`w-4 h-4 ${o?"fill-current":""}`})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-5xl mx-auto w-full",children:[t.companies&&t.companies.length>0&&e.jsxs(C.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2 mb-4 flex-wrap",children:[e.jsx(Ot,{className:"w-3.5 h-3.5 text-primary"}),t.companies.map((w,E)=>e.jsx("span",{className:"px-2.5 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full border border-primary/20",children:w},E))]}),e.jsx(C.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:`font-black text-foreground leading-[1.2] mb-4 ${t.question.length>200?"text-xl sm:text-2xl lg:text-3xl":t.question.length>100?"text-2xl sm:text-3xl lg:text-4xl":"text-3xl sm:text-4xl lg:text-5xl"}`,children:so(t.question)}),e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mb-3",children:e.jsx("span",{className:"text-xs sm:text-sm text-primary uppercase tracking-wider font-bold",children:t.subChannel})}),t.tags&&t.tags.length>0&&e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex flex-wrap gap-1.5",children:[t.tags.slice(0,8).map((w,E)=>e.jsx("span",{className:"px-2 py-0.5 bg-muted text-muted-foreground text-[10px] sm:text-xs font-mono rounded border border-border",children:w},w)),t.tags.length>8&&e.jsxs("span",{className:"text-[10px] text-muted-foreground py-0.5",children:["+",t.tags.length-8]})]})]}),e.jsx(C.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-center pt-4 border-t border-border mt-4",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted border border-border rounded text-[9px] font-mono mx-1",children:"â†’"})," or tap to reveal answer"]})})]})]})}function ao(t){if(!t)return"";let r=t;r=r.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),r=r.replace(/\*\*\s*```/g,"**\n\n```"),r=r.replace(/```\s*\*\*/g,"```\n\n**"),r=r.replace(/```(\w*)\n([\s\S]*?)```/g,(i,a,d)=>{const c=d.replace(/\*\*/g,"");return"```"+a+`
`+c+"```"}),r=r.replace(/([^\n`])(\s*```)/g,"$1\n```"),r=r.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),r=r.replace(/:\s*```/g,":\n\n```"),r=r.replace(/^\*\*\s*$/gm,""),r=r.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(\d+\.\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(-\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*-\s+/g,`**
- `),r=r.replace(/\*\*(\d+)\.\s+/g,`**
$1. `),r=r.replace(/\*\*-\s*\*\*([^*]+)\*\*/g,`**
- **$1**`),r=r.replace(/\*\*-\s*\*\*([^*\n]+)/g,`**
- **$1**`),r=r.replace(/-\s*\*\*([^*]+)\*\*-\s+/g,`- **$1**
- `);const n=r.split(`
`),o=[];for(let i=0;i<n.length;i++){let a=n[i];const d=(a.match(/\*\*/g)||[]).length;d%2===1&&(a.trim().startsWith("**")&&d===1?a=a.replace(/^\s*\*\*\s*/,""):a.trim().endsWith("**")&&d===1&&(a=a.replace(/\s*\*\*\s*$/,""))),o.push(a)}return r=o.join(`
`),r=r.replace(/^[â€¢Â·]\s*/gm,"- "),(r.includes("â€¢")||r.includes("Â·"))&&(r=r.split(`
`).map(d=>{const c=(d.match(/[â€¢Â·]/g)||[]).length;if(c>1||c===1&&!d.trim().startsWith("â€¢")&&!d.trim().startsWith("Â·")){const m=d.split(/[â€¢Â·]/).map(l=>l.trim()).filter(l=>l);if(m.length>1)return m.map(l=>`- ${l}`).join(`
`)}return d.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),r=r.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),r=r.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),r=r.replace(/\n{3,}/g,`

`),r=r.replace(/^\n+/,""),r}function St(t){if(!t||typeof t!="string")return!1;const r=t.trim();if(!r||r.length<10)return!1;const n=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],o=r.split(`
`)[0].toLowerCase().trim();if(!n.some(c=>o.startsWith(c.toLowerCase())))return!1;const a=r.split(`
`).filter(c=>{const m=c.trim().toLowerCase();return m&&!m.startsWith("%%")&&!n.some(l=>m.startsWith(l.toLowerCase()))});if(a.length<3)return!1;const d=r.toLowerCase();return!(d.includes("start")&&d.includes("end")&&a.length<=3||d.match(/\bstart\b/g)?.length===1&&d.match(/\bend\b/g)?.length===1&&a.length<=2)}function Mt(t){return t?t.split(/`([^`]+)`/g).map((n,o)=>o%2===1?e.jsx("code",{className:"px-2 py-1 mx-1 bg-primary/20 text-primary rounded-lg text-[0.9em] font-mono border border-primary/30",children:n},o):n):null}function io({code:t,language:r}){const[n,o]=s.useState(!1),i=async()=>{await navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)};return e.jsxs(C.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-2xl overflow-hidden border border-border bg-card shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-muted border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(In,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm uppercase tracking-wider text-primary font-bold",children:r||"code"})]}),e.jsx(C.button,{onClick:i,className:"flex items-center gap-2 px-4 py-2 text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded-lg transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:n?e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-green-500 font-medium",children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(Fn,{language:r||"text",style:$n,customStyle:{margin:0,padding:"1.5rem",background:"transparent",fontSize:"0.875rem",lineHeight:"1.6"},wrapLines:!0,wrapLongLines:!0,children:t})]})}function lo({question:t,hasTldr:r,hasDiagram:n,hasEli5:o,hasVideo:i}){const[a,d]=s.useState(null),c=n&&a!==!1,m=[];r&&m.push("tldr"),c&&m.push("diagram"),o&&m.push("eli5"),i&&m.push("video");const[l,u]=s.useState(()=>r?"tldr":o?"eli5":i?"video":"diagram");s.useEffect(()=>{a===!1&&l==="diagram"&&(r?u("tldr"):o?u("eli5"):i&&u("video"))},[a,l,r,o,i]);const p=s.useCallback(x=>{d(x)},[]);if(m.length===0&&a===!1)return null;if(m.length===0&&!r&&!o&&!i&&a===null)return e.jsx("div",{className:"rounded-2xl border border-border bg-card p-6 text-center text-muted-foreground text-sm backdrop-blur-xl",children:"Loading media..."});if(m.length===0)return null;const h={tldr:{label:"Quick Answer",icon:e.jsx(jt,{className:"w-4 h-4"})},diagram:{label:"Visual",icon:e.jsx(Tn,{className:"w-4 h-4"})},eli5:{label:"Simple",icon:e.jsx(Rn,{className:"w-4 h-4"})},video:{label:"Video",icon:e.jsx(Un,{className:"w-4 h-4"})}};return e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-border bg-card backdrop-blur-xl overflow-hidden shadow-xl",children:[e.jsx("div",{className:"flex border-b border-border bg-muted/30",children:m.map(x=>e.jsxs(C.button,{onClick:()=>u(x),className:`flex-1 flex items-center justify-center gap-2 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-bold transition-all relative ${l===x?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[h[x].icon,e.jsx("span",{className:"hidden sm:inline",children:h[x].label}),l===x&&e.jsx(C.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-1 bg-primary"})]},x))}),e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs(ke,{mode:"wait",children:[l==="tldr"&&r&&e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex items-start gap-4",children:[e.jsx(jt,{className:"w-6 h-6 text-primary shrink-0 mt-1"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground leading-relaxed",children:Mt(t.answer)})]},"tldr"),l==="diagram"&&n&&e.jsx(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:e.jsx($t,{chart:t.diagram,onRenderResult:p})},"diagram"),l==="eli5"&&o&&e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground leading-relaxed",children:Mt(t.eli5||"")})]},"eli5"),l==="video"&&i&&e.jsx(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:e.jsx(kn,{shortVideo:t.videos?.shortVideo,longVideo:t.videos?.longVideo})},"video")]})})]})}function co({title:t,icon:r,children:n,defaultExpanded:o=!0,variant:i="default",badge:a}){const[d,c]=s.useState(o),m={default:"bg-card border-border",highlight:"bg-primary/10 border-primary/30",success:"bg-green-500/10 border-green-500/30",purple:"bg-purple-500/10 border-purple-500/30"},l={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs(C.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-2xl border overflow-hidden backdrop-blur-xl ${m[i]}`,children:[e.jsxs(C.button,{onClick:()=>c(!d),className:"w-full flex items-center justify-between px-5 py-4 hover:bg-muted/30 transition-colors",whileHover:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:l[i],children:r}),e.jsx("span",{className:"font-bold text-base text-foreground",children:t}),a&&e.jsx("span",{className:"px-2 py-1 bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/30",children:a})]}),e.jsx(C.div,{animate:{rotate:d?0:-90},transition:{duration:.2},children:e.jsx(Gt,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsx(ke,{initial:!1,children:d&&e.jsx(C.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx("div",{className:"px-5 pb-5",children:n})})})]})}function kt({question:t}){const r=s.useRef(null),n=typeof window<"u"&&window.innerWidth<640,[o,i]=s.useState(null);s.useEffect(()=>{Qr.getByQuestionId(t.id).then(i)},[t.id]);const a=!!t.answer,d=!n&&St(t.diagram),c=!!t.eli5,m=!!(t.videos?.shortVideo||t.videos?.longVideo),l=a||d||c||m,u=s.useCallback(p=>{const h=ao(p);return e.jsx(Pn,{remarkPlugins:[On],components:{code({className:x,children:b}){const N=/language-(\w+)/.exec(x||""),f=N?N[1]:"",v=String(b).replace(/\n$/,"");return!N&&!String(b).includes(`
`)?e.jsx("code",{className:"px-2 py-1 bg-primary/20 text-primary rounded-lg text-[0.9em] font-mono border border-primary/30",children:b}):f==="mermaid"?St(v)?e.jsx("div",{className:"my-4",children:e.jsx($t,{chart:v})}):null:e.jsx("div",{className:"my-4",children:e.jsx(io,{code:v,language:f})})},p({children:x}){return e.jsx("p",{className:"mb-3 leading-relaxed text-foreground text-sm sm:text-base",children:x})},h1({children:x}){return e.jsx("h1",{className:"text-lg sm:text-xl font-black mb-3 mt-6 text-foreground border-b border-border pb-2",children:x})},h2({children:x}){return e.jsx("h2",{className:"text-base sm:text-lg font-bold mb-3 mt-5 text-foreground",children:x})},h3({children:x}){return e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-2 mt-4 text-foreground",children:x})},strong({children:x}){return e.jsx("strong",{className:"font-bold text-foreground",children:x})},ul({children:x}){return e.jsx("ul",{className:"space-y-2 mb-3 ml-2",children:x})},ol({children:x}){return e.jsx("ol",{className:"space-y-2 mb-3 ml-2 [counter-reset:list-counter]",children:x})},li({children:x,node:b}){const f=b?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-3 text-foreground text-sm sm:text-base [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-1 font-bold",children:f?e.jsx("span",{className:"text-sm before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:x})]})},a({href:x,children:b}){return e.jsx("a",{href:x,className:"text-primary hover:text-primary/80 underline",target:"_blank",rel:"noopener noreferrer",children:b})},blockquote({children:x}){return e.jsx("blockquote",{className:"border-l-4 border-primary/50 pl-4 py-2 my-3 bg-primary/5 text-muted-foreground italic text-sm sm:text-base",children:x})},table({children:x}){return e.jsx("div",{className:"my-4 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-xs sm:text-sm",children:x})})},th({children:x}){return e.jsx("th",{className:"px-3 py-2 text-left font-bold bg-muted border border-border text-xs sm:text-sm text-foreground",children:x})},td({children:x}){return e.jsx("td",{className:"px-3 py-2 border border-border text-xs sm:text-sm text-foreground",children:x})}},children:h})},[]);return e.jsx(C.div,{ref:r,initial:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-gradient-to-br from-background via-muted/10 to-background",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 py-4 sm:py-6 pb-32 space-y-6",children:[l&&e.jsx(lo,{question:t,hasTldr:a,hasDiagram:d,hasEli5:c,hasVideo:m}),e.jsx(co,{title:"Deep Dive Explanation",icon:e.jsx(_n,{className:"w-5 h-5"}),defaultExpanded:!0,badge:t.explanation?`${Math.ceil(t.explanation.split(" ").length/200)} min read`:void 0,children:e.jsx("div",{className:"prose prose-invert prose-lg max-w-none",children:u(t.explanation)})}),e.jsx("div",{className:"flex items-start gap-3 pt-2",children:t.tags&&t.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(En,{className:"w-4 h-4 text-primary mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(p=>e.jsx(C.span,{className:"px-3 py-1 bg-muted text-muted-foreground text-xs font-mono rounded-lg border border-border backdrop-blur-xl",whileHover:{scale:1.05,borderColor:"hsl(var(--primary))",backgroundColor:"hsl(var(--primary) / 0.1)"},children:Wr(p)},p))})]})}),(t.sourceUrl||o)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.sourceUrl&&e.jsxs(C.a,{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-card hover:bg-muted border border-border rounded-xl text-sm backdrop-blur-xl transition-colors",whileHover:{scale:1.05},children:[e.jsx(Ln,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-foreground font-medium",children:"Source"})]}),o&&e.jsxs(C.a,{href:`https://openstackdaily.github.io${o.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 hover:bg-primary/20 border border-primary/30 rounded-xl text-sm backdrop-blur-xl transition-colors",whileHover:{scale:1.05},children:[e.jsx(Gn,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-primary font-medium",children:"Read Blog"})]})]}),e.jsx(Sn,{questionId:t.id,currentChannel:t.channel}),e.jsx(Mn,{questionId:t.id})]})})}function Ut(t){const r=t+"CollectionProvider",[n,o]=Re(r),[i,a]=n(r,{collectionRef:{current:null},itemMap:new Map}),d=N=>{const{scope:f,children:v}=N,R=re.useRef(null),M=re.useRef(new Map).current;return e.jsx(i,{scope:f,itemMap:M,collectionRef:R,children:v})};d.displayName=r;const c=t+"CollectionSlot",m=Ye(c),l=re.forwardRef((N,f)=>{const{scope:v,children:R}=N,M=a(c,v),w=X(f,M.collectionRef);return e.jsx(m,{ref:w,children:R})});l.displayName=c;const u=t+"CollectionItemSlot",p="data-radix-collection-item",h=Ye(u),x=re.forwardRef((N,f)=>{const{scope:v,children:R,...M}=N,w=re.useRef(null),E=X(f,w),$=a(u,v);return re.useEffect(()=>($.itemMap.set(w,{ref:w,...M}),()=>void $.itemMap.delete(w))),e.jsx(h,{[p]:"",ref:E,children:R})});x.displayName=u;function b(N){const f=a(t+"CollectionConsumer",N);return re.useCallback(()=>{const R=f.collectionRef.current;if(!R)return[];const M=Array.from(R.querySelectorAll(`[${p}]`));return Array.from(f.itemMap.values()).sort(($,A)=>M.indexOf($.ref.current)-M.indexOf(A.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:d,Slot:l,ItemSlot:x},b,o]}var uo=s.createContext(void 0);function Bt(t){const r=s.useContext(uo);return t||r||"ltr"}var He="rovingFocusGroup.onEntryFocus",mo={bubbles:!1,cancelable:!0},pe="RovingFocusGroup",[et,Vt,po]=Ut(pe),[fo,Ht]=Re(pe,[po]),[xo,ho]=fo(pe),Qt=s.forwardRef((t,r)=>e.jsx(et.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(et.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(go,{...t,ref:r})})}));Qt.displayName=pe;var go=s.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:i=!1,dir:a,currentTabStopId:d,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:m,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...p}=t,h=s.useRef(null),x=X(r,h),b=Bt(a),[N,f]=Kt({prop:d,defaultProp:c??null,onChange:m,caller:pe}),[v,R]=s.useState(!1),M=rt(l),w=Vt(n),E=s.useRef(!1),[$,A]=s.useState(0);return s.useEffect(()=>{const I=h.current;if(I)return I.addEventListener(He,M),()=>I.removeEventListener(He,M)},[M]),e.jsx(xo,{scope:n,orientation:o,dir:b,loop:i,currentTabStopId:N,onItemFocus:s.useCallback(I=>f(I),[f]),onItemShiftTab:s.useCallback(()=>R(!0),[]),onFocusableItemAdd:s.useCallback(()=>A(I=>I+1),[]),onFocusableItemRemove:s.useCallback(()=>A(I=>I-1),[]),children:e.jsx(q.div,{tabIndex:v||$===0?-1:0,"data-orientation":o,...p,ref:x,style:{outline:"none",...t.style},onMouseDown:S(t.onMouseDown,()=>{E.current=!0}),onFocus:S(t.onFocus,I=>{const O=!E.current;if(I.target===I.currentTarget&&O&&!v){const H=new CustomEvent(He,mo);if(I.currentTarget.dispatchEvent(H),!H.defaultPrevented){const J=w().filter(D=>D.focusable),B=J.find(D=>D.active),se=J.find(D=>D.id===N),Z=[B,se,...J].filter(Boolean).map(D=>D.ref.current);Yt(Z,u)}}E.current=!1}),onBlur:S(t.onBlur,()=>R(!1))})})}),Wt="RovingFocusGroupItem",zt=s.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:i=!1,tabStopId:a,children:d,...c}=t,m=Ze(),l=a||m,u=ho(Wt,n),p=u.currentTabStopId===l,h=Vt(n),{onFocusableItemAdd:x,onFocusableItemRemove:b,currentTabStopId:N}=u;return s.useEffect(()=>{if(o)return x(),()=>b()},[o,x,b]),e.jsx(et.ItemSlot,{scope:n,id:l,focusable:o,active:i,children:e.jsx(q.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...c,ref:r,onMouseDown:S(t.onMouseDown,f=>{o?u.onItemFocus(l):f.preventDefault()}),onFocus:S(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:S(t.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){u.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const v=wo(f,u.orientation,u.dir);if(v!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let M=h().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")M.reverse();else if(v==="prev"||v==="next"){v==="prev"&&M.reverse();const w=M.indexOf(f.currentTarget);M=u.loop?yo(M,w+1):M.slice(w+1)}setTimeout(()=>Yt(M))}}),children:typeof d=="function"?d({isCurrentTabStop:p,hasTabStop:N!=null}):d})})});zt.displayName=Wt;var bo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vo(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function wo(t,r,n){const o=vo(t.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return bo[o]}function Yt(t,r=!1){const n=document.activeElement;for(const o of t)if(o===n||(o.focus({preventScroll:r}),document.activeElement!==n))return}function yo(t,r){return t.map((n,o)=>t[(r+o)%t.length])}var Co=Qt,jo=zt,tt=["Enter"," "],No=["ArrowDown","PageUp","Home"],Xt=["ArrowUp","PageDown","End"],So=[...No,...Xt],Mo={ltr:[...tt,"ArrowRight"],rtl:[...tt,"ArrowLeft"]},ko={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fe="Menu",[ue,Ro,Eo]=Ut(fe),[ne,qt]=Re(fe,[Eo,_t,Ht]),Ie=_t(),Jt=Ht(),[Io,oe]=ne(fe),[To,xe]=ne(fe),Zt=t=>{const{__scopeMenu:r,open:n=!1,children:o,dir:i,onOpenChange:a,modal:d=!0}=t,c=Ie(r),[m,l]=s.useState(null),u=s.useRef(!1),p=rt(a),h=Bt(i);return s.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),e.jsx(zr,{...c,children:e.jsx(Io,{scope:r,open:n,onOpenChange:p,content:m,onContentChange:l,children:e.jsx(To,{scope:r,onClose:s.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:u,dir:h,modal:d,children:o})})})};Zt.displayName=fe;var _o="MenuAnchor",ot=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t,i=Ie(n);return e.jsx(Yr,{...i,...o,ref:r})});ot.displayName=_o;var st="MenuPortal",[Do,er]=ne(st,{forceMount:void 0}),tr=t=>{const{__scopeMenu:r,forceMount:n,children:o,container:i}=t,a=oe(st,r);return e.jsx(Do,{scope:r,forceMount:n,children:e.jsx(Ee,{present:n||a.open,children:e.jsx(Xr,{asChild:!0,container:i,children:o})})})};tr.displayName=st;var G="MenuContent",[Ao,at]=ne(G),rr=s.forwardRef((t,r)=>{const n=er(G,t.__scopeMenu),{forceMount:o=n.forceMount,...i}=t,a=oe(G,t.__scopeMenu),d=xe(G,t.__scopeMenu);return e.jsx(ue.Provider,{scope:t.__scopeMenu,children:e.jsx(Ee,{present:o||a.open,children:e.jsx(ue.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(Po,{...i,ref:r}):e.jsx(Oo,{...i,ref:r})})})})}),Po=s.forwardRef((t,r)=>{const n=oe(G,t.__scopeMenu),o=s.useRef(null),i=X(r,o);return s.useEffect(()=>{const a=o.current;if(a)return Qn(a)},[]),e.jsx(it,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:S(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Oo=s.forwardRef((t,r)=>{const n=oe(G,t.__scopeMenu);return e.jsx(it,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Fo=Ye("MenuContent.ScrollLock"),it=s.forwardRef((t,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:d,disableOutsidePointerEvents:c,onEntryFocus:m,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:h,onDismiss:x,disableOutsideScroll:b,...N}=t,f=oe(G,n),v=xe(G,n),R=Ie(n),M=Jt(n),w=Ro(n),[E,$]=s.useState(null),A=s.useRef(null),I=X(r,A,f.onContentChange),O=s.useRef(0),H=s.useRef(""),J=s.useRef(0),B=s.useRef(null),se=s.useRef("right"),Q=s.useRef(0),Z=b?zn:s.Fragment,D=b?{as:Fo,allowPinchZoom:!0}:void 0,he=y=>{const W=H.current+y,K=w().filter(_=>!_.disabled),z=document.activeElement,Y=K.find(_=>_.ref.current===z)?.textValue,ge=K.map(_=>_.textValue),ee=Yo(ge,W,Y),ae=K.find(_=>_.textValue===ee)?.ref.current;(function _(De){H.current=De,window.clearTimeout(O.current),De!==""&&(O.current=window.setTimeout(()=>_(""),1e3))})(W),ae&&setTimeout(()=>ae.focus())};s.useEffect(()=>()=>window.clearTimeout(O.current),[]),Wn();const V=s.useCallback(y=>se.current===B.current?.side&&qo(y,B.current?.area),[]);return e.jsx(Ao,{scope:n,searchRef:H,onItemEnter:s.useCallback(y=>{V(y)&&y.preventDefault()},[V]),onItemLeave:s.useCallback(y=>{V(y)||(A.current?.focus(),$(null))},[V]),onTriggerLeave:s.useCallback(y=>{V(y)&&y.preventDefault()},[V]),pointerGraceTimerRef:J,onPointerGraceIntentChange:s.useCallback(y=>{B.current=y},[]),children:e.jsx(Z,{...D,children:e.jsx(Yn,{asChild:!0,trapped:i,onMountAutoFocus:S(a,y=>{y.preventDefault(),A.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Jr,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:h,onDismiss:x,children:e.jsx(Co,{asChild:!0,...M,dir:v.dir,orientation:"vertical",loop:o,currentTabStopId:E,onCurrentTabStopIdChange:$,onEntryFocus:S(m,y=>{v.isUsingKeyboardRef.current||y.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Zr,{role:"menu","aria-orientation":"vertical","data-state":br(f.open),"data-radix-menu-content":"",dir:v.dir,...R,...N,ref:I,style:{outline:"none",...N.style},onKeyDown:S(N.onKeyDown,y=>{const K=y.target.closest("[data-radix-menu-content]")===y.currentTarget,z=y.ctrlKey||y.altKey||y.metaKey,Y=y.key.length===1;K&&(y.key==="Tab"&&y.preventDefault(),!z&&Y&&he(y.key));const ge=A.current;if(y.target!==ge||!So.includes(y.key))return;y.preventDefault();const ae=w().filter(_=>!_.disabled).map(_=>_.ref.current);Xt.includes(y.key)&&ae.reverse(),Wo(ae)}),onBlur:S(t.onBlur,y=>{y.currentTarget.contains(y.target)||(window.clearTimeout(O.current),H.current="")}),onPointerMove:S(t.onPointerMove,me(y=>{const W=y.target,K=Q.current!==y.clientX;if(y.currentTarget.contains(W)&&K){const z=y.clientX>Q.current?"right":"left";se.current=z,Q.current=y.clientX}}))})})})})})})});rr.displayName=G;var $o="MenuGroup",lt=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(q.div,{role:"group",...o,ref:r})});lt.displayName=$o;var Lo="MenuLabel",nr=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(q.div,{...o,ref:r})});nr.displayName=Lo;var Se="MenuItem",Rt="menu.itemSelect",Te=s.forwardRef((t,r)=>{const{disabled:n=!1,onSelect:o,...i}=t,a=s.useRef(null),d=xe(Se,t.__scopeMenu),c=at(Se,t.__scopeMenu),m=X(r,a),l=s.useRef(!1),u=()=>{const p=a.current;if(!n&&p){const h=new CustomEvent(Rt,{bubbles:!0,cancelable:!0});p.addEventListener(Rt,x=>o?.(x),{once:!0}),qr(p,h),h.defaultPrevented?l.current=!1:d.onClose()}};return e.jsx(or,{...i,ref:m,disabled:n,onClick:S(t.onClick,u),onPointerDown:p=>{t.onPointerDown?.(p),l.current=!0},onPointerUp:S(t.onPointerUp,p=>{l.current||p.currentTarget?.click()}),onKeyDown:S(t.onKeyDown,p=>{const h=c.searchRef.current!=="";n||h&&p.key===" "||tt.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Te.displayName=Se;var or=s.forwardRef((t,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:i,...a}=t,d=at(Se,n),c=Jt(n),m=s.useRef(null),l=X(r,m),[u,p]=s.useState(!1),[h,x]=s.useState("");return s.useEffect(()=>{const b=m.current;b&&x((b.textContent??"").trim())},[a.children]),e.jsx(ue.ItemSlot,{scope:n,disabled:o,textValue:i??h,children:e.jsx(jo,{asChild:!0,...c,focusable:!o,children:e.jsx(q.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...a,ref:l,onPointerMove:S(t.onPointerMove,me(b=>{o?d.onItemLeave(b):(d.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:S(t.onPointerLeave,me(b=>d.onItemLeave(b))),onFocus:S(t.onFocus,()=>p(!0)),onBlur:S(t.onBlur,()=>p(!1))})})})}),Go="MenuCheckboxItem",sr=s.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:o,...i}=t;return e.jsx(dr,{scope:t.__scopeMenu,checked:n,children:e.jsx(Te,{role:"menuitemcheckbox","aria-checked":Me(n)?"mixed":n,...i,ref:r,"data-state":dt(n),onSelect:S(i.onSelect,()=>o?.(Me(n)?!0:!n),{checkForDefaultPrevented:!1})})})});sr.displayName=Go;var ar="MenuRadioGroup",[Ko,Uo]=ne(ar,{value:void 0,onValueChange:()=>{}}),ir=s.forwardRef((t,r)=>{const{value:n,onValueChange:o,...i}=t,a=rt(o);return e.jsx(Ko,{scope:t.__scopeMenu,value:n,onValueChange:a,children:e.jsx(lt,{...i,ref:r})})});ir.displayName=ar;var lr="MenuRadioItem",cr=s.forwardRef((t,r)=>{const{value:n,...o}=t,i=Uo(lr,t.__scopeMenu),a=n===i.value;return e.jsx(dr,{scope:t.__scopeMenu,checked:a,children:e.jsx(Te,{role:"menuitemradio","aria-checked":a,...o,ref:r,"data-state":dt(a),onSelect:S(o.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});cr.displayName=lr;var ct="MenuItemIndicator",[dr,Bo]=ne(ct,{checked:!1}),ur=s.forwardRef((t,r)=>{const{__scopeMenu:n,forceMount:o,...i}=t,a=Bo(ct,n);return e.jsx(Ee,{present:o||Me(a.checked)||a.checked===!0,children:e.jsx(q.span,{...i,ref:r,"data-state":dt(a.checked)})})});ur.displayName=ct;var Vo="MenuSeparator",mr=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(q.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});mr.displayName=Vo;var Ho="MenuArrow",pr=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t,i=Ie(n);return e.jsx(en,{...i,...o,ref:r})});pr.displayName=Ho;var Qo="MenuSub",[Ta,fr]=ne(Qo),de="MenuSubTrigger",xr=s.forwardRef((t,r)=>{const n=oe(de,t.__scopeMenu),o=xe(de,t.__scopeMenu),i=fr(de,t.__scopeMenu),a=at(de,t.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:m}=a,l={__scopeMenu:t.__scopeMenu},u=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>u,[u]),s.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),m(null)}},[c,m]),e.jsx(ot,{asChild:!0,...l,children:e.jsx(or,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":br(n.open),...t,ref:Dt(r,i.onTriggerChange),onClick:p=>{t.onClick?.(p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:S(t.onPointerMove,me(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(a.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:S(t.onPointerLeave,me(p=>{u();const h=n.content?.getBoundingClientRect();if(h){const x=n.content?.dataset.side,b=x==="right",N=b?-5:5,f=h[b?"left":"right"],v=h[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+N,y:p.clientY},{x:f,y:h.top},{x:v,y:h.top},{x:v,y:h.bottom},{x:f,y:h.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:S(t.onKeyDown,p=>{const h=a.searchRef.current!=="";t.disabled||h&&p.key===" "||Mo[o.dir].includes(p.key)&&(n.onOpenChange(!0),n.content?.focus(),p.preventDefault())})})})});xr.displayName=de;var hr="MenuSubContent",gr=s.forwardRef((t,r)=>{const n=er(G,t.__scopeMenu),{forceMount:o=n.forceMount,...i}=t,a=oe(G,t.__scopeMenu),d=xe(G,t.__scopeMenu),c=fr(hr,t.__scopeMenu),m=s.useRef(null),l=X(r,m);return e.jsx(ue.Provider,{scope:t.__scopeMenu,children:e.jsx(Ee,{present:o||a.open,children:e.jsx(ue.Slot,{scope:t.__scopeMenu,children:e.jsx(it,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:l,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{d.isUsingKeyboardRef.current&&m.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:S(t.onFocusOutside,u=>{u.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:S(t.onEscapeKeyDown,u=>{d.onClose(),u.preventDefault()}),onKeyDown:S(t.onKeyDown,u=>{const p=u.currentTarget.contains(u.target),h=ko[d.dir].includes(u.key);p&&h&&(a.onOpenChange(!1),c.trigger?.focus(),u.preventDefault())})})})})})});gr.displayName=hr;function br(t){return t?"open":"closed"}function Me(t){return t==="indeterminate"}function dt(t){return Me(t)?"indeterminate":t?"checked":"unchecked"}function Wo(t){const r=document.activeElement;for(const n of t)if(n===r||(n.focus(),document.activeElement!==r))return}function zo(t,r){return t.map((n,o)=>t[(r+o)%t.length])}function Yo(t,r,n){const i=r.length>1&&Array.from(r).every(l=>l===r[0])?r[0]:r,a=n?t.indexOf(n):-1;let d=zo(t,Math.max(a,0));i.length===1&&(d=d.filter(l=>l!==n));const m=d.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return m!==n?m:void 0}function Xo(t,r){const{x:n,y:o}=t;let i=!1;for(let a=0,d=r.length-1;a<r.length;d=a++){const c=r[a],m=r[d],l=c.x,u=c.y,p=m.x,h=m.y;u>o!=h>o&&n<(p-l)*(o-u)/(h-u)+l&&(i=!i)}return i}function qo(t,r){if(!r)return!1;const n={x:t.clientX,y:t.clientY};return Xo(n,r)}function me(t){return r=>r.pointerType==="mouse"?t(r):void 0}var Jo=Zt,Zo=ot,es=tr,ts=rr,rs=lt,ns=nr,os=Te,ss=sr,as=ir,is=cr,ls=ur,cs=mr,ds=pr,us=xr,ms=gr,_e="DropdownMenu",[ps]=Re(_e,[qt]),P=qt(),[fs,vr]=ps(_e),wr=t=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:i,defaultOpen:a,onOpenChange:d,modal:c=!0}=t,m=P(r),l=s.useRef(null),[u,p]=Kt({prop:i,defaultProp:a??!1,onChange:d,caller:_e});return e.jsx(fs,{scope:r,triggerId:Ze(),triggerRef:l,contentId:Ze(),open:u,onOpenChange:p,onOpenToggle:s.useCallback(()=>p(h=>!h),[p]),modal:c,children:e.jsx(Jo,{...m,open:u,onOpenChange:p,dir:o,modal:c,children:n})})};wr.displayName=_e;var yr="DropdownMenuTrigger",Cr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...i}=t,a=vr(yr,n),d=P(n);return e.jsx(Zo,{asChild:!0,...d,children:e.jsx(q.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...i,ref:Dt(r,a.triggerRef),onPointerDown:S(t.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:S(t.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Cr.displayName=yr;var xs="DropdownMenuPortal",jr=t=>{const{__scopeDropdownMenu:r,...n}=t,o=P(r);return e.jsx(es,{...o,...n})};jr.displayName=xs;var Nr="DropdownMenuContent",Sr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=vr(Nr,n),a=P(n),d=s.useRef(!1);return e.jsx(ts,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...o,ref:r,onCloseAutoFocus:S(t.onCloseAutoFocus,c=>{d.current||i.triggerRef.current?.focus(),d.current=!1,c.preventDefault()}),onInteractOutside:S(t.onInteractOutside,c=>{const m=c.detail.originalEvent,l=m.button===0&&m.ctrlKey===!0,u=m.button===2||l;(!i.modal||u)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Sr.displayName=Nr;var hs="DropdownMenuGroup",gs=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(rs,{...i,...o,ref:r})});gs.displayName=hs;var bs="DropdownMenuLabel",vs=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(ns,{...i,...o,ref:r})});vs.displayName=bs;var ws="DropdownMenuItem",Mr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(os,{...i,...o,ref:r})});Mr.displayName=ws;var ys="DropdownMenuCheckboxItem",Cs=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(ss,{...i,...o,ref:r})});Cs.displayName=ys;var js="DropdownMenuRadioGroup",Ns=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(as,{...i,...o,ref:r})});Ns.displayName=js;var Ss="DropdownMenuRadioItem",Ms=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(is,{...i,...o,ref:r})});Ms.displayName=Ss;var ks="DropdownMenuItemIndicator",Rs=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(ls,{...i,...o,ref:r})});Rs.displayName=ks;var Es="DropdownMenuSeparator",Is=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(cs,{...i,...o,ref:r})});Is.displayName=Es;var Ts="DropdownMenuArrow",_s=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(ds,{...i,...o,ref:r})});_s.displayName=Ts;var Ds="DropdownMenuSubTrigger",As=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(us,{...i,...o,ref:r})});As.displayName=Ds;var Ps="DropdownMenuSubContent",Os=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,i=P(n);return e.jsx(ms,{...i,...o,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Os.displayName=Ps;var Fs=wr,$s=Cr,Ls=jr,Gs=Sr,Ks=Mr;const Qe=50,Us=5,Bs=3,Vs=800;function Hs({channelId:t,questionId:r}){const[n,o]=tn(),a=new URLSearchParams(n.split("?")[1]||"").get("q"),d=a||r,c=At(t||""),{subChannels:m}=mn(t||""),l=c?{...c,subChannels:[{id:"all",name:"All Topics"},...m.map(g=>({id:g,name:g.split("-").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ")}))]}:null,[u,p]=s.useState("all"),[h,x]=s.useState("all"),[b,N]=s.useState("all"),[f,v]=s.useState(0),[R,M]=s.useState(!1),[w,E]=s.useState(!1),[$,A]=s.useState(!1),[I,O]=s.useState("question"),[H,J]=s.useState(!1),[B,se]=s.useState([]),[Q,Z]=s.useState(!1),[D,he]=s.useState([]),[V,y]=s.useState(0),[W,K]=s.useState([]),[z,Y]=s.useState(!1),[ge,ee]=s.useState(null),[ae,_]=s.useState(!1),[De,kr]=s.useState(!1),[te,be]=s.useState(new Set),[Ys,ut]=s.useState(new Set),mt=`channel-session-${t}`,ve=`channel-checkpoints-${t}`;s.useEffect(()=>{try{const g=localStorage.getItem(ve);g&&be(new Set(JSON.parse(g)))}catch{}},[ve]),s.useEffect(()=>{t&&localStorage.setItem(ve,JSON.stringify(Array.from(te)))},[te,t,ve]);const{companiesWithCounts:Ae}=pn(t||"",u,h),{preferences:pt,isSubscribed:Pe,subscribeChannel:Rr}=wt(),Er=pt.shuffleQuestions!==!1,Ir=pt.prioritizeUnvisited!==!1,{onQuestionSwipe:Tr,onQuestionView:_r,balance:Xs,formatCredits:qs,refreshBalance:ft}=rn(),{trackEvent:Dr}=nn(),{question:k,questions:F,totalQuestions:T,loading:L,error:Ar}=fn(t||"",f,u,h,b,Er,Ir),we=s.useCallback(()=>{if(!t||F.length===0)return;const g={channelId:t,channelName:l?.name,questions:F,currentIndex:f,selectedSubChannel:u,selectedDifficulty:h,selectedCompany:b,passedCheckpoints:Array.from(te),lastAccessedAt:new Date().toISOString()};localStorage.setItem(mt,JSON.stringify(g))},[t,l,F,f,u,h,b,te,mt]);s.useCallback(()=>{we(),o("/channels")},[we,o]),s.useEffect(()=>{F.length>0&&we()},[f,te,we,F.length]),s.useEffect(()=>{(async()=>{if(t)try{const j=await Hn();se(j.filter(ie=>ie.channelId===t))}catch(j){console.error("Failed to load tests:",j)}})()},[t]);const{completed:Pr,markCompleted:Or,saveLastVisitedIndex:Fr}=on(t||""),{toast:U}=Dn(),Oe=s.useCallback(g=>g>0&&g%Us===0,[]),Fe=s.useCallback(g=>te.has(g),[te]),ye=s.useCallback(()=>{if(B.length===0)return[];const g=B[Math.floor(Math.random()*B.length)];return Vn(g,Bs)},[B]),$e=s.useCallback(()=>{const g=ye();g.length>0?(he(g),y(0),K([]),Y(!1),ee(null),_(!1),ut(new Set),Z(!0)):(be(j=>new Set(Array.from(j).concat(f))),U({title:"Checkpoint passed!"}))},[ye,f,U]);s.useCallback(g=>{if(z)return;const j=D[V],ie=j.options.find(le=>le.isCorrect),Br=g===ie?.id,vt={questionId:j.id,selectedOptionId:g,isCorrect:Br,correctOptionId:ie?.id||""};K(le=>[...le,vt]),ee(vt),Y(!0),setTimeout(()=>{Y(!1),ee(null),V<D.length-1?y(le=>le+1):_(!0)},Vs)},[z,D,V]);const xt=s.useMemo(()=>{const g=W.filter(j=>j.isCorrect).length;return{correct:g,total:D.length,passed:g===D.length}},[W,D.length]);s.useCallback(()=>{const g=ye();he(g),y(0),K([]),Y(!1),ee(null),_(!1),ut(new Set)},[ye]),s.useCallback(()=>{sn(Qe,"Skipped checkpoint test").success?(be(j=>new Set(Array.from(j).concat(f))),Z(!1),kr(!1),ft(),U({title:"Test Skipped",description:`-${Qe} credits`})):U({title:"Insufficient Credits",description:`Need ${Qe} credits`})},[f,ft,U]),s.useCallback(()=>{xt.passed&&be(g=>new Set(Array.from(g).concat(f))),Z(!1)},[xt.passed,f]);const[$r,Lr]=s.useState(()=>{const g=localStorage.getItem(`marked-${t}`);return g?JSON.parse(g):[]}),Le=gn({onSwipeLeft:()=>O("answer"),onSwipeRight:()=>O("question")}),[Ge,ht]=s.useState(!1);s.useEffect(()=>{if(!(L||F.length===0))if(d){const g=F.findIndex(j=>j.id===d);g>=0&&g!==f&&v(g),a&&o(`/extreme/channel/${t}/${d}`,{replace:!0}),ht(!0)}else F[0]&&!Ge&&(o(`/extreme/channel/${t}/${F[0].id}`,{replace:!0}),ht(!0))},[d,F.length,t,L,a]),s.useEffect(()=>{t&&l&&!Pe(t)&&(L||(T>0&&F.length>0?(Rr(t),U({title:"Channel added",description:`${l.name} added to your channels`})):(U({title:"Cannot add channel",description:`${l.name} has no questions available`,variant:"destructive"}),setTimeout(()=>{o("/")},2e3)))),t&&oo.trackChannelVisit(t)},[t,l,L,T,F.length]);const{unsubscribeChannel:Gr}=wt();s.useEffect(()=>{!L&&t&&l&&Pe(t)&&(T===0||F.length===0)&&(Gr(t),U({title:"Channel removed",description:`${l.name} has no questions available and was removed from your channels`,variant:"destructive"}),setTimeout(()=>{o("/")},2e3))},[L,T,F.length,t,l,Pe]),s.useEffect(()=>{T>0&&f>=T&&v(0)},[T,f]),s.useEffect(()=>{!Ge||L||!t||!k||(k.id!==d&&o(`/extreme/channel/${t}/${k.id}`,{replace:!0}),Fr(f))},[f,Ge]),s.useEffect(()=>{k&&(an(k.id,k.channel,k.difficulty),Or(k.id),ln(),Dr({type:"question_completed",timestamp:new Date().toISOString(),data:{questionId:k.id,difficulty:k.difficulty,channel:k.channel}}))},[k?.id]),s.useEffect(()=>{const g=j=>{if((j.metaKey||j.ctrlKey)&&j.key==="k"){j.preventDefault(),A(!0);return}$||Q||(j.key==="ArrowRight"||j.key==="ArrowDown"?(j.preventDefault(),gt()):j.key==="ArrowLeft"||j.key==="ArrowUp"?(j.preventDefault(),bt()):j.key==="Escape"&&o("/"))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[f,T,$,Q]),s.useEffect(()=>{Oe(f)&&!Fe(f)&&!Q&&!L&&$e()},[f,Oe,Fe,Q,L,$e]);const gt=()=>{if(f<T-1){const g=f+1;if(Oe(g)&&!Fe(g)){v(g),$e();return}v(g),O("question"),Tr(),_r()}},bt=()=>{f>0&&(v(g=>g-1),O("question"))},Ke=(g,j)=>{v(0),g==="sub"?p(j):g==="diff"?x(j):N(j)},Ue=()=>{k&&Lr(g=>{const j=g.includes(k.id)?g.filter(ie=>ie!==k.id):[...g,k.id];return localStorage.setItem(`marked-${t}`,JSON.stringify(j)),j})},Kr=async()=>{try{await navigator.clipboard.writeText(window.location.href),U({title:"Link copied!",description:"Question link copied to clipboard"})}catch{U({title:"Share",description:window.location.href})}};if(s.useEffect(()=>{!L&&l&&T===0&&(u!=="all"||h!=="all"||b!=="all"||(U({title:"Content coming soon!",description:`We're preparing questions for "${l.name}". Check back soon!`,variant:"warning"}),J(!0)))},[L,l,T,u,h,b]),L&&!k)return e.jsx(Qs,{});if(Ar||!l)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Channel not found"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:['The channel "',t,`" doesn't exist.`]}),e.jsx("button",{onClick:()=>o("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Go Home"})]})});if(!L&&(!k||T===0))return!(u!=="all"||h!=="all"||b!=="all")||H?e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(We,{channel:l,onBack:()=>o("/"),onSearch:()=>A(!0),currentIndex:f,totalQuestions:T,progress:0,filters:{selectedSubChannel:u,selectedDifficulty:h,selectedCompany:b,companiesWithCounts:Ae,onFilterChange:Ke}}),e.jsx(bn,{type:"channel",name:l?.name,redirectTo:"/channels",redirectDelay:5e3})]}):e.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[e.jsx(We,{channel:l,onBack:()=>o("/"),onSearch:()=>A(!0),currentIndex:f,totalQuestions:T,progress:0,filters:{selectedSubChannel:u,selectedDifficulty:h,selectedCompany:b,companiesWithCounts:Ae,onFilterChange:Ke}}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters."}),e.jsx("button",{onClick:()=>{p("all"),x("all"),N("all")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Reset Filters"})]})})]});if(!k)return null;const Be=$r.includes(k.id),Ce=Pr.includes(k.id),Ur=Math.round((f+1)/T*100);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`h-screen flex flex-col bg-background text-foreground overflow-hidden ${R?"fixed inset-0 z-50":""}`,children:[e.jsx(We,{channel:l,onBack:()=>o("/"),onSearch:()=>A(!0),currentIndex:f,totalQuestions:T,progress:Ur,onFullscreen:()=>M(!R),filters:{selectedSubChannel:u,selectedDifficulty:h,selectedCompany:b,companiesWithCounts:Ae,onFilterChange:Ke}}),e.jsxs("div",{className:"flex-1 flex overflow-hidden isolate","data-testid":"reels-content",children:[e.jsxs("div",{className:"hidden lg:flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-1/2 border-r border-border overflow-hidden flex-shrink-0",children:e.jsx(Nt,{question:k,questionNumber:f+1,totalQuestions:T,isMarked:Be,isCompleted:Ce,onToggleMark:Ue})}),e.jsx("div",{className:"w-1/2 overflow-hidden flex-shrink-0",children:e.jsx(kt,{question:k,isCompleted:Ce})})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:hidden overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-border bg-card backdrop-blur relative z-10",children:[e.jsx("button",{onClick:()=>O("question"),className:`flex-1 py-3 text-sm font-medium transition-colors ${I==="question"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Question"}),e.jsx("button",{onClick:()=>O("answer"),className:`flex-1 py-3 text-sm font-medium transition-colors ${I==="answer"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Answer"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-background relative z-0 pb-20",onTouchStart:Le.onTouchStart,onTouchMove:Le.onTouchMove,onTouchEnd:Le.onTouchEnd,children:I==="question"?e.jsx(Nt,{question:k,questionNumber:f+1,totalQuestions:T,isMarked:Be,isCompleted:Ce,onToggleMark:Ue,onTapQuestion:()=>O("answer")}):e.jsx(kt,{question:k,isCompleted:Ce})})]}),e.jsx(ke,{children:w&&e.jsx(Ws,{question:k,onClose:()=>E(!1)})})]}),e.jsx(zs,{currentIndex:f,totalQuestions:T,onPrev:bt,onNext:gt,onShare:Kr,isMarked:Be,onToggleMark:Ue})]}),e.jsx(Bn,{isOpen:$,onClose:()=>A(!1)}),e.jsx(xn,{})]})}function Qs(){return e.jsxs("div",{className:"min-h-screen bg-background animate-pulse",children:[e.jsx("div",{className:"h-20 bg-card"}),e.jsx("div",{className:"flex h-[calc(100vh-80px)]",children:e.jsxs("div",{className:"flex-1 p-8 space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]})]})})]})}function We({channel:t,onBack:r,onSearch:n,currentIndex:o,totalQuestions:i,progress:a,onFullscreen:d,filters:c}){const{selectedSubChannel:m,selectedDifficulty:l,selectedCompany:u,companiesWithCounts:p,onFilterChange:h}=c||{},[x,b]=s.useState(!1),N=m!=="all"||l!=="all"||u!=="all",f=[m!=="all",l!=="all",u!=="all"].filter(Boolean).length;return e.jsxs("header",{className:"bg-background/95 backdrop-blur-xl border-b border-border shrink-0 relative z-20",children:[e.jsxs("div",{className:"h-12 flex items-center justify-between px-3 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C.button,{onClick:r,className:"p-1.5 hover:bg-muted rounded-lg transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Je,{className:"w-5 h-5 text-foreground"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("h1",{className:"font-bold text-foreground text-sm",children:t.name})})]}),i>0&&e.jsx("div",{className:"flex-1 max-w-md mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-bold text-primary tabular-nums min-w-[50px]",children:[o+1,"/",i]}),e.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden border border-border",children:e.jsx(C.div,{className:"h-full bg-primary rounded-full",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs("span",{className:"text-xs font-bold text-foreground tabular-nums min-w-[30px]",children:[a,"%"]})]})}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[c&&e.jsxs(C.button,{onClick:()=>b(!x),className:`relative p-1.5 rounded-lg transition-all ${x||N?"bg-primary/10 text-primary border border-primary/30":"hover:bg-muted text-muted-foreground"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(Xn,{className:"w-4 h-4"}),f>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-primary text-primary-foreground text-[9px] font-bold rounded-full flex items-center justify-center border border-background",children:f})]}),e.jsx(C.button,{onClick:n,className:"p-1.5 hover:bg-muted rounded-lg transition-all text-muted-foreground hover:text-foreground",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(cn,{className:"w-4 h-4"})}),d&&e.jsx(C.button,{onClick:d,className:"hidden lg:block p-1.5 hover:bg-muted rounded-lg transition-all text-muted-foreground hover:text-foreground",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(An,{className:"w-4 h-4"})})]})]}),e.jsx(ke,{children:c&&x&&e.jsx(C.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden border-t border-border",children:e.jsx("div",{className:"px-3 py-3 bg-muted/30",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:"Filters:"}),t.subChannels?.length>1&&e.jsx(ze,{label:t.subChannels.find(v=>v.id===m)?.name||"All Topics",options:t.subChannels.map(v=>({id:v.id,label:v.name})),selected:m,onSelect:v=>h("sub",v)}),e.jsx(ze,{label:l==="all"?"All Levels":l.charAt(0).toUpperCase()+l.slice(1),options:[{id:"all",label:"All Levels",icon:e.jsx(Ne,{className:"w-3 h-3"})},{id:"beginner",label:"Easy",icon:e.jsx(Tt,{className:"w-3 h-3 text-green-500"})},{id:"intermediate",label:"Medium",icon:e.jsx(Ne,{className:"w-3 h-3 text-yellow-500"})},{id:"advanced",label:"Hard",icon:e.jsx(Ft,{className:"w-3 h-3 text-red-500"})}],selected:l,onSelect:v=>h("diff",v)}),p.length>0&&e.jsx(ze,{label:u==="all"?"All Companies":u,options:[{id:"all",label:"All Companies",icon:e.jsx(Ot,{className:"w-3 h-3"})},...p.map(v=>({id:v.name,label:`${v.name} (${v.count})`}))],selected:u,onSelect:v=>h("company",v)}),N&&e.jsx(C.button,{onClick:()=>{h("sub","all"),h("diff","all"),h("company","all")},className:"ml-auto px-2.5 py-1 text-[10px] font-medium text-muted-foreground hover:text-foreground bg-muted hover:bg-muted/80 rounded-lg transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Clear All"})]})})})})]})}function ze({label:t,options:r,selected:n,onSelect:o}){const i=n!=="all";return e.jsxs(Fs,{children:[e.jsx($s,{asChild:!0,children:e.jsxs("button",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all whitespace-nowrap outline-none focus:outline-none ${i?"bg-primary/10 text-primary border border-primary/30":"bg-card hover:bg-muted border border-border text-foreground"}`,children:[t,e.jsx(Gt,{className:"w-3 h-3 opacity-60"})]})}),e.jsx(Ls,{children:e.jsx(Gs,{className:"min-w-[180px] max-h-[350px] overflow-y-auto bg-popover backdrop-blur-xl border border-border rounded-xl shadow-2xl p-1.5 z-50",sideOffset:6,children:r.map(a=>e.jsxs(Ks,{onClick:()=>o(a.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer outline-none text-xs transition-all ${n===a.id?"bg-primary/10 text-primary border border-primary/30":"text-foreground hover:bg-muted"}`,children:[a.icon,e.jsx("span",{className:"flex-1",children:a.label}),n===a.id&&e.jsx(Lt,{className:"w-3.5 h-3.5 text-primary"})]},a.id))})})]})}function Ws({question:t,onClose:r}){const[n,o]=s.useState([]),[i,a]=s.useState(""),[d,c]=s.useState(!1),m=async()=>{if(!i.trim()||d)return;const l=i.trim();a(""),o(u=>[...u,{role:"user",content:l}]),c(!0),setTimeout(()=>{o(u=>[...u,{role:"assistant",content:`I can help you understand this ${t.difficulty} level question about "${t.question.substring(0,50)}...". What specific aspect would you like me to explain?`}]),c(!1)},1e3)};return e.jsxs(C.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"w-80 h-full bg-card backdrop-blur-xl border-l border-border flex flex-col relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"AI Assistant"})]}),e.jsx("button",{onClick:r,className:"p-1.5 hover:bg-muted rounded-lg transition-colors",children:e.jsx(dn,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.length===0&&e.jsxs("div",{className:"text-center text-muted-foreground text-sm",children:[e.jsx(Xe,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("p",{children:"Ask me anything about this question!"})]}),n.map((l,u)=>e.jsx("div",{className:`flex ${l.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-xl text-sm ${l.role==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground border border-border"}`,children:l.content})},u)),d&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted border border-border p-3 rounded-xl",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:i,onChange:l=>a(l.target.value),onKeyDown:l=>l.key==="Enter"&&m(),placeholder:"Ask about this question...",className:"flex-1 px-3 py-2 bg-background border border-border rounded-xl text-foreground placeholder-muted-foreground text-sm focus:outline-none focus:border-purple-500"}),e.jsx("button",{onClick:m,disabled:!i.trim()||d,className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl transition-colors",children:e.jsx(Pt,{className:"w-4 h-4"})})]})})]})}function zs({currentIndex:t,totalQuestions:r,onPrev:n,onNext:o,onShare:i,isMarked:a,onToggleMark:d}){const c=Math.round((t+1)/r*100),m=t>0,l=t<r-1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-background/95 backdrop-blur-xl border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs(C.button,{onClick:n,disabled:!m,className:`flex items-center gap-1.5 px-3 py-2 rounded-lg font-medium text-xs transition-all ${m?"bg-card hover:bg-muted text-foreground border border-border":"bg-muted/50 text-muted-foreground border border-border cursor-not-allowed opacity-50"}`,whileHover:m?{scale:1.05}:{},whileTap:m?{scale:.95}:{},children:[e.jsx(Je,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Prev"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(C.button,{onClick:d,className:`p-2 rounded-lg transition-all ${a?"bg-primary/10 text-primary border border-primary/30":"bg-card text-muted-foreground hover:text-primary border border-border"}`,whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(qe,{className:`w-4 h-4 ${a?"fill-current":""}`})}),e.jsx(C.button,{onClick:i,className:"p-2 rounded-lg bg-card hover:bg-muted text-muted-foreground hover:text-foreground transition-all border border-border",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(yt,{className:"w-4 h-4"})})]}),e.jsxs(C.button,{onClick:o,disabled:!l,className:`flex items-center gap-1.5 px-3 py-2 rounded-lg font-medium text-xs transition-all ${l?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-muted/50 text-muted-foreground border border-border cursor-not-allowed opacity-50"}`,whileHover:l?{scale:1.05}:{},whileTap:l?{scale:.95}:{},children:[e.jsx("span",{children:"Next"}),e.jsx(Ct,{className:"w-3.5 h-3.5"})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(C.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-card/95 backdrop-blur-xl border border-border rounded-xl shadow-xl",children:[e.jsxs(C.button,{onClick:n,disabled:!m,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium text-xs transition-all ${m?"bg-muted hover:bg-muted/80 text-foreground":"bg-muted/50 text-muted-foreground cursor-not-allowed opacity-50"}`,whileHover:m?{scale:1.05}:{},whileTap:m?{scale:.95}:{},children:[e.jsx(Je,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Prev"})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-muted rounded-lg border border-border",children:[e.jsxs("span",{className:"text-[10px] font-bold text-primary tabular-nums",children:[t+1,"/",r]}),e.jsx("div",{className:"w-16 h-1 bg-background rounded-full overflow-hidden border border-border",children:e.jsx(C.div,{className:"h-full bg-primary rounded-full",initial:{width:0},animate:{width:`${c}%`},transition:{duration:.3}})})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsx(C.button,{onClick:d,className:`p-1.5 rounded-lg transition-all ${a?"bg-primary/10 text-primary border border-primary/30":"hover:bg-muted text-muted-foreground hover:text-primary"}`,whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(qe,{className:`w-3.5 h-3.5 ${a?"fill-current":""}`})}),e.jsx(C.button,{onClick:i,className:"p-1.5 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-all",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(yt,{className:"w-3.5 h-3.5"})}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs(C.button,{onClick:o,disabled:!l,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium text-xs transition-all ${l?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-muted/50 text-muted-foreground cursor-not-allowed opacity-50"}`,whileHover:l?{scale:1.05}:{},whileTap:l?{scale:.95}:{},children:[e.jsx("span",{children:"Next"}),e.jsx(Ct,{className:"w-3.5 h-3.5"})]})]})})})]})}function _a(){const[,t]=un("/extreme/channel/:id/:questionId?"),r=t?.id,n=t?.questionId,o=At(r||"");return r?e.jsxs(e.Fragment,{children:[e.jsx(qn,{title:`${o?.name||"Question"} - Extreme Learning Experience | Code Reels`,description:`Immersive question practice for ${o?.name||"technical interviews"} with AI assistance, gamified learning, and extreme UX design.`,canonical:`https://open-interview.github.io/extreme/channel/${r}${n?`/${n}`:""}`}),e.jsx(Hs,{channelId:r,questionId:n})]}):e.jsx("div",{children:"Channel not found"})}export{_a as default};
