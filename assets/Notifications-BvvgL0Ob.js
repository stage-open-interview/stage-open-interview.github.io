import{u as y,r as p,j as e,m as d,A as w,X as v,k,C}from"./index-DaVim63q.js";import{A}from"./AppLayout-CoUGwf8f.js";import{S}from"./SEOHead-lt9duIEQ.js";import{C as T}from"./check-check-Bi3pH0dW.js";import{T as E}from"./trash-2-CfpHxi4u.js";import{B as L}from"./bell-DWjOPABZ.js";import{T as $,I}from"./triangle-alert-COG3u5nj.js";import"./mic-DgyLutKd.js";import"./UnifiedSearch-BozZP-3f.js";import"./coding-challenges-D2b0VtNy.js";import"./tag-Dv-3imZU.js";import"./target-CN6vs2YH.js";import"./arrow-right-CPirRxXj.js";import"./loader-circle-LN3j_L4i.js";import"./chevron-left-BgLpvL-n.js";import"./chart-column-PwV_y1cF.js";import"./user-DV2axChb.js";import"./code-SK9E8O8B.js";const u="app-notifications",M={success:e.jsx(C,{className:"w-5 h-5 text-green-500"}),error:e.jsx(k,{className:"w-5 h-5 text-red-500"}),info:e.jsx(I,{className:"w-5 h-5 text-blue-500"}),warning:e.jsx($,{className:"w-5 h-5 text-yellow-500"})},O={success:"bg-green-500/10 border-green-500/20",error:"bg-red-500/10 border-red-500/20",info:"bg-blue-500/10 border-blue-500/20",warning:"bg-yellow-500/10 border-yellow-500/20"};function Z(){const[,h]=y(),[a,i]=p.useState([]);p.useEffect(()=>{const t=()=>{try{const r=localStorage.getItem(u);i(r?JSON.parse(r):[])}catch{i([])}};t();const s=()=>t();return window.addEventListener("notification-added",s),()=>window.removeEventListener("notification-added",s)},[]);const o=t=>{i(t),localStorage.setItem(u,JSON.stringify(t))},f=t=>{const s=a.map(r=>r.id===t.id?{...r,read:!0}:r);o(s),t.link&&h(t.link)},g=()=>{const t=a.map(s=>({...s,read:!0}));o(t)},N=t=>{const s=a.filter(r=>r.id!==t);o(s)},j=()=>{o([])},n=a.filter(t=>!t.read).length,b=t=>{const s=new Date(t),l=new Date().getTime()-s.getTime(),c=Math.floor(l/6e4),m=Math.floor(l/36e5),x=Math.floor(l/864e5);return c<1?"Just now":c<60?`${c}m ago`:m<24?`${m}h ago`:x<7?`${x}d ago`:s.toLocaleDateString()};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Notifications - Code Reels",description:"View your notifications and alerts"}),e.jsx(A,{title:"Notifications",showBackOnMobile:!0,children:e.jsxs("div",{className:"max-w-4xl mx-auto pb-8",children:[a.length>0&&e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:n>0?`${n} unread`:"All caught up!"}),e.jsxs("div",{className:"flex gap-2",children:[n>0&&e.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-primary/10 text-primary rounded-lg hover:bg-primary/20 transition-colors",children:[e.jsx(T,{className:"w-4 h-4"}),"Mark all read"]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx(E,{className:"w-4 h-4"}),"Clear all"]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(w,{mode:"popLayout",children:a.length===0?e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-card rounded-2xl border border-border p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"No notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up! Notifications will appear here."})]}):a.map((t,s)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:s*.05},className:`bg-card rounded-xl border overflow-hidden ${t.read?"border-border":O[t.type]} ${t.link?"cursor-pointer hover:bg-muted/50 transition-colors":""}`,children:e.jsxs("div",{className:"flex items-start gap-3 p-4",onClick:()=>f(t),children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:M[t.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:`font-medium text-sm ${t.read?"text-muted-foreground":""}`,children:t.title}),e.jsx("button",{onClick:r=>{r.stopPropagation(),N(t.id)},className:"p-1 hover:bg-muted rounded transition-colors flex-shrink-0",children:e.jsx(v,{className:"w-4 h-4 text-muted-foreground"})})]}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:b(t.timestamp)}),!t.read&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary"}),t.link&&e.jsx("span",{className:"text-[10px] text-primary",children:"Tap to view â†’"})]})]})]})},t.id))})})]})})]})}export{Z as default};
