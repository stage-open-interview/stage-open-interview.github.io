import{n as pe,u as he,r as m,j as e,m as x,S as W,R as ge,Z as _,k as Y,g as F,X as H,l as fe,T as D,o as U,H as be,p as X}from"./index-C-IC1LIA.js";import{S as je}from"./SEOHead-DUu15UYK.js";import{Q as K}from"./QuestionFeedback-C2-FOKX9.js";import{Q as ye}from"./QuestionHistory-B-AwIUgJ.js";import{D as Ne}from"./DesktopSidebarWrapper-CEBkauwF.js";import{g as we,a as ve,b as Ce,c as V,d as Se,e as $e,f as ke,h as Ae,s as Te}from"./tests-CRs_cQC6.js";import{T as qe}from"./triangle-alert-U103_fow.js";import{C as Ie}from"./clock-rywPfviC.js";import{A as Ee}from"./arrow-left-D2wOXUFq.js";import{A as Z}from"./mic-DxXMz0Ku.js";import{E as G}from"./eye-Hq5mhWPq.js";import{C as Re}from"./chevron-down-CUv-aPi_.js";import{C as Qe}from"./circle-x-XP6FNbiU.js";import{E as Oe}from"./external-link-Pdq4gKtp.js";import{R as J}from"./rotate-ccw-BrpByYVW.js";import{S as ee}from"./share-2-BMRrmq45.js";import"./flag-BA1mNYD-.js";import"./ban-Bn3HOyV3.js";import"./history-COFKx11l.js";import"./trash-2-Cmh_xu3K.js";import"./square-pen-LA4TFaT5.js";import"./plus-Bs4SuVdH.js";import"./user-DzCJRC64.js";import"./bot-B9rrO0nD.js";import"./UnifiedNav-DqNo0ccv.js";import"./use-unified-toast-_bFWKKYg.js";import"./UnifiedSearch-CXtUQVTY.js";import"./tag-BPbAv0iH.js";import"./target-04_U9Eka.js";import"./chart-column-dKKSjrD2.js";function T(u){return u?u.split(/`([^`]+)`/g).map((N,a)=>a%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:N},a):N):null}const te="test-auto-submit";function Pe(){try{const u=localStorage.getItem(te);return u===null?!0:u==="true"}catch{return!0}}function Fe(u){localStorage.setItem(te,String(u))}function pt(){const{channelId:u}=pe(),[se,N]=he(),[a,re]=m.useState(null),[y,w]=m.useState("loading"),[h,ne]=m.useState([]),[p,v]=m.useState(0),[d,A]=m.useState({}),[q,ae]=m.useState(0),[I,B]=m.useState(0),[s,L]=m.useState(null),[$,oe]=m.useState(Pe),[b,C]=m.useState(null),[E,R]=m.useState(new Set),[f,ie]=m.useState("all");m.useEffect(()=>{u&&we(u).then(t=>{t?(re(t),w("ready")):w("loading")})},[u]),m.useEffect(()=>{if(y!=="in-progress")return;const t=setInterval(()=>{B(Math.floor((Date.now()-q)/1e3))},1e3);return()=>clearInterval(t)},[y,q]);const Q=m.useCallback(()=>{if(!a)return;const t=ve(a,15);ne(t),A({}),v(0),ae(Date.now()),B(0),L(null),w("in-progress")},[a]),n=h[p],S=Ce(a?.id||""),g=a?V(a.channelId):V("default"),k=a&&S?Se(a,S):!1,le=t=>{if(!n)return;const r=d[n.id]||[];if(n.type==="single"){const i={...d,[n.id]:[t]};if(A(i),$){const c=n.options.find(o=>o.isCorrect)?.id===t;C(c?"correct":"incorrect"),setTimeout(()=>{C(null),p<h.length-1&&v(p+1)},600)}}else r.includes(t)?A({...d,[n.id]:r.filter(i=>i!==t)}):A({...d,[n.id]:[...r,t]})},ce=()=>{const t=!$;oe(t),Fe(t)},de=()=>{p<h.length-1&&v(p+1)},me=()=>{if(!n||n.type!=="multiple")return;const t=d[n.id]||[];if(t.length===0)return;const r=n.options.filter(o=>o.isCorrect).map(o=>o.id),i=r.every(o=>t.includes(o)),l=t.every(o=>r.includes(o));C(i&&l?"correct":"incorrect"),setTimeout(()=>{C(null),p<h.length-1&&v(p+1)},800)},xe=()=>{p>0&&v(p-1)},z=()=>{if(!a)return;const t=Ae({...a,questions:h},d);L(t);const r={testId:a.id,startedAt:new Date(q).toISOString(),completedAt:new Date().toISOString(),answers:d,score:t.score,passed:t.passed,timeSpent:I};Te(a.id,a.channelId,r,a.version),w("review"),t.passed?X.celebrate():X.disappointed()},O=()=>h.map(t=>{const r=d[t.id]||[],i=t.options.filter(o=>o.isCorrect),l=i.map(o=>o.id);let c=!1;if(t.type==="single")c=r.length===1&&l.includes(r[0]);else{const o=l.every(P=>r.includes(P)),j=r.every(P=>l.includes(P));c=o&&j&&r.length>0}return{question:t,userAnswers:r,correctOptions:i,isCorrect:c}}),M=t=>{const r=Math.floor(t/60),i=t%60;return`${r}:${i.toString().padStart(2,"0")}`},ue=Object.keys(d).length;return y==="loading"||!a?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:a?"Loading test...":"No test available for this channel yet"}),e.jsx("button",{onClick:()=>N("/"),className:"mt-4 text-primary hover:underline text-sm",children:"Go back home"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(je,{title:`${a.title} | Code Reels`,description:a.description,canonical:`https://open-interview.github.io/test/${u}`}),e.jsx(Ne,{children:e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-mono",children:[y==="ready"&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`max-w-md w-full border bg-card rounded-lg p-6 relative overflow-hidden ${k?"border-amber-500/50":"border-border"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${g.gradient} opacity-30`}),e.jsxs("div",{className:"relative z-10",children:[k&&e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-500",children:"Pass Expired!"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New questions added - retake to recertify"})]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl ${g.secondary} flex items-center justify-center mx-auto mb-4 shadow-lg ${g.glow}`,children:e.jsx("span",{className:"text-3xl",children:g.icon})}),e.jsx("h1",{className:`text-xl font-bold mb-2 ${g.primary}`,children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),a.version>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-2 px-2 py-0.5 bg-primary/20 text-primary text-xs rounded-full",children:[e.jsx(W,{className:"w-3 h-3"})," v",a.version," - Updated"]})]}),e.jsxs("div",{className:"space-y-3 mb-6 text-sm",children:[e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Questions"}),e.jsxs("span",{className:"font-bold",children:["15 (random from ",a.questions.length,")"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Passing Score"}),e.jsxs("span",{className:"font-bold",children:[a.passingScore,"%"]})]}),e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Question Types"}),e.jsx("span",{className:"font-bold",children:"Single & Multiple Choice"})]}),S&&!k&&e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded border border-green-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Your Best"}),e.jsxs("span",{className:"font-bold text-green-500",children:[S.bestScore,"%"]})]}),S&&k&&e.jsxs("div",{className:"flex justify-between p-2 bg-amber-500/10 rounded border border-amber-500/30",children:[e.jsx("span",{className:"text-muted-foreground",children:"Previous Best"}),e.jsxs("span",{className:"font-bold text-amber-500",children:[S.bestScore,"% (expired)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:Q,className:`w-full py-3 ${g.badge} text-white font-bold rounded hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg ${g.glow}`,children:k?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5"})," Retake Test"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5"})," Start Test"]})}),e.jsx("button",{onClick:()=>N(`/channel/${u}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm",children:"Back to Channel"})]})]})]})}),y==="in-progress"&&n&&e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("header",{className:"border-b border-border p-3 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[p+1," / ",h.length]}),e.jsx("div",{className:"h-1 w-24 bg-muted/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(p+1)/h.length*100}%`}})})]}),e.jsxs("button",{onClick:ce,className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-medium transition-all ${$?"bg-primary/20 text-primary border border-primary/30":"bg-muted/30 text-muted-foreground border border-transparent"}`,title:$?"Auto-advance ON":"Auto-advance OFF",children:[e.jsx(_,{className:`w-3 h-3 ${$?"text-primary":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Auto"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-mono",children:M(I)})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[ue,"/",h.length," answered"]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(Y,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${n.type==="multiple"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:n.type==="multiple"?"Select all that apply":"Single choice"}),n.type==="multiple"&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",(d[n.id]||[]).length," selected)"]}),e.jsx("span",{className:`px-2 py-0.5 text-[10px] uppercase rounded ${n.difficulty==="beginner"?"bg-green-500/20 text-green-400":n.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:n.difficulty}),n.questionId&&e.jsx(ye,{questionId:n.questionId,questionType:"test",size:"sm"}),n.questionId&&e.jsx(K,{questionId:n.questionId,className:"ml-auto"})]}),e.jsx("h2",{className:"text-lg font-bold mb-6",children:T(n.question)}),e.jsx("div",{className:"space-y-2",children:n.options.map((t,r)=>{const i=(d[n.id]||[]).includes(t.id),l=b&&t.isCorrect,c=b==="incorrect"&&i&&!t.isCorrect,o=n.type==="multiple";return e.jsx("button",{onClick:()=>le(t.id),disabled:b!==null,className:`w-full p-4 text-left border rounded-lg transition-all ${l?"border-green-500 bg-green-500/20":c?"border-red-500 bg-red-500/20":i?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${b?"cursor-default":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`w-6 h-6 ${o?"rounded-md":"rounded-full"} border-2 flex items-center justify-center flex-shrink-0 ${l?"border-green-500 bg-green-500":c?"border-red-500 bg-red-500":i?"border-primary bg-primary":"border-muted-foreground/30"}`,children:[l&&e.jsx(F,{className:"w-4 h-4 text-white"}),c&&e.jsx(H,{className:"w-4 h-4 text-white"}),!b&&i&&e.jsx(F,{className:"w-4 h-4 text-primary-foreground"})]}),e.jsx("span",{className:"text-sm",children:T(t.text)})]})},t.id)})}),n.type==="multiple"&&!b&&e.jsx("p",{className:"mt-3 text-xs text-muted-foreground text-center",children:'Select all correct answers, then click "Confirm" to continue'})]},n.id)})})}),e.jsx("footer",{className:"border-t border-border p-3",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between",children:[e.jsxs("button",{onClick:xe,disabled:p===0,className:"flex items-center gap-1 px-4 py-2 text-sm disabled:opacity-30 hover:text-primary transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4"})," Previous"]}),e.jsx("div",{className:"flex gap-1 flex-wrap justify-center max-w-xs",children:h.map((t,r)=>e.jsx("button",{onClick:()=>v(r),className:`w-2 h-2 rounded-full transition-colors ${r===p?"bg-primary":d[t.id]?"bg-primary/50":"bg-muted/30"}`},t.id))}),p===h.length-1?n?.type==="multiple"?e.jsx("button",{onClick:()=>{const t=d[n.id]||[];if(t.length===0)return;const r=n.options.filter(o=>o.isCorrect).map(o=>o.id),i=r.every(o=>t.includes(o)),l=t.every(o=>r.includes(o));C(i&&l?"correct":"incorrect"),setTimeout(()=>{C(null),z()},800)},disabled:(d[n.id]||[]).length===0||b!==null,className:"px-4 py-2 bg-primary text-primary-foreground text-sm font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Confirm & Submit"}):e.jsx("button",{onClick:z,className:"px-4 py-2 bg-primary text-primary-foreground text-sm font-bold rounded hover:bg-primary/90 transition-colors",children:"Submit Test"}):n?.type==="multiple"?e.jsxs("button",{onClick:me,disabled:(d[n.id]||[]).length===0||b!==null,className:"flex items-center gap-1 px-4 py-2 text-sm bg-primary text-primary-foreground font-bold rounded hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:["Confirm ",e.jsx(Z,{className:"w-4 h-4"})]}):e.jsxs("button",{onClick:de,className:"flex items-center gap-1 px-4 py-2 text-sm hover:text-primary transition-colors",children:["Next ",e.jsx(Z,{className:"w-4 h-4"})]})]})})]}),y==="review"&&s&&e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background via-background to-muted/20",children:[e.jsxs("header",{className:`border-b p-4 relative overflow-hidden ${s.passed?"border-green-500/30":"border-orange-500/30"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${s.passed?"from-green-500/10 via-emerald-500/5 to-teal-500/10":"from-orange-500/10 via-amber-500/5 to-yellow-500/10"}`}),e.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${s.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:"Review Answers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tap any question to expand details"})]})]}),e.jsx(x.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:`flex items-center gap-3 px-4 py-2 rounded-xl ${s.passed?"bg-green-500/20 border border-green-500/30":"bg-orange-500/20 border border-orange-500/30"}`,children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-2xl font-bold ${s.passed?"text-green-500":"text-orange-500"}`,children:[s.score,"%"]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[s.correct,"/",s.total," correct"]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border/50",children:[e.jsx("div",{className:"flex bg-muted/30 rounded-lg p-1 gap-1",children:["all","incorrect","correct"].map(t=>e.jsx("button",{onClick:()=>ie(t),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${f===t?t==="correct"?"bg-green-500 text-white shadow-sm":t==="incorrect"?"bg-red-500 text-white shadow-sm":"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:t==="all"?`All (${s.total})`:t==="correct"?`âœ“ ${s.correct}`:`âœ— ${s.total-s.correct}`},t))}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>{const t=O(),r=t.map((i,l)=>l).filter(i=>{const l=t[i];return f==="correct"?l.isCorrect:f==="incorrect"?!l.isCorrect:!0});E.size===r.length?R(new Set):R(new Set(r))},className:"px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground border border-border rounded-lg transition-all hover:bg-muted/30",children:E.size>0?"Collapse All":"Expand All"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-2",children:[O().map((t,r)=>({item:t,idx:r})).filter(({item:t})=>f==="correct"?t.isCorrect:f==="incorrect"?!t.isCorrect:!0).map(({item:t,idx:r})=>{const i=E.has(r);return e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.02},className:`rounded-xl overflow-hidden border transition-all duration-300 ${t.isCorrect?"border-green-500/30 hover:border-green-500/50":"border-red-500/30 hover:border-red-500/50"} ${i?"shadow-lg":"shadow-sm hover:shadow-md"}`,children:[e.jsxs("button",{onClick:()=>{R(l=>{const c=new Set(l);return c.has(r)?c.delete(r):c.add(r),c})},className:`w-full px-4 py-3 flex items-center gap-3 transition-all ${t.isCorrect?"bg-gradient-to-r from-green-500/10 to-transparent hover:from-green-500/20":"bg-gradient-to-r from-red-500/10 to-transparent hover:from-red-500/20"}`,children:[e.jsx(x.div,{animate:{scale:i?1.1:1,rotate:i?360:0},transition:{type:"spring",stiffness:200},className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${t.isCorrect?"bg-green-500 shadow-lg shadow-green-500/30":"bg-red-500 shadow-lg shadow-red-500/30"}`,children:t.isCorrect?e.jsx(F,{className:"w-5 h-5 text-white"}):e.jsx(H,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsxs("span",{className:`text-sm font-bold ${t.isCorrect?"text-green-500":"text-red-500"}`,children:["Q",r+1]}),e.jsx("span",{className:`px-1.5 py-0.5 text-[9px] uppercase rounded-full font-medium ${t.question.difficulty==="beginner"?"bg-green-500/20 text-green-400":t.question.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.question.difficulty})]}),e.jsx("p",{className:`text-sm truncate ${i?"text-foreground":"text-muted-foreground"}`,children:t.question.question})]}),e.jsx(x.div,{animate:{rotate:i?180:0},transition:{duration:.2},className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-primary/20":"bg-muted/30"}`,children:e.jsx(Re,{className:`w-5 h-5 ${i?"text-primary":"text-muted-foreground"}`})})]}),e.jsx(Y,{children:i&&e.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-card border-t border-border/50",children:[e.jsx("p",{className:"font-medium mb-4 leading-relaxed",children:T(t.question.question)}),e.jsx("div",{className:"space-y-2",children:t.question.options.map((l,c)=>{const o=t.userAnswers.includes(l.id),j=l.isCorrect;return e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.05},className:`flex items-start gap-3 p-3 rounded-lg border transition-all ${j?"bg-green-500/10 border-green-500/40":o?"bg-red-500/10 border-red-500/40":"bg-muted/10 border-border/50"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${j?"bg-green-500 text-white":o?"bg-red-500 text-white":"bg-muted/50 text-muted-foreground"}`,children:j?e.jsx(fe,{className:"w-4 h-4"}):o?e.jsx(Qe,{className:"w-4 h-4"}):e.jsx("span",{className:"text-xs font-medium",children:String.fromCharCode(65+c)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:`text-sm ${j?"text-green-400 font-medium":o?"text-red-400":"text-muted-foreground"}`,children:T(l.text)})}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[j&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-[9px] uppercase rounded-full font-medium",children:"âœ“ Correct"}),o&&!j&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-[9px] uppercase rounded-full font-medium",children:"Your Pick"})]})]},l.id)})}),t.question.explanation&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-4 p-3 rounded-lg border ${t.isCorrect?"bg-blue-500/10 border-blue-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(W,{className:`w-4 h-4 flex-shrink-0 mt-0.5 ${t.isCorrect?"text-blue-400":"text-amber-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold uppercase ${t.isCorrect?"text-blue-400":"text-amber-400"}`,children:t.isCorrect?"ðŸ’¡ Why this is correct":"ðŸ“š Learn from this"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.question.explanation})]})]})}),t.question.questionId&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("a",{href:`/channel/${a.channelId}?q=${t.question.questionId}`,className:"inline-flex items-center gap-1.5 text-xs text-primary hover:text-primary/80 transition-colors",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Study full question"})]}),e.jsx(K,{questionId:t.question.questionId})]})]})})})]},t.question.id)}),O().filter(t=>f==="correct"?t.isCorrect:f==="incorrect"?!t.isCorrect:!0).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center ${f==="correct"?"bg-green-500/20":"bg-red-500/20"}`,children:f==="correct"?e.jsx(D,{className:"w-8 h-8 text-green-500"}):e.jsx(U,{className:"w-8 h-8 text-red-500"})}),e.jsx("p",{className:"text-muted-foreground",children:f==="correct"?"No correct answers to show":"No incorrect answers - Perfect score! ðŸŽ‰"})]})]})}),e.jsx("footer",{className:`border-t p-4 bg-background/95 backdrop-blur ${s.passed?"border-green-500/30":"border-orange-500/30"}`,children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-3",children:[e.jsxs("button",{onClick:Q,className:"flex-1 py-3 border border-border rounded-xl font-medium hover:bg-muted/50 transition-all flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>w("completed"),className:`flex-1 py-3 font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg ${s.passed?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-green-500/30 hover:shadow-green-500/50":"bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-orange-500/30 hover:shadow-orange-500/50"}`,children:[e.jsx(D,{className:"w-4 h-4"})," View Results"]})]})})]}),y==="completed"&&s&&e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full border border-border bg-card rounded-lg p-6 relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s.passed?"from-green-500/20 via-emerald-500/10 to-teal-500/20":"from-orange-500/20 via-amber-500/10 to-yellow-500/20"} opacity-50`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:`w-20 h-20 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-lg ${s.passed?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-orange-500 to-amber-600 shadow-orange-500/30"}`,children:s.passed?e.jsx(D,{className:"w-10 h-10 text-white"}):e.jsx(U,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold mb-1",children:s.passed?"ðŸŽ‰ Congratulations!":"Keep Practicing!"}),e.jsx("p",{className:"text-muted-foreground",children:s.passed?"You passed the test!":`You need ${a.passingScore}% to pass`})]}),e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted/20"}),e.jsx(x.circle,{cx:"64",cy:"64",r:"56",fill:"none",stroke:s.passed?"#22c55e":"#f97316",strokeWidth:"8",strokeLinecap:"round",initial:{strokeDasharray:"0 352"},animate:{strokeDasharray:`${s.score/100*352} 352`},transition:{duration:1,delay:.3}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs(x.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:`text-3xl font-bold ${s.passed?"text-green-500":"text-orange-500"}`,children:[s.score,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.correct,"/",s.total]})]})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm",children:[e.jsxs("div",{className:`flex justify-between p-2 rounded ${g.secondary}`,children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Spent"}),e.jsx("span",{className:"font-bold",children:M(I)})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-green-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correct Answers"}),e.jsx("span",{className:"font-bold text-green-500",children:s.correct})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-500/10 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Incorrect"}),e.jsx("span",{className:"font-bold text-red-500",children:s.total-s.correct})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("a",{href:$e(a.channelName,s.score,s.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${s.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(ee,{className:"w-4 h-4"})," Share on X"]}),e.jsxs("a",{href:ke(a.channelName,s.score,s.passed),target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 border rounded text-center text-sm hover:opacity-80 transition-all flex items-center justify-center gap-1 ${s.passed?"border-green-500/30 text-green-500":"border-border"}`,children:[e.jsx(ee,{className:"w-4 h-4"})," Share"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>w("review"),className:`w-full py-2 font-bold rounded transition-all flex items-center justify-center gap-2 ${s.passed?"bg-green-500 text-white hover:bg-green-600":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:[e.jsx(G,{className:"w-4 h-4"})," Review Answers"]}),e.jsxs("button",{onClick:Q,className:`w-full py-2 border font-bold rounded transition-all flex items-center justify-center gap-2 ${s.passed?"border-green-500 text-green-500 hover:bg-green-500/10":"border-primary text-primary hover:bg-primary/10"}`,children:[e.jsx(J,{className:"w-4 h-4"})," Try Again"]}),e.jsxs("button",{onClick:()=>N(`/channel/${u}`),className:"w-full py-2 text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"})," Back to Channel"]})]})]})]})})]})})]})}export{pt as default};
