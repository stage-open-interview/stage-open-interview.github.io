import{c as Ge,r as i,j as e,m as y,A as Te,X as Ue,al as lt,ai as Rt,ah as $t,u as Bt,E as Dt,k as qt,b as Ft,J as Wt,am as Ut,ak as Vt,an as Gt,t as Xe,ao as Ye,S as Ht,Z as zt}from"./index-Bb5bc9Dq.js";import{g as Kt}from"./data-D9ONYv5s.js";import{u as Qt,a as _t,b as Jt,S as Xt,V as Yt}from"./VoiceReminder-DMVhwrIj.js";import{S as Zt}from"./SEOHead-CApfqhSl.js";import{M as Ce,A as es,U as ts,F as ss}from"./UnifiedSearch-BXjkTzZC.js";import{bH as as,bF as ct}from"./EnhancedMermaid-CeER_1_5.js";import{S as ns,G as rs,Y as is,B as os,g as ls,c as cs,r as ds,a as dt,b as ps,Q as us}from"./spaced-repetition-BKiJnHiD.js";import{M as hs,r as ms,h as gs,v as fs}from"./index-CbLdUijL.js";import{u as pt,B as xs,C as Ze,a as Ve}from"./use-unified-toast-BEJqNzYt.js";import{L as We,T as bs,C as ys,G as ws,b as ut,B as et}from"./use-focus-trap-B3UEM0WV.js";import{E as vs}from"./external-link-CKrYzESY.js";import{F as ks}from"./file-text-C5G5BfBw.js";import{C as De}from"./check-CFZdmRp5.js";import{C as ht}from"./copy-CKeSW8Cr.js";import{L as tt}from"./lightbulb-ClEuuavh.js";import{C as js}from"./chevron-down-Ck_u8-nu.js";import{P as Ns}from"./play-DHC_rCXo.js";import{M as Ss}from"./message-square-CA1h2mJ_.js";import{S as Be}from"./sparkles-5qaI5_ia.js";import{V as Cs}from"./volume-x-CtdgdI0d.js";import{S as As}from"./settings-Djo4NlAU.js";import{V as Ts}from"./volume-2-KdXtV2o3.js";import{T as Is}from"./trash-2-zkLD-kEU.js";import{H as st}from"./haptics-U-QSL8hh.js";import{F as Ls}from"./FloatingButton-B3CnUb5C.js";import{u as Ps,a as Es}from"./use-transform-BkprDROv.js";import{R as Ms}from"./rotate-ccw-DqgH_7tr.js";import"./clock-CJly0H7l.js";import"./message-circle-R0k3ZU2C.js";import"./flag-BYg9723F.js";import"./index-CvbyFNTD.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Rs=Ge("mic-off",Os);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Bs=Ge("minimize-2",$s);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qs=Ge("send",Ds),Fs=[{path:"/",title:"Home",description:"Main dashboard with daily questions, learning paths, and quick access to all features",category:"main",keywords:["home","dashboard","start","main","overview"],priority:1},{path:"/learning-paths",title:"Learning Paths",description:"Browse and activate curated learning paths for different tech careers (Frontend, Backend, DevOps, etc.)",category:"main",keywords:["learning paths","paths","career","roadmap","frontend","backend","devops","fullstack"],priority:.9},{path:"/my-path",title:"My Learning Path",description:"View and manage your active learning paths and progress",category:"main",keywords:["my path","progress","active","current path"],priority:.9},{path:"/channels",title:"All Channels",description:"Browse all technical topics and interview channels",category:"main",keywords:["channels","topics","browse","all","categories"],priority:.9},{path:"/certifications",title:"Certification Prep",description:"Prepare for AWS, Kubernetes, Terraform, GCP, and Azure certifications",category:"main",keywords:["certifications","cert","exam","prep","aws","kubernetes","terraform"],priority:.9},{path:"/coding",title:"Coding Challenges",description:"Practice coding problems with real-time feedback",category:"main",keywords:["coding","challenges","practice","problems","leetcode","algorithms"],priority:.9},{path:"/tests",title:"Practice Tests",description:"Take timed practice tests to simulate real interviews",category:"main",keywords:["tests","practice","quiz","exam","timed","assessment"],priority:.8},{path:"/voice-interview",title:"Voice Interview Practice",description:"Practice interviews with AI voice interaction",category:"main",keywords:["voice","interview","speaking","practice","ai","conversation"],priority:.8},{path:"/review",title:"Spaced Repetition Review",description:"Review bookmarked questions using spaced repetition",category:"main",keywords:["review","srs","spaced repetition","bookmarks","revision"],priority:.8},{path:"/training",title:"Training Mode",description:"Focused training sessions on specific topics",category:"main",keywords:["training","practice","focused","session","drill"],priority:.8},{path:"/badges",title:"Badges & Achievements",description:"View your earned badges and achievements",category:"main",keywords:["badges","achievements","rewards","progress","gamification"],priority:.7},{path:"/whats-new",title:"What's New",description:"Latest features, updates, and improvements",category:"main",keywords:["new","updates","features","changelog","latest"],priority:.8},{path:"/about",title:"About",description:"Learn about Open-Interview and our mission",category:"main",keywords:["about","info","mission","team"],priority:.6},{path:"/stats",title:"Statistics",description:"View your learning statistics and progress",category:"main",keywords:["stats","statistics","progress","analytics","metrics"],priority:.7},{path:"/documentation",title:"Documentation",description:"Platform documentation and guides",category:"main",keywords:["docs","documentation","help","guide","manual"],priority:.6},{path:"/channel/data-structures",title:"Data Structures",description:"Arrays, linked lists, trees, graphs, hash tables, and more",category:"channel",keywords:["data structures","arrays","trees","graphs","hash tables","linked lists"],priority:.9},{path:"/channel/algorithms",title:"Algorithms",description:"Sorting, searching, graph algorithms, and problem-solving techniques",category:"channel",keywords:["algorithms","sorting","searching","graph","problem solving"],priority:.9},{path:"/channel/complexity-analysis",title:"Complexity Analysis",description:"Big O notation, time and space complexity analysis",category:"channel",keywords:["complexity","big o","time complexity","space complexity","analysis"],priority:.8},{path:"/channel/dynamic-programming",title:"Dynamic Programming",description:"DP patterns, memoization, and optimization problems",category:"channel",keywords:["dynamic programming","dp","memoization","optimization"],priority:.9},{path:"/channel/bit-manipulation",title:"Bit Manipulation",description:"Bitwise operations and bit-level problem solving",category:"channel",keywords:["bit manipulation","bitwise","binary","bits"],priority:.7},{path:"/channel/design-patterns",title:"Design Patterns",description:"Software design patterns and best practices",category:"channel",keywords:["design patterns","oop","architecture","patterns"],priority:.8},{path:"/channel/concurrency",title:"Concurrency",description:"Multithreading, synchronization, and parallel programming",category:"channel",keywords:["concurrency","multithreading","parallel","synchronization","threads"],priority:.8},{path:"/channel/math-logic",title:"Math & Logic",description:"Mathematical problems and logical reasoning",category:"channel",keywords:["math","logic","mathematics","reasoning","puzzles"],priority:.7},{path:"/channel/low-level",title:"Low-Level Programming",description:"Memory management, pointers, and system-level programming",category:"channel",keywords:["low level","memory","pointers","system programming","c","c++"],priority:.7},{path:"/channel/system-design",title:"System Design",description:"Scalable system architecture and design interviews",category:"channel",keywords:["system design","architecture","scalability","distributed systems"],priority:.9},{path:"/channel/frontend",title:"Frontend",description:"React, JavaScript, CSS, and frontend development",category:"channel",keywords:["frontend","react","javascript","css","html","web"],priority:.9},{path:"/channel/backend",title:"Backend",description:"Server-side development, APIs, and backend systems",category:"channel",keywords:["backend","server","api","rest","microservices"],priority:.9},{path:"/channel/database",title:"Database",description:"SQL, NoSQL, database design, and optimization",category:"channel",keywords:["database","sql","nosql","postgres","mongodb","mysql"],priority:.8},{path:"/channel/devops",title:"DevOps",description:"CI/CD, automation, infrastructure, and DevOps practices",category:"channel",keywords:["devops","ci/cd","automation","infrastructure","deployment"],priority:.8},{path:"/channel/sre",title:"SRE",description:"Site Reliability Engineering, monitoring, and incident response",category:"channel",keywords:["sre","reliability","monitoring","incident","observability"],priority:.8},{path:"/channel/kubernetes",title:"Kubernetes",description:"Container orchestration with Kubernetes",category:"channel",keywords:["kubernetes","k8s","containers","orchestration","docker"],priority:.8},{path:"/channel/aws",title:"AWS",description:"Amazon Web Services cloud platform",category:"channel",keywords:["aws","amazon","cloud","ec2","s3","lambda"],priority:.8},{path:"/channel/terraform",title:"Terraform",description:"Infrastructure as Code with Terraform",category:"channel",keywords:["terraform","iac","infrastructure as code","hashicorp"],priority:.7},{path:"/channel/data-engineering",title:"Data Engineering",description:"Data pipelines, ETL, and data infrastructure",category:"channel",keywords:["data engineering","etl","pipelines","data","spark"],priority:.7},{path:"/channel/machine-learning",title:"Machine Learning",description:"ML algorithms, models, and machine learning concepts",category:"channel",keywords:["machine learning","ml","ai","models","training"],priority:.8},{path:"/channel/generative-ai",title:"Generative AI",description:"LLMs, GPT, and generative AI technologies",category:"channel",keywords:["generative ai","llm","gpt","chatgpt","ai"],priority:.9},{path:"/channel/prompt-engineering",title:"Prompt Engineering",description:"Crafting effective prompts for AI models",category:"channel",keywords:["prompt engineering","prompts","llm","ai"],priority:.8},{path:"/channel/llm-ops",title:"LLMOps",description:"Operating and deploying large language models",category:"channel",keywords:["llmops","mlops","llm","deployment","operations"],priority:.7},{path:"/channel/computer-vision",title:"Computer Vision",description:"Image processing and computer vision techniques",category:"channel",keywords:["computer vision","cv","image processing","opencv"],priority:.7},{path:"/channel/nlp",title:"NLP",description:"Natural Language Processing and text analysis",category:"channel",keywords:["nlp","natural language","text","language processing"],priority:.7},{path:"/channel/python",title:"Python",description:"Python programming language and ecosystem",category:"channel",keywords:["python","programming","language","coding"],priority:.8},{path:"/channel/security",title:"Security",description:"Application security, cryptography, and security best practices",category:"channel",keywords:["security","cryptography","encryption","vulnerabilities"],priority:.8},{path:"/channel/networking",title:"Networking",description:"Network protocols, TCP/IP, and networking concepts",category:"channel",keywords:["networking","tcp/ip","protocols","network"],priority:.7},{path:"/channel/operating-systems",title:"Operating Systems",description:"OS concepts, processes, memory management",category:"channel",keywords:["operating systems","os","processes","memory"],priority:.7},{path:"/channel/linux",title:"Linux",description:"Linux system administration and commands",category:"channel",keywords:["linux","unix","shell","bash","commands"],priority:.7},{path:"/channel/testing",title:"Testing",description:"Software testing, unit tests, and QA practices",category:"channel",keywords:["testing","unit tests","qa","quality assurance"],priority:.8},{path:"/channel/behavioral",title:"Behavioral",description:"Behavioral interview questions and STAR method",category:"channel",keywords:["behavioral","interview","star","soft skills"],priority:.8},{path:"/certification/aws-saa",title:"AWS Solutions Architect Associate",description:"Prepare for AWS SAA-C03 certification exam",category:"certification",keywords:["aws","solutions architect","associate","saa","certification"],priority:.8},{path:"/certification/aws-sap",title:"AWS Solutions Architect Professional",description:"Prepare for AWS SAP-C02 certification exam",category:"certification",keywords:["aws","solutions architect","professional","sap","certification"],priority:.8},{path:"/certification/aws-dva",title:"AWS Developer Associate",description:"Prepare for AWS DVA-C02 certification exam",category:"certification",keywords:["aws","developer","associate","dva","certification"],priority:.8},{path:"/certification/aws-sysops",title:"AWS SysOps Administrator",description:"Prepare for AWS SOA-C02 certification exam",category:"certification",keywords:["aws","sysops","administrator","soa","certification"],priority:.7},{path:"/certification/aws-devops-pro",title:"AWS DevOps Engineer Professional",description:"Prepare for AWS DOP-C02 certification exam",category:"certification",keywords:["aws","devops","professional","dop","certification"],priority:.7},{path:"/certification/cka",title:"CKA - Kubernetes Administrator",description:"Prepare for Certified Kubernetes Administrator exam",category:"certification",keywords:["kubernetes","cka","administrator","certification","k8s"],priority:.8},{path:"/certification/ckad",title:"CKAD - Kubernetes Developer",description:"Prepare for Certified Kubernetes Application Developer exam",category:"certification",keywords:["kubernetes","ckad","developer","certification","k8s"],priority:.8},{path:"/certification/cks",title:"CKS - Kubernetes Security",description:"Prepare for Certified Kubernetes Security Specialist exam",category:"certification",keywords:["kubernetes","cks","security","certification","k8s"],priority:.7},{path:"/certification/terraform-associate",title:"Terraform Associate",description:"Prepare for HashiCorp Terraform Associate certification",category:"certification",keywords:["terraform","hashicorp","associate","certification","iac"],priority:.8},{path:"/certification/gcp-cloud-engineer",title:"GCP Cloud Engineer",description:"Prepare for Google Cloud Associate Engineer certification",category:"certification",keywords:["gcp","google cloud","engineer","certification"],priority:.7},{path:"/certification/azure-fundamentals",title:"Azure Fundamentals",description:"Prepare for Microsoft Azure AZ-900 certification",category:"certification",keywords:["azure","microsoft","fundamentals","az-900","certification"],priority:.7}];function Ws(n){return Fs.find(o=>o.path===n)}const Us={MLCEngine:class{},CreateMLCEngine:async()=>null,ChatCompletionMessageParam:{}},Ae=[{code:"en",name:"English",flag:"ðŸ‡ºðŸ‡¸"},{code:"es",name:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{code:"fr",name:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{code:"de",name:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{code:"hi",name:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",flag:"ðŸ‡®ðŸ‡³"},{code:"zh",name:"ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"},{code:"ja",name:"æ—¥æœ¬èªž",flag:"ðŸ‡¯ðŸ‡µ"},{code:"pt",name:"PortuguÃªs",flag:"ðŸ‡§ðŸ‡·"},{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ðŸ‡¸ðŸ‡¦"}];function Vs({pageContent:n,onNavigate:o,onAction:C,availableActions:p=[]}){const[b,S]=i.useState(!1),[x,w]=i.useState(!1),[v,f]=i.useState(!1),[N,O]=i.useState([]),[B,T]=i.useState(""),[P,H]=i.useState(!1),[m,u]=i.useState(!1),[D,R]=i.useState(!1),[F,_]=i.useState(null),[ee,Ie]=i.useState(!0),[te,J]=i.useState(""),[qe,X]=i.useState("Browser TTS"),[se,Le]=i.useState(null),[le,ce]=i.useState(!1),[ye,z]=i.useState(""),[A,we]=i.useState("groq"),[E,Pe]=i.useState("webspeech"),[q,Ee]=i.useState("en"),[Y,ve]=i.useState(!1),[de,Me]=i.useState(""),[ae,Oe]=i.useState(.95),[pe,ke]=i.useState(""),[K,je]=i.useState(""),[ue,Z]=i.useState(""),[c,U]=i.useState(""),[M,Q]=i.useState(""),[ne,he]=i.useState(""),[re,me]=i.useState([]),[ge,fe]=i.useState(!1),[I,Ne]=i.useState(!1),[V,ie]=i.useState(!1),W=i.useRef(null),G=i.useRef(null),xe=i.useRef(null),h=i.useRef(null),k=i.useRef(null),L=i.useRef(null),{toast:$}=pt();i.useEffect(()=>{A==="browser"&&!se&&Re()},[A]);const Re=async()=>{try{ce(!0),z("Initializing WebLLM...");const t=await Us.CreateMLCEngine("Phi-3-mini-4k-instruct-q4f16_1-MLC",{initProgressCallback:a=>{z(a.text),console.log("WebLLM loading:",a)}});Le(t),J("Phi-3-mini-4k (3.8B)"),z(""),ce(!1),$({title:"ðŸ¤– Browser AI Ready",description:"Phi-3 model loaded! Running locally in your browser."})}catch(t){console.error("Failed to initialize WebLLM:",t),ce(!1),z(""),$({title:"âš ï¸ WebLLM Failed",description:"Falling back to rule-based responses. Check console for details."})}};i.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const t=window.SpeechRecognition||window.webkitSpeechRecognition,a=new t;a.continuous=!1,a.interimResults=!0,a.lang=Se(q),a.onstart=()=>{R(!0)},a.onresult=s=>{const r=Array.from(s.results).map(d=>d[0]).map(d=>d.transcript).join("");T(r)},a.onerror=s=>{console.error("Speech recognition error:",s.error),s.error!=="no-speech"&&s.error!=="aborted"&&(R(!1),ie(!1))},a.onend=()=>{R(!1),I&&B.trim().length>0&&(console.log("PTT released, auto-sending:",B),setTimeout(()=>{Fe()},300))},G.current=a}},[q,I,B]),i.useEffect(()=>{const t=()=>{const a=window.speechSynthesis.getVoices();me(a)};t(),window.speechSynthesis.onvoiceschanged=t},[]),i.useEffect(()=>{const t=localStorage.getItem("ai-companion-settings");if(t)try{const s=JSON.parse(t);we(s.provider||"groq"),Pe(s.ttsProvider||"elevenlabs"),Ee(s.language||"en"),ve(s.autoSpeak||!1),Me(s.selectedVoice||""),Oe(s.speechRate||.95),ke(s.geminiKey||""),je(s.openaiKey||""),Z(s.groqKey||""),U(s.cohereKey||""),Q(s.huggingfaceKey||""),he(s.elevenlabsKey||"")}catch{}const a=localStorage.getItem("ai-companion-messages");if(a)try{O(JSON.parse(a))}catch{}},[]),i.useEffect(()=>{N.length>0&&localStorage.setItem("ai-companion-messages",JSON.stringify(N))},[N]),i.useEffect(()=>{xe.current?.scrollIntoView({behavior:"smooth"})},[N]),i.useEffect(()=>{b&&!x&&h.current?.focus()},[b,x]);const mt=()=>{localStorage.setItem("ai-companion-settings",JSON.stringify({provider:A,ttsProvider:E,language:q,autoSpeak:Y,selectedVoice:de,speechRate:ae,geminiKey:pe,openaiKey:K,groqKey:ue,cohereKey:c,huggingfaceKey:M,elevenlabsKey:ne})),f(!1)},He=()=>{if(G.current&&!D)try{G.current.lang=Se(q),G.current.start(),console.log("Started listening...")}catch(t){console.error("Failed to start speech recognition:",t)}},ze=()=>{if(G.current)try{G.current.stop(),R(!1),console.log("Stopped listening")}catch(t){console.error("Failed to stop speech recognition:",t)}},gt=()=>{const t=!I;Ne(t),t?(ve(!0),$({title:"Push-to-Talk Mode Active ðŸŽ™ï¸",description:"Hold SPACEBAR to speak, release to send. I'll respond with voice automatically!"})):(ze(),ie(!1),$({title:"Voice Mode Off",description:"Switched back to text mode"}))};i.useEffect(()=>{if(!I||!b)return;const t=s=>{if(s.code==="Space"&&s.target===document.body){if(s.preventDefault(),P||m){console.log("User pressed spacebar - interrupting AI"),Ke(),ie(!0),setTimeout(()=>{!P&&!m&&(T(""),He())},100);return}V||(ie(!0),T(""),He())}},a=s=>{s.code==="Space"&&V&&(s.preventDefault(),ie(!1),ze())};return window.addEventListener("keydown",t),window.addEventListener("keyup",a),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",a)}},[I,V,P,m,b]);const Ke=()=>{console.log("Interrupting AI..."),fe(!0),W.current&&(W.current.abort(),W.current=null),Je(),L.current&&(L.current.pause(),L.current.currentTime=0),H(!1),u(!1),setTimeout(()=>{fe(!1)},500)},ft=()=>{try{let t="";const a=document.title;t+=`Page Title: ${a}
`;const s=window.location.pathname;t+=`Current URL: ${s}
`;const r=Array.from(document.querySelectorAll("h1, h2, h3")).map(j=>j.textContent?.trim()).filter(Boolean).slice(0,10);r.length>0&&(t+=`
Page Headings:
${r.map(j=>`- ${j}`).join(`
`)}
`);const d=Array.from(document.querySelectorAll("a[href]")).map(j=>{const oe=j.getAttribute("href"),be=j.textContent?.trim();return{href:oe,text:be}}).filter(j=>j.href&&j.text&&j.href.startsWith("/")).slice(0,30);d.length>0&&(t+=`
Available Links on Page:
${d.map(j=>`- ${j.text} â†’ ${j.href}`).join(`
`)}
`);const g=Array.from(document.querySelectorAll("button")).map(j=>j.textContent?.trim()).filter(Boolean).slice(0,20);g.length>0&&(t+=`
Available Buttons:
${g.map(j=>`- ${j}`).join(`
`)}
`);const l=Array.from(document.querySelectorAll("p, li")).map(j=>j.textContent?.trim()).filter(j=>j&&j.length>20&&j.length<200).slice(0,5);return l.length>0&&(t+=`
Page Content Preview:
${l.join(`
`)}
`),t}catch(t){return console.error("Error extracting page content:",t),""}},xt=()=>{let t="";const a=ft();return a&&(t+=`
=== ACTUAL PAGE CONTENT (READ FROM DOM) ===
${a}
`),n&&(t+=`
=== PROVIDED PAGE DATA ===
`,n.type&&(t+=`Current page: ${n.type}
`),n.title&&(t+=`Title: ${n.title}
`),n.question&&(t+=`Question: ${n.question}
`),n.answer&&(t+=`Answer: ${n.answer}
`),n.explanation&&(t+=`Explanation: ${n.explanation}
`),n.code&&(t+=`Code:
${n.code}
`),n.difficulty&&(t+=`Difficulty: ${n.difficulty}
`),n.tags&&n.tags.length>0&&(t+=`Topics: ${n.tags.join(", ")}
`),n.content&&(t+=`Content: ${n.content}
`)),t},bt=t=>{/explain|this is|let me|here|see|look at|notice|important/i.test(t)&&setTimeout(()=>{const s=document.querySelector("h1, h2.text-2xl, .question-text");if(s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s.classList.add("ai-agent-highlight"),setTimeout(()=>s.classList.remove("ai-agent-highlight"),3e3)),/code|function|class|const|let|var/i.test(t)&&document.querySelectorAll("pre, code, .code-block").forEach((d,g)=>{setTimeout(()=>{d.classList.add("ai-agent-highlight"),g===0&&d.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>d.classList.remove("ai-agent-highlight"),3e3)},g*500)}),/answer|solution|explanation/i.test(t)){const r=document.querySelector('.answer-section, .explanation, [class*="answer"]');r&&setTimeout(()=>{r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("ai-agent-highlight"),setTimeout(()=>r.classList.remove("ai-agent-highlight"),3e3)},1e3)}},500)},yt=t=>{bt(t);const a=/\[ACTION:(.*?)\]/g,s=[];let r;for(;(r=a.exec(t))!==null;)s.push(r);return s.forEach(d=>{const g=d[1].trim();try{const l=JSON.parse(g);l.type==="navigate"&&o?(console.log("AI navigating to:",l.path),o(l.path),$({title:"ðŸ§­ Navigating",description:`Taking you to ${l.label||l.path}`})):l.type==="action"&&C?(console.log("AI performing action:",l.name),C(l.name,l.data),$({title:"âœ¨ Action Performed",description:l.description||`Executed ${l.name}`})):l.type==="scroll"?(console.log("AI scrolling to:",l.selector),wt(l.selector,l.description)):l.type==="highlight"?(console.log("AI highlighting:",l.selector),vt(l.selector,l.description)):l.type==="click"?(console.log("AI clicking button:",l.text),kt(l.text,l.description)):l.type==="suggest"&&$({title:"ðŸ’¡ Suggestion",description:l.message})}catch{console.warn("Failed to parse action:",g)}}),t.replace(a,"").trim()},wt=(t,a)=>{try{const s=document.querySelector(t);s?(s.scrollIntoView({behavior:"smooth",block:"center"}),s.classList.add("ai-agent-focus"),setTimeout(()=>{s.classList.remove("ai-agent-focus")},2e3),a&&$({title:"ðŸ‘ï¸ Looking at",description:a})):console.warn("Element not found:",t)}catch(s){console.error("Scroll action failed:",s)}},vt=(t,a)=>{try{const s=document.querySelectorAll(t);s.length>0?(s.forEach(r=>{r.classList.add("ai-agent-highlight"),r===s[0]&&r.scrollIntoView({behavior:"smooth",block:"center"})}),setTimeout(()=>{s.forEach(r=>{r.classList.remove("ai-agent-highlight")})},3e3),a&&$({title:"âœ¨ Highlighting",description:a})):console.warn("Elements not found:",t)}catch(s){console.error("Highlight action failed:",s)}},kt=(t,a)=>{try{const r=Array.from(document.querySelectorAll('button, a[role="button"], [role="button"]')).find(d=>{const g=d.textContent?.toLowerCase().trim()||"",l=t.toLowerCase().trim();return g.includes(l)||l.includes(g)});r?(r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("ai-agent-highlight"),setTimeout(()=>{r.click(),r.classList.remove("ai-agent-highlight"),$({title:"âœ… Clicked!",description:a||`Clicked "${t}"`})},500)):(console.warn("Button not found:",t),$({title:"âš ï¸ Button Not Found",description:`Couldn't find button: "${t}"`}))}catch(s){console.error("Click action failed:",s),$({title:"âŒ Click Failed",description:"Failed to click button"})}},jt=t=>{const a=Ae.find(oe=>oe.code===q)?.name||"English",s=xt(),r=window.location.pathname,d=Ws(r),g=`

AVAILABLE ROUTES (Complete Site Map):
You have access to the entire site structure. Here are the main sections:

ðŸ“ MAIN PAGES:
- / (Home) - Main dashboard with daily questions and learning paths
- /learning-paths - Browse and activate curated learning paths (Frontend, Backend, DevOps, etc.)
- /my-path - View your active learning paths and progress
- /channels - Browse all technical topics
- /certifications - Certification exam prep (AWS, K8s, Terraform, GCP, Azure)
- /coding - Coding challenges and practice
- /tests - Timed practice tests
- /voice-interview - Voice interview practice
- /review - Spaced repetition review (SRS)
- /training - Focused training sessions
- /badges - View achievements and badges
- /stats - Learning statistics and progress

ðŸŽ¯ POPULAR CHANNELS (use /channel/[id]):
- /channel/system-design - System architecture and scalability
- /channel/algorithms - Sorting, searching, graph algorithms
- /channel/data-structures - Arrays, trees, graphs, hash tables
- /channel/dynamic-programming - DP patterns and optimization
- /channel/frontend - React, JavaScript, CSS
- /channel/backend - APIs, microservices, server-side
- /channel/database - SQL, NoSQL, database design
- /channel/aws - Amazon Web Services
- /channel/kubernetes - Container orchestration
- /channel/devops - CI/CD, automation, infrastructure
- /channel/machine-learning - ML algorithms and models
- /channel/generative-ai - LLMs, GPT, AI technologies
- /channel/python - Python programming
- /channel/security - Application security and cryptography
- /channel/behavioral - Behavioral interview questions

ðŸ“œ CERTIFICATIONS (use /certification/[id]):
- /certification/aws-saa - AWS Solutions Architect Associate
- /certification/aws-sap - AWS Solutions Architect Professional
- /certification/cka - Kubernetes Administrator
- /certification/ckad - Kubernetes Developer
- /certification/terraform-associate - Terraform Associate
- /certification/gcp-cloud-engineer - GCP Cloud Engineer
- /certification/azure-fundamentals - Azure Fundamentals

CURRENT LOCATION: ${r}${d?` (${d.title})`:""}

NAVIGATION RULES:
- ALWAYS read "Available Links on Page" from the DOM content above
- ONLY navigate to paths that exist in "Available Links on Page"
- If user asks for "DevOps path", navigate to /learning-paths (not /learning-paths/devops)
- If user asks for a topic channel, use /channel/[topic-id]
- If user asks for certification, use /certification/[cert-id]
- NEVER make up paths - only use paths from the sitemap or DOM content
- When in doubt, navigate to the parent page (e.g., /learning-paths instead of /learning-paths/something)`;let l="";return ee&&(o||C)&&(l=`

AGENT CAPABILITIES:
You are an intelligent agent that can interact with the application. You can:

1. NAVIGATE - Take users to different pages
   Format: [ACTION:{"type":"navigate","path":"/path","label":"Page Name"}]
   Examples:
   - [ACTION:{"type":"navigate","path":"/","label":"Home"}]
   - [ACTION:{"type":"navigate","path":"/channel/system-design","label":"System Design"}]
   - [ACTION:{"type":"navigate","path":"/certification/aws-saa","label":"AWS SAA Cert"}]

2. PERFORM ACTIONS - Trigger page actions
   Format: [ACTION:{"type":"action","name":"actionName","data":{},"description":"What you did"}]
   Available actions: ${p.join(", ")||"None on this page"}
   Examples:
   - [ACTION:{"type":"action","name":"nextQuestion","description":"Moving to next question"}]
   - [ACTION:{"type":"action","name":"showAnswer","description":"Revealing the answer"}]
   - [ACTION:{"type":"action","name":"bookmark","description":"Bookmarked this question"}]

3. CLICK BUTTON - Click any button on the page
   Format: [ACTION:{"type":"click","text":"Button Text","description":"What you're clicking"}]
   Examples:
   - [ACTION:{"type":"click","text":"next question","description":"Moving to next question"}]
   - [ACTION:{"type":"click","text":"Show Answer","description":"Revealing the answer"}]
   - [ACTION:{"type":"click","text":"Continue Learning","description":"Continuing the path"}]
   
   CRITICAL BUTTON CLICKING RULES:
   - If user says "next" or "next question" and you see a button with "next" â†’ CLICK IT IMMEDIATELY
   - If user says "show answer" and you see "Show Answer" button â†’ CLICK IT
   - If user says "continue" and you see "Continue" button â†’ CLICK IT
   - Match user intent to button text and click without asking
   - Don't explain what the button does - just click it and say "Done!"

4. SCROLL TO ELEMENT - Scroll page to specific element
   Format: [ACTION:{"type":"scroll","selector":"CSS selector","description":"What you're showing"}]
   Examples:
   - [ACTION:{"type":"scroll","selector":"h1","description":"Scrolling to the main heading"}]
   - [ACTION:{"type":"scroll","selector":".answer-section","description":"Showing the answer section"}]

5. HIGHLIGHT TEXT - Highlight specific text on page (like a teacher pointing)
   Format: [ACTION:{"type":"highlight","selector":"CSS selector","description":"What you're highlighting"}]
   Examples:
   - [ACTION:{"type":"highlight","selector":"code","description":"Highlighting the code example"}]
   - [ACTION:{"type":"highlight","selector":".question-text","description":"Focusing on the question"}]

6. SUGGEST - Provide proactive suggestions
   Format: [ACTION:{"type":"suggest","message":"Your suggestion"}]
   Example: [ACTION:{"type":"suggest","message":"Try the practice mode to test your knowledge!"}]

WHEN TO USE AGENT CAPABILITIES:
- User asks "what should I do next?" â†’ Navigate to relevant page or suggest action
- User seems stuck â†’ Suggest next steps or navigate to easier content
- User completes a topic â†’ Navigate to next topic or related content
- User asks to see something â†’ Navigate there directly
- User wants to practice â†’ Trigger practice mode or navigate to exercises
- User mentions a topic (e.g., "kubernetes") â†’ Navigate to /channel/kubernetes
- User mentions certification (e.g., "AWS cert") â†’ Navigate to /certifications or specific cert
- User asks "explain this" â†’ Scroll to relevant section and highlight it
- User asks "where is X?" â†’ Scroll to X and highlight it
- User asks "show me the answer" â†’ Scroll to answer section and highlight it
- When explaining, use scroll and highlight to guide user's attention like a teacher
- Be proactive! Suggest next steps even when not explicitly asked

TEACHING BEHAVIOR (Like a Real Teacher):
- When explaining something, scroll to it first: [ACTION:{"type":"scroll","selector":"..."}]
- Highlight important parts while explaining: [ACTION:{"type":"highlight","selector":"..."}]
- Example explaining a question: "This question is about CI/CD pipelines. [ACTION:scroll to .question-text] It asks how to handle polyglot microservices - that means services in different languages like Node.js, Python, Java. [ACTION:highlight key terms] The key is creating a two-layer pipeline: a common layer for security and deployment, plus language-specific layers for builds and tests."
- Use scroll + highlight together for maximum clarity
- Guide user's eyes to what you're talking about
- Read the actual page content and explain what you see

IMPORTANT:
- Use actions naturally in conversation
- Explain what you're doing before/after the action
- Actions are embedded in your response text
- Multiple actions can be used in one response
- Always provide context for why you're taking an action`),`You are an expert AI learning companion, tutor, and intelligent agent. You help users learn through conversation, explanation, debate, AND by actively guiding them through the application.

Language: Respond in ${a}

Current Page Context:
${s||"No specific page content available"}
${g}
${l}

Conversation History:
${N.slice(-5).map(oe=>`${oe.role==="user"?"User":"Assistant"}: ${oe.content}`).join(`
`)}

User: ${t}

CRITICAL ANTI-LOOP RULES:
- Check conversation history above
- If you already asked a question, DON'T ask it again
- If user says "yes", "ok", "sure", "go ahead" â†’ EXECUTE ACTION immediately
- If you see you're repeating yourself â†’ STOP and take action instead
- Maximum 1 question per response, then ACT on next turn

Instructions:
- Detect user intent: navigation vs explanation vs question
- For NAVIGATION requests ("take me to", "show me", "go to"): Be brief (1-2 sentences)
- For EXPLANATION requests ("explain", "what is", "how does", "why"): Be detailed (3-5 sentences)
- For QUESTIONS about content: Read the page and explain what you see
- When user says "yes", "ok", "sure" â†’ TAKE ACTION immediately, don't ask again
- Don't repeat yourself - if you just asked a question, don't ask it again
- Read conversation history to avoid loops
${ee?`
AGENT BEHAVIOR:
- Read "ACTUAL PAGE CONTENT (READ FROM DOM)" to understand current page
- If user asks "explain this" or "what is this": Read the page content and explain it in detail
- Use scroll and highlight when explaining: [ACTION:scroll] then explain, [ACTION:highlight] key parts
- If user confirms (yes/ok/sure), execute the action immediately
- Don't ask permission twice - if user agreed, DO IT
- Example explaining: "This is a CI/CD pipeline question. [ACTION:scroll to question] It asks about polyglot microservices. [ACTION:highlight key terms] The key challenge is handling multiple languages..."
- If content is on current page, point it out briefly: "DevOps path is here! Starting it now."
- Only navigate if content is NOT on current page
- CRITICAL: Only use links from "Available Links on Page"
- CRITICAL: Only click buttons from "Available Buttons"
- CRITICAL: Never navigate to paths that don't exist
- CRITICAL: Check conversation history - if you already asked something, don't ask again`:""}

RESPONSE LENGTH RULES:
- Navigation/Action: 1-2 sentences (brief)
- Explanation/Teaching: 3-5 sentences (detailed)
- Questions: 2-3 sentences (informative)
- Detect keywords: "explain", "what", "how", "why" â†’ Give detailed response
- Detect keywords: "take me", "show", "go to", "start" â†’ Give brief response

Assistant (in ${a}):`},Fe=async()=>{const t=B.trim();if(!t||P)return;A==="browser"?(console.log("Using browser LLM (no API key needed)"),J("Browser LLM")):(A==="gemini"?pe:A==="openai"?K:A==="groq"?ue:A==="cohere"?c:M)||(console.log("No API key, using browser fallback"),J("Browser LLM (No API Key)"));const a={id:Date.now().toString(),role:"user",content:t,timestamp:Date.now()};O(r=>[...r,a]),T(""),H(!0),W.current=new AbortController;const s=setTimeout(()=>{W.current&&(console.log("Request timeout - aborting"),W.current.abort())},3e4);try{const r=jt(t);let g=await Nt(A,A==="browser"?"":A==="gemini"?pe:A==="openai"?K:A==="groq"?ue:A==="cohere"?c:M,r,W.current.signal);ee&&(g=yt(g)||g);const l={id:(Date.now()+1).toString(),role:"assistant",content:g,timestamp:Date.now()};if(O(j=>[...j,l]),(I||Y)&&!ge){console.log("Auto-speaking response in voice mode:",I,"autoSpeak:",Y);try{await _e(g)}catch(j){console.error("TTS error (non-fatal):",j)}}else console.log("Not auto-speaking. voiceMode:",I,"autoSpeak:",Y,"isInterrupting:",ge)}catch(r){if(r.name==="AbortError"){console.log("Generation interrupted by user");return}console.error("AI Companion error:",r);const d={id:(Date.now()+1).toString(),role:"assistant",content:`Sorry, I encountered an error: ${r.message||"Please try again"}`,timestamp:Date.now()};O(g=>[...g,d])}finally{clearTimeout(s),H(!1),u(!1),W.current=null,console.log("Message send complete, ready for next input")}},Nt=async(t,a,s,r)=>{if(t==="browser")return await Qe(s);try{let d;return t==="groq"?d=await St(a,s,r):t==="gemini"?d=await Ct(a,s,r):t==="openai"?d=await At(a,s,r):t==="cohere"?d=await Tt(a,s,r):d=await It(a,s,r),d}catch(d){return console.error(`${t} failed, falling back to browser LLM:`,d),await Qe(s)}},Qe=async t=>{if(se)try{console.log("Using WebLLM (Phi-3)"),J("Phi-3-mini-4k (3.8B)");const d=t.match(/User: (.+?)(?:\n\n|$)/),g=d?d[1].trim():t,j=[{role:"system",content:"You are a helpful AI assistant. Answer questions clearly and concisely in 2-3 sentences. Be direct and helpful."},{role:"user",content:g}],be=(await se.chat.completions.create({messages:j,temperature:.7,max_tokens:150,top_p:.9})).choices[0]?.message?.content||"";if(be.length<10||be.includes("ï¿½")||/[^\x00-\x7F]{20,}/.test(be))throw console.warn("WebLLM generated invalid response, falling back"),new Error("Invalid response");return be}catch(d){console.error("WebLLM generation failed:",d)}if("ai"in window&&"languageModel"in window.ai)try{console.log("Using Chrome Built-in AI (Gemini Nano)"),J("Chrome AI (Gemini Nano)");const d=t.match(/User: (.+?)(?:\n\n|$)/),g=d?d[1].trim():t,l=await window.ai.languageModel.create({systemPrompt:"You are a helpful assistant. Answer briefly and clearly."}),j=await l.prompt(g);return l.destroy(),j}catch(d){console.warn("Chrome Built-in AI failed:",d)}console.log("Using rule-based fallback"),J("Browser LLM (Rule-based)");const a=t.toLowerCase(),s=t.match(/User: (.+?)(?:\n|$)/),r=s?s[1].toLowerCase():a;return r.includes("take me")||r.includes("navigate")||r.includes("go to")?r.includes("devops")?"Taking you to the Learning Paths page where you can find the DevOps Engineer path!":r.includes("home")?"Taking you home!":r.includes("learning path")||r.includes("paths")?"Taking you to Learning Paths!":r.includes("certification")||r.includes("cert")?"Taking you to Certifications!":"Where would you like to go? Try: home, learning paths, certifications, or channels.":r.includes("explain")||r.includes("what is")||r.includes("how does")?"I'm using basic rule-based responses. The Phi-3 model may not be working correctly. Try using Groq (free API) for better responses!":r.includes("yes")||r.includes("ok")||r.includes("sure")||r.includes("go ahead")?"Great! Let me help you with that.":r.includes("help")||r.includes("what can")?"I can help you navigate the site, find learning paths, and guide your learning journey. Try asking me to take you somewhere!":"I'm having trouble with the browser AI. Try switching to Groq (free) in settings for better responses!"},St=async(t,a,s)=>{const r=["llama-3.3-70b-versatile","llama-3.1-70b-versatile","llama-3.2-90b-text-preview","mixtral-8x7b-32768","gemma2-9b-it"];for(const d of r)try{J(`Groq: ${d}`);const g=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:d,messages:[{role:"user",content:a}],temperature:.7,max_tokens:250}),signal:s});if(!g.ok)continue;const l=await g.json();if(l.choices?.[0]?.message?.content)return l.choices[0].message.content}catch{}throw new Error("All Groq models failed")},Ct=async(t,a,s)=>{const r=["gemini-1.5-pro-latest","gemini-1.5-flash-latest","gemini-pro"];for(const d of r)try{const g=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${d}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}],generationConfig:{temperature:.7,maxOutputTokens:250}})});if(!g.ok)continue;const l=await g.json();if(l.candidates?.[0]?.content?.parts?.[0]?.text)return l.candidates[0].content.parts[0].text}catch{}throw new Error("All Gemini models failed")},At=async(t,a,s)=>{const r=["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"];for(const d of r)try{const g=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:d,messages:[{role:"user",content:a}],temperature:.7,max_tokens:250})});if(!g.ok)continue;const l=await g.json();if(l.choices?.[0]?.message?.content)return l.choices[0].message.content}catch{}throw new Error("All OpenAI models failed")},Tt=async(t,a,s)=>{const r=["command-r-plus","command-r","command"];for(const d of r)try{const g=await fetch("https://api.cohere.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:d,prompt:a,max_tokens:250,temperature:.7})});if(!g.ok)continue;const l=await g.json();if(l.generations?.[0]?.text)return l.generations[0].text}catch{}throw new Error("All Cohere models failed")},It=async(t,a,s)=>{const r=["mistralai/Mixtral-8x7B-Instruct-v0.1","mistralai/Mistral-7B-Instruct-v0.2"];for(const d of r)try{const g=await fetch(`https://api-inference.huggingface.co/models/${d}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({inputs:a,parameters:{max_new_tokens:1024,temperature:.7}})});if(!g.ok)continue;const l=await g.json();if(l[0]?.generated_text)return l[0].generated_text}catch{}throw new Error("All HuggingFace models failed")},_e=async t=>{console.log("speakMessageWithTTS called with:",{ttsProvider:E,hasElevenlabsKey:!!ne,hasOpenaiKey:!!K,textLength:t.length});try{E==="elevenlabs"&&ne?(console.log("Using ElevenLabs TTS"),X("ElevenLabs"),await Lt(t)):E==="openai"&&K?(console.log("Using OpenAI TTS"),X("OpenAI TTS"),await Pt(t)):(console.log("Using Web Speech API"),X("Browser TTS"),$e(t))}catch(a){console.error("TTS error:",a),E!=="webspeech"&&(console.log("Falling back to Web Speech API"),X("Browser TTS (Fallback)"),$e(t))}},Lt=async t=>{try{const a={en:"EXAVITQu4vr4xnSDxMaL",es:"VR6AewLTigWG4xSOukaG",fr:"cgSgspJ2msm6clMCkdW9",de:"iP95p4xoKVk53GoZ742B",hi:"pFZP5JQG7iQjIQuC4Bku",zh:"XB0fDUnXU5powFXDhCwa",ja:"jBpfuIE2acCO8z3wKNLl",pt:"yoZ06aMxZJJ28mfd3POQ",ar:"onwK4e9ZLuTAKqWW03F9"},s=a[q]||a.en,r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${s}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":ne},body:JSON.stringify({text:t,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.75}})});if(r.ok){const d=await r.blob(),g=URL.createObjectURL(d);L.current&&(L.current.src=g,L.current.onplay=()=>u(!0),L.current.onended=()=>u(!1),L.current.onerror=()=>u(!1),await L.current.play());return}}catch{console.warn("ElevenLabs TTS failed, falling back to Web Speech")}$e(t)},Pt=async t=>{try{const a=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify({model:"tts-1-hd",voice:"nova",input:t,speed:ae})});if(a.ok){const s=await a.blob(),r=URL.createObjectURL(s);L.current&&(L.current.src=r,L.current.onplay=()=>u(!0),L.current.onended=()=>u(!1),L.current.onerror=()=>u(!1),await L.current.play());return}}catch{console.warn("OpenAI TTS failed, falling back to Web Speech")}$e(t)},$e=t=>{if(console.log("speakWithWebSpeech called"),"speechSynthesis"in window){console.log("Speech synthesis available, speaking..."),window.speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(t);if(a.lang=Se(q),a.rate=ae,a.pitch=1,de){const s=re.find(r=>r.name===de);s&&(a.voice=s,console.log("Using selected voice:",s.name))}a.onstart=()=>{console.log("Speech started"),u(!0)},a.onend=()=>{console.log("Speech ended"),u(!1)},a.onerror=s=>{console.error("Speech error:",s),u(!1)},k.current=a,window.speechSynthesis.speak(a),console.log("Speech queued")}else console.error("Speech synthesis not available")},Je=()=>{console.log("Stopping speech..."),"speechSynthesis"in window&&(window.speechSynthesis.cancel(),setTimeout(()=>{window.speechSynthesis.cancel()},10)),L.current&&(L.current.pause(),L.current.currentTime=0,L.current.src=""),u(!1),console.log("Speech stopped")},Se=t=>({en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",hi:"hi-IN",zh:"zh-CN",ja:"ja-JP",pt:"pt-BR",ar:"ar-SA"})[t]||"en-US",Et=async(t,a)=>{await navigator.clipboard.writeText(t),_(a),setTimeout(()=>_(null),2e3)},Mt=()=>{confirm("Clear all conversation history?")&&(O([]),localStorage.removeItem("ai-companion-messages"))},Ot=[{label:"Explain this",prompt:"Can you explain this topic in simple terms?"},{label:"Give example",prompt:"Can you give me a practical example?"},{label:"What next?",prompt:"What should I learn next? Guide me!"},{label:"Quiz me",prompt:"Can you quiz me on this topic?"}];return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes ai-agent-pulse {
          0%, 100% { 
            box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.7);
            outline: 3px solid rgba(168, 85, 247, 0.5);
          }
          50% { 
            box-shadow: 0 0 0 15px rgba(168, 85, 247, 0);
            outline: 3px solid rgba(168, 85, 247, 1);
          }
        }
        
        @keyframes ai-agent-highlight-bg {
          0%, 100% { 
            background-color: rgba(168, 85, 247, 0.15);
          }
          50% { 
            background-color: rgba(168, 85, 247, 0.35);
          }
        }
        
        @keyframes ai-agent-glow {
          0%, 100% {
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.5);
          }
          50% {
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.8);
          }
        }
        
        .ai-agent-focus {
          animation: ai-agent-pulse 1s ease-in-out 2;
          outline-offset: 4px;
          border-radius: 8px;
          transition: all 0.3s ease;
        }
        
        .ai-agent-highlight {
          animation: ai-agent-highlight-bg 1s ease-in-out 3, ai-agent-glow 1s ease-in-out 3;
          outline: 3px solid rgba(168, 85, 247, 0.9) !important;
          outline-offset: 4px;
          border-radius: 8px;
          transition: all 0.3s ease;
          position: relative;
          z-index: 10;
        }
        
        .ai-agent-highlight::before {
          content: 'ðŸ‘ï¸ AI is looking here';
          position: absolute;
          top: -30px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
          color: white;
          padding: 4px 12px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
          white-space: nowrap;
          box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
          z-index: 1000;
          animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
          to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
      `}),!b&&e.jsx(y.button,{onClick:()=>S(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"fixed bottom-28 right-6 z-40 w-14 h-14 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow lg:bottom-6",title:"AI Companion",children:e.jsx(Ss,{className:"w-6 h-6 text-white"})}),e.jsx(Te,{children:b&&e.jsxs(y.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:`fixed z-50 bg-card border border-border rounded-2xl shadow-2xl flex flex-col ${x?"bottom-6 right-6 w-80 h-16":"bottom-6 right-6 w-96 h-[600px]"}`,children:[e.jsx("div",{className:"p-4 border-b border-border bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"AI Companion"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ae.find(t=>t.code===q)?.flag," ",Ae.find(t=>t.code===q)?.name,I&&" â€¢ Voice Mode ðŸŽ™ï¸"]}),le&&ye&&e.jsxs("p",{className:"text-xs text-blue-500 font-mono animate-pulse",children:["â³ ",ye]}),te&&!le&&e.jsxs("p",{className:"text-xs text-purple-500 font-mono",children:["ðŸ¤– ",te," | ðŸ”Š ",qe]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(P||m)&&e.jsx("button",{onClick:Ke,className:"p-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg transition-colors",title:"Interrupt",children:e.jsx(Ue,{className:"w-4 h-4 text-red-500"})}),m&&e.jsx("button",{onClick:Je,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:gt,className:`p-2 rounded-lg transition-colors ${I?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"hover:bg-muted"}`,title:I?"Exit Voice Mode":"Enter Voice Mode",children:I?e.jsx(Ce,{className:"w-4 h-4"}):e.jsx(Rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(!v),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(!x),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:x?e.jsx(as,{className:"w-4 h-4"}):e.jsx(Bs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(Ue,{className:"w-4 h-4"})})]})]})}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{children:v&&e.jsx(y.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden border-b border-border bg-muted/30",children:e.jsxs("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"AI Provider"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["browser","groq","gemini","openai"].map(t=>e.jsx("button",{onClick:()=>we(t),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${A===t?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-muted hover:bg-muted/80"}`,children:t==="browser"?"ðŸŒ Browser":t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[A==="browser"&&"âœ… Free, works offline, no API key needed",A==="groq"&&"âš¡ Free, fast, recommended",A==="gemini"&&"ðŸ¤– Google AI",A==="openai"&&"ðŸ”¥ Best quality, paid"]})]}),A!=="browser"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"API Key"}),e.jsx("input",{type:"password",value:A==="gemini"?pe:A==="openai"?K:A==="groq"?ue:A==="cohere"?c:M,onChange:t=>{A==="gemini"?ke(t.target.value):A==="openai"?je(t.target.value):A==="groq"?Z(t.target.value):A==="cohere"?U(t.target.value):Q(t.target.value)},placeholder:"Enter API key",className:"w-full px-3 py-1.5 text-sm bg-background border border-border rounded-lg focus:outline-none focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Language"}),e.jsx("select",{value:q,onChange:t=>Ee(t.target.value),className:"w-full px-3 py-1.5 text-sm bg-background border border-border rounded-lg focus:outline-none focus:border-primary",children:Ae.map(t=>e.jsxs("option",{value:t.code,children:[t.flag," ",t.name]},t.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Voice Provider (TTS)"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["webspeech","elevenlabs","openai"].map(t=>e.jsx("button",{onClick:()=>Pe(t),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${E===t?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"bg-muted hover:bg-muted/80"}`,children:t==="webspeech"?"Browser":t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E==="webspeech"&&"âœ… Free, works without API key",E==="elevenlabs"&&"ðŸŽ™ï¸ Best quality, free 10k/mo (API key needed)",E==="openai"&&"ðŸ”Š High quality, paid (API key needed)"]})]}),(E==="elevenlabs"||E==="openai")&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-semibold mb-1 block",children:[E==="elevenlabs"?"ElevenLabs":"OpenAI"," TTS API Key"]}),e.jsx("input",{type:"password",value:E==="elevenlabs"?ne:K,onChange:t=>{E==="elevenlabs"?he(t.target.value):je(t.target.value)},placeholder:"Enter TTS API key",className:"w-full px-3 py-1.5 text-sm bg-background border border-border rounded-lg focus:outline-none focus:border-primary"})]}),E==="webspeech"&&re.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Voice Selection"}),e.jsxs("select",{value:de,onChange:t=>Me(t.target.value),className:"w-full px-3 py-1.5 text-sm bg-background border border-border rounded-lg focus:outline-none focus:border-primary",children:[e.jsx("option",{value:"",children:"Default Voice"}),re.filter(t=>t.lang.startsWith(Se(q).split("-")[0])).map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.lang,")"]},t.name))]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[re.filter(t=>t.lang.startsWith(Se(q).split("-")[0])).length," voices available for ",Ae.find(t=>t.code===q)?.name]})]}),E==="webspeech"&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-semibold mb-1 block",children:["Speech Rate: ",ae.toFixed(2),"x"]}),e.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.05",value:ae,onChange:t=>Oe(parseFloat(t.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Slower"}),e.jsx("span",{children:"Faster"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"auto-speak",checked:Y,onChange:t=>ve(t.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"auto-speak",className:"text-xs",children:"Auto-speak responses (always on in voice mode)"})]}),e.jsx("button",{onClick:mt,className:"w-full px-3 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg text-sm font-medium hover:opacity-90 transition-opacity",children:"Save Settings"})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:N.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-3 text-purple-500"}),e.jsx("h3",{className:"font-bold mb-2",children:"Hi! I'm your AI companion"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"I can explain, debate, and chat about anything on this page!"}),G.current&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-purple-500"}),e.jsx("p",{className:"text-sm font-semibold",children:"Push-to-Talk Voice Mode Available!"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Click the microphone icon in the header for voice conversation"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"ðŸŽ™ï¸ Hold SPACEBAR to speak"}),e.jsx("p",{children:"ðŸš€ Release to send automatically"}),e.jsx("p",{children:"ðŸ”Š AI responds with voice"}),e.jsx("p",{children:"âš¡ Simple and reliable!"})]})]}),ee&&(o||p.length>0)&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Be,{className:"w-4 h-4 text-blue-500"}),e.jsx("p",{className:"text-sm font-semibold",children:"Intelligent Agent Mode Active!"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"I can navigate, suggest next steps, and interact with the page"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"ðŸ§­ Navigate to different pages"}),e.jsx("p",{children:"ðŸ’¡ Suggest what to learn next"}),e.jsx("p",{children:"ðŸŽ¯ Guide your learning journey"}),e.jsx("p",{children:"âœ¨ Click buttons and trigger actions"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ot.map(t=>e.jsx("button",{onClick:()=>{T(t.prompt),h.current?.focus()},className:"px-3 py-2 bg-muted hover:bg-muted/80 rounded-lg text-xs font-medium transition-colors",children:t.label},t.label))})]}):e.jsxs(e.Fragment,{children:[N.map(t=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${t.role==="user"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content}),t.role==="assistant"&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>_e(t.content),className:"p-1 hover:bg-background/50 rounded transition-colors",title:"Speak",children:e.jsx(Ts,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Et(t.content,t.id),className:"p-1 hover:bg-background/50 rounded transition-colors",title:"Copy",children:F===t.id?e.jsx(De,{className:"w-3 h-3"}):e.jsx(ht,{className:"w-3 h-3"})})]})]})]},t.id)),P&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx(We,{className:"w-4 h-4 text-white animate-spin"})}),e.jsx("div",{className:"bg-muted rounded-2xl px-4 py-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Thinking..."})})]}),e.jsx("div",{ref:xe})]})}),e.jsxs("div",{className:"p-4 border-t border-border",children:[I&&e.jsxs("div",{className:`mb-2 p-2 border rounded-lg flex items-center justify-center gap-2 ${V?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30":P||m?"bg-gradient-to-r from-orange-500/20 to-red-500/20 border-orange-500/30":"bg-muted/30 border-border"}`,children:[e.jsx(Ce,{className:`w-4 h-4 ${V?"text-purple-500 animate-pulse":P||m?"text-orange-500":"text-muted-foreground"}`}),e.jsx("span",{className:`text-sm font-medium ${V?"text-purple-500":P||m?"text-orange-500":"text-muted-foreground"}`,children:V?"Listening... (Release SPACEBAR to send)":P||m?"AI speaking... (Press SPACEBAR to interrupt)":"Hold SPACEBAR to speak"})]}),N.length>0&&e.jsxs("button",{onClick:Mt,className:"w-full mb-2 px-3 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors flex items-center justify-center gap-2",children:[e.jsx(Is,{className:"w-3 h-3"}),"Clear conversation"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:h,type:"text",value:B,onChange:t=>!I&&T(t.target.value),onKeyPress:t=>t.key==="Enter"&&!I&&Fe(),placeholder:I?"Hold SPACEBAR to speak...":"Ask me anything...",disabled:P||I,className:"flex-1 px-4 py-2 bg-background border border-border rounded-full text-sm focus:outline-none focus:border-primary disabled:opacity-50"}),!I&&e.jsx("button",{onClick:Fe,disabled:!B.trim()||P,className:"p-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:P?e.jsx(We,{className:"w-5 h-5 animate-spin"}):e.jsx(qs,{className:"w-5 h-5"})}),I&&e.jsx("div",{className:`p-2 rounded-full ${V?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-muted text-muted-foreground"}`,children:P?e.jsx(We,{className:"w-5 h-5 animate-spin"}):V?e.jsx(Ce,{className:"w-5 h-5 animate-pulse"}):e.jsx(Ce,{className:"w-5 h-5"})})]}),I&&e.jsxs("div",{className:"text-xs text-center mt-2 p-2 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-purple-500 mb-1",children:"ðŸŽ™ï¸ Push-to-Talk Mode"}),e.jsx("p",{className:"text-muted-foreground",children:"Hold SPACEBAR to speak, release to send. Press SPACEBAR anytime to interrupt AI!"})]})]})]})]})}),e.jsx("audio",{ref:L,className:"hidden"})]})}function Gs(n){if(!n)return"";let o=n;const C=[];o=o.replace(/```[\s\S]*?```/g,x=>(C.push(x),`__CODE_BLOCK_${C.length-1}__`)),o=o.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),o=o.replace(/^[â€¢Â·]\s*/gm,"- ");const p=o.split(`
`),b=[];let S=!1;for(let x=0;x<p.length;x++){let w=p[x];const v=w.trim();if(/^-\s+\*\*[^*]+:\*\*\s*$/.test(v)||/^\*\*[^*]+:\*\*\s*$/.test(v)){S=!0,b.push(w);continue}if(S&&/^-\s+/.test(v)){b.push("  "+v);continue}S&&(!v||!/^-\s+/.test(v))&&(S=!1);const N=(w.match(/\*\*/g)||[]).length;N%2===1&&(v.startsWith("**")&&N===1?w=w.replace(/^\s*\*\*\s*/,""):v.endsWith("**")&&N===1&&(w=w.replace(/\s*\*\*\s*$/,""))),b.push(w)}return o=b.join(`
`),o=o.replace(/\n{3,}/g,`

`),o=o.replace(/^\n+/,""),C.forEach((x,w)=>{o=o.replace(`__CODE_BLOCK_${w}__`,x)}),o}function at(n){if(!n||typeof n!="string")return!1;const o=n.trim();if(!o||o.length<10)return!1;const C=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],p=o.split(`
`)[0].toLowerCase().trim();if(!C.some(w=>p.startsWith(w.toLowerCase())))return!1;const S=o.split(`
`).filter(w=>{const v=w.trim().toLowerCase();return v&&!v.startsWith("%%")&&!C.some(f=>v.startsWith(f.toLowerCase()))});if(S.length<3)return!1;const x=o.toLowerCase();return!(x.includes("start")&&x.includes("end")&&S.length<=3||x.match(/\bstart\b/g)?.length===1&&x.match(/\bend\b/g)?.length===1&&S.length<=2)}function nt(n){return n?n.split(/`([^`]+)`/g).map((C,p)=>p%2===1?e.jsx("code",{className:"px-2 py-1 mx-1 bg-primary/20 text-primary rounded-lg text-[0.9em] font-mono border border-primary/30",children:C},p):C):null}function Hs({code:n,language:o}){const[C,p]=i.useState(!1),b=async()=>{await navigator.clipboard.writeText(n),p(!0),setTimeout(()=>p(!1),2e3)};return e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-2xl overflow-hidden border border-border bg-muted/50 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-muted border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ys,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm uppercase tracking-wider text-primary font-bold",children:o||"code"})]}),e.jsx(y.button,{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded-lg transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:C?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-green-500 font-medium",children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(gs,{language:o||"text",style:fs,customStyle:{margin:0,padding:"1.5rem",background:"transparent",fontSize:"0.875rem",lineHeight:"1.6"},wrapLines:!0,wrapLongLines:!0,children:n})]})}function zs({question:n,hasTldr:o,hasDiagram:C,hasEli5:p,hasVideo:b}){const[S,x]=i.useState(null),w=C&&S!==!1,v=[];o&&v.push("tldr"),w&&v.push("diagram"),p&&v.push("eli5"),b&&v.push("video");const[f,N]=i.useState(()=>o?"tldr":p?"eli5":b?"video":"diagram");i.useEffect(()=>{S===!1&&f==="diagram"&&(o?N("tldr"):p?N("eli5"):b&&N("video"))},[S,f,o,p,b]);const O=i.useCallback(T=>{x(T)},[]);if(v.length===0&&S===!1)return null;if(v.length===0&&!o&&!p&&!b&&S===null)return e.jsx("div",{className:"rounded-2xl border border-border bg-muted/50 p-6 text-center text-muted-foreground text-sm backdrop-blur-xl",children:"Loading media..."});if(v.length===0)return null;const B={tldr:{label:"Quick Answer",icon:e.jsx(tt,{className:"w-4 h-4"})},diagram:{label:"Visual",icon:e.jsx(ws,{className:"w-4 h-4"})},eli5:{label:"Simple",icon:e.jsx(os,{className:"w-4 h-4"})},video:{label:"Video",icon:e.jsx(Ns,{className:"w-4 h-4"})}};return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border border-border bg-card backdrop-blur-xl overflow-hidden shadow-xl",children:[e.jsx("div",{className:"flex border-b border-border bg-muted/30",children:v.map(T=>e.jsxs(y.button,{onClick:()=>N(T),className:`flex-1 flex items-center justify-center gap-2 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-bold transition-all relative ${f===T?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[B[T].icon,e.jsx("span",{className:"hidden sm:inline",children:B[T].label}),f===T&&e.jsx(y.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-1 bg-primary"})]},T))}),e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs(Te,{mode:"wait",children:[f==="tldr"&&o&&e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex items-start gap-4",children:[e.jsx(tt,{className:"w-6 h-6 text-primary shrink-0 mt-1"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground leading-relaxed",children:nt(n.answer)})]},"tldr"),f==="diagram"&&C&&e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:e.jsx(ct,{chart:n.diagram,onRenderResult:O})},"diagram"),f==="eli5"&&p&&e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground leading-relaxed",children:nt(n.eli5||"")})]},"eli5"),f==="video"&&b&&e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:e.jsx(is,{shortVideo:n.videos?.shortVideo,longVideo:n.videos?.longVideo})},"video")]})})]})}function Ks({title:n,icon:o,children:C,defaultExpanded:p=!0,variant:b="default",badge:S}){const[x,w]=i.useState(p),v={default:"bg-card border-border",highlight:"bg-primary/10 border-primary/30",success:"bg-green-500/10 border-green-500/30",purple:"bg-purple-500/10 border-purple-500/30"},f={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-2xl border overflow-hidden backdrop-blur-xl ${v[b]}`,children:[e.jsxs(y.button,{onClick:()=>w(!x),className:"w-full flex items-center justify-between px-5 py-4 hover:bg-muted/30 transition-colors",whileHover:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:f[b],children:o}),e.jsx("span",{className:"font-bold text-base text-foreground",children:n}),S&&e.jsx("span",{className:"px-2 py-1 bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/30",children:S})]}),e.jsx(y.div,{animate:{rotate:x?0:-90},transition:{duration:.2},children:e.jsx(js,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsx(Te,{initial:!1,children:x&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx("div",{className:"px-5 pb-5",children:C})})})]})}function rt({question:n,isCompleted:o}){const C=i.useRef(null),p=typeof window<"u"&&window.innerWidth<640,[b,S]=i.useState(null),{theme:x}=lt(),w=x==="genz-light";i.useEffect(()=>{Rt.getByQuestionId(n.id).then(S)},[n.id]);const v=!!n.answer,f=!p&&at(n.diagram),N=!!n.eli5,O=!!(n.videos?.shortVideo||n.videos?.longVideo),B=v||f||N||O,T=i.useCallback(P=>{const H=Gs(P);return e.jsx(hs,{remarkPlugins:[ms],components:{code({className:m,children:u}){const D=/language-(\w+)/.exec(m||""),R=D?D[1]:"",F=String(u).replace(/\n$/,"");return!D&&!String(u).includes(`
`)?e.jsx("code",{className:"px-2 py-1 bg-primary/20 text-primary rounded-lg text-[0.9em] font-mono border border-primary/30",children:u}):R==="mermaid"?at(F)?e.jsx("div",{className:"my-4",children:e.jsx(ct,{chart:F})}):null:e.jsx("div",{className:"my-4",children:e.jsx(Hs,{code:F,language:R})})},p({children:m}){return e.jsx("p",{className:"mb-3 leading-relaxed text-foreground text-sm sm:text-base",children:m})},h1({children:m}){return e.jsx("h1",{className:"text-lg sm:text-xl font-black mb-3 mt-6 text-foreground border-b border-border pb-2",children:m})},h2({children:m}){return e.jsx("h2",{className:"text-base sm:text-lg font-bold mb-3 mt-5 text-foreground",children:m})},h3({children:m}){return e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-2 mt-4 text-foreground",children:m})},strong({children:m}){return e.jsx("strong",{className:"font-bold text-foreground",children:m})},ul({children:m,node:u}){const R=u?.parent?.tagName==="li";return e.jsx("ul",{className:`space-y-2 mb-3 ${R?"ml-6 mt-2":"ml-2"}`,children:m})},ol({children:m,node:u}){const R=u?.parent?.tagName==="li";return e.jsx("ol",{className:`space-y-2 mb-3 [counter-reset:list-counter] ${R?"ml-6 mt-2":"ml-2"}`,children:m})},li({children:m,node:u}){const R=u?.parent?.tagName==="ol",F=Array.isArray(m)&&m.some(_=>_?.type?.name==="ul"||_?.type?.name==="ol");return e.jsxs("li",{className:`flex gap-3 text-foreground text-sm sm:text-base [counter-increment:list-counter] ${F?"flex-col":""}`,children:[e.jsx("span",{className:"shrink-0 text-primary mt-1 font-bold",children:R?e.jsx("span",{className:"text-sm before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:F?"flex-1 -mt-7 ml-6":"flex-1",children:m})]})},a({href:m,children:u}){return e.jsx("a",{href:m,className:"text-primary hover:text-primary/80 underline",target:"_blank",rel:"noopener noreferrer",children:u})},blockquote({children:m}){return e.jsx("blockquote",{className:"border-l-4 border-primary/50 pl-4 py-2 my-3 bg-primary/5 text-muted-foreground italic text-sm sm:text-base",children:m})},table({children:m}){return e.jsx("div",{className:"my-4 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-xs sm:text-sm",children:m})})},th({children:m}){return e.jsx("th",{className:"px-3 py-2 text-left font-bold bg-muted border border-border text-xs sm:text-sm text-foreground",children:m})},td({children:m}){return e.jsx("td",{className:"px-3 py-2 border border-border text-xs sm:text-sm text-foreground",children:m})}},children:H})},[]);return e.jsx(y.div,{ref:C,initial:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden",style:{backgroundColor:w?"hsl(0 0% 100%)":"hsl(0 0% 0%)",color:w?"hsl(0 0% 5%)":"hsl(0 0% 100%)"},children:e.jsxs("div",{className:"w-full px-4 sm:px-6 py-4 sm:py-6 pb-32 space-y-6",children:[B&&e.jsx(zs,{question:n,hasTldr:v,hasDiagram:f,hasEli5:N,hasVideo:O}),e.jsx(Ks,{title:"Deep Dive Explanation",icon:e.jsx(xs,{className:"w-5 h-5"}),defaultExpanded:!0,badge:n.explanation?`${Math.ceil(n.explanation.split(" ").length/200)} min read`:void 0,children:e.jsx("div",{className:"prose prose-invert prose-lg max-w-none",children:T(n.explanation)})}),e.jsx("div",{className:"flex items-start gap-3 pt-2",children:n.tags&&n.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-4 h-4 text-primary mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(P=>e.jsx(y.span,{className:"px-3 py-1 bg-muted text-muted-foreground text-xs font-mono rounded-lg border border-border backdrop-blur-xl",whileHover:{scale:1.05,borderColor:"hsl(var(--primary))",backgroundColor:"hsl(var(--primary) / 0.1)"},children:$t(P)},P))})]})}),(n.sourceUrl||b)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.sourceUrl&&e.jsxs(y.a,{href:n.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted/80 border border-border rounded-xl text-sm backdrop-blur-xl transition-colors",whileHover:{scale:1.05},children:[e.jsx(vs,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-foreground font-medium",children:"Source"})]}),b&&e.jsxs(y.a,{href:`https://openstackdaily.github.io${b.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 hover:bg-primary/20 border border-primary/30 rounded-xl text-sm backdrop-blur-xl transition-colors",whileHover:{scale:1.05},children:[e.jsx(ks,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-primary font-medium",children:"Read Blog"})]})]}),e.jsx(ns,{questionId:n.id,currentChannel:n.channel}),e.jsx(rs,{questionId:n.id})]})})}function Ca(){const[n,o]=Bt(),[,C]=Dt("/channel/:id/:questionId?"),p=C?.id,b=C?.questionId,x=new URLSearchParams(n.split("?")[1]||"").get("q"),w=x||b,v=Kt(p||""),{subChannels:f}=Qt(p||""),N=v?{...v,subChannels:[{id:"all",name:"All Topics"},...f.map(h=>({id:h,name:h.split("-").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" ")}))]}:null,[O,B]=i.useState("all"),[T,P]=i.useState("all"),[H,m]=i.useState("all"),[u,D]=i.useState(0),[R,F]=i.useState(!1),[_,ee]=i.useState(!1),[Ie,te]=i.useState("question"),[J,qe]=i.useState(()=>{const h=localStorage.getItem(`marked-${p}`);return h?JSON.parse(h):[]}),[X,se]=i.useState(null),[Le,le]=i.useState(!1),[ce,ye]=i.useState(!1),z=Ps(0),A=Es(z,[-200,0,200],[.5,1,.5]),[we,E]=i.useState(null),{theme:Pe}=lt(),q=Pe==="genz-light",{companiesWithCounts:Ee}=_t(p||"",O,T),{preferences:Y,isSubscribed:ve,subscribeChannel:de}=qt(),Me=Y.shuffleQuestions!==!1,ae=Y.prioritizeUnvisited!==!1,{onQuestionSwipe:Oe,onQuestionView:pe}=Ft(),{trackEvent:ke}=Wt(),{completed:K,markCompleted:je,saveLastVisitedIndex:ue}=Ut(p||""),{toast:Z}=pt(),{question:c,questions:U,totalQuestions:M,loading:Q,error:ne}=Jt(p||"",u,O,T,H,Me,ae),[he,re]=i.useState(!1);i.useEffect(()=>{if(!c)return;const h=ls(c.id,c.channel,c.difficulty);se(h),le(!1),ye(!1)},[c]),i.useEffect(()=>{if(!(Q||U.length===0))if(w){const h=U.findIndex(k=>k.id===w);h>=0&&h!==u&&D(h),x&&o(`/channel/${p}/${w}`,{replace:!0}),re(!0)}else U[0]&&!he&&(o(`/channel/${p}/${U[0].id}`,{replace:!0}),re(!0))},[w,U.length,p,Q,x]),i.useEffect(()=>{p&&N&&!ve(p)&&!Q&&M>0&&U.length>0&&(de(p),Z({title:"Channel added",description:`${N.name} added to your channels`}))},[p,N,Q,M,U.length]),i.useEffect(()=>{M>0&&u>=M&&D(0)},[M,u]),i.useEffect(()=>{!he||Q||!p||!c||(c.id!==w&&o(`/channel/${p}/${c.id}`,{replace:!0}),ue(u))},[u,he]),i.useEffect(()=>{c&&(Vt(c.id,c.channel,c.difficulty),je(c.id),Gt(),ke({type:"question_completed",timestamp:new Date().toISOString(),data:{questionId:c.id,difficulty:c.difficulty,channel:c.channel}}))},[c?.id]),i.useEffect(()=>{const h=k=>{if((k.metaKey||k.ctrlKey)&&k.key==="k"){k.preventDefault(),F(!0);return}R||(k.key==="ArrowRight"||k.key==="ArrowDown"?(k.preventDefault(),me()):k.key==="ArrowLeft"||k.key==="ArrowUp"?(k.preventDefault(),ge()):k.key==="Escape"&&o("/channels"))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[u,M,R]);const me=()=>{u<M-1&&(D(h=>h+1),te("question"),Oe(),pe())},ge=()=>{u>0&&(D(h=>h-1),te("question"))},fe=()=>{c&&qe(h=>{const k=h.includes(c.id)?h.filter(L=>L!==c.id):[...h,c.id];return localStorage.setItem(`marked-${p}`,JSON.stringify(k)),k})},I=async()=>{try{await navigator.clipboard.writeText(window.location.href),Z({title:"Link copied!",description:"Question link copied to clipboard"})}catch{Z({title:"Share",description:window.location.href})}},Ne=()=>{if(!c)return;const h=cs(c.id,c.channel,c.difficulty);se(h),le(!0),Z({title:"Added to SRS",description:"Question added to spaced repetition system"})},V=h=>{if(!X||!c)return;const k=ds(c.id,c.channel,c.difficulty,h);se(k),ye(!0),le(!1),ke({type:"srs_review",timestamp:new Date().toISOString(),data:{rating:h}}),Z({title:"Review recorded",description:`Mastery: ${dt(k.masteryLevel)}`})},ie=(h,k)=>{const $=k.velocity.x,Re=window.location.pathname;k.offset.x<-100||$<-500?(E("left"),st.medium(),Xe("medium","swipe_navigation_left"),Ye(Re,"left",c?.id,U[u+1]?.id,Math.abs($)),setTimeout(()=>{me(),E(null),z.set(0)},150)):k.offset.x>100||$>500?(E("right"),st.medium(),Xe("medium","swipe_navigation_right"),Ye(Re,"right",c?.id,U[u-1]?.id,Math.abs($)),setTimeout(()=>{ge(),E(null),z.set(0)},150)):z.set(0)};if(Q&&!c)return e.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"â³"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading questions..."})]})});if(ne||!N)return e.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Channel not found"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:['The channel "',p,`" doesn't exist.`]}),e.jsx("button",{onClick:()=>o("/channels"),className:"px-6 py-3 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground font-bold rounded-full",children:"Go to Channels"})]})});if(!Q&&(!c||M===0)){const h=O!=="all"||T!=="all"||H!=="all";return e.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[e.jsx(it,{channel:N,onBack:()=>o("/channels"),onSearch:()=>F(!0),currentIndex:u,totalQuestions:M}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h?"Try adjusting your filters.":"Check back soon for new content!"}),h&&e.jsx("button",{onClick:()=>{B("all"),P("all"),m("all")},className:"px-6 py-3 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground font-bold rounded-full",children:"Reset Filters"})]})})]})}if(!c)return null;const W=J.includes(c.id),G=K.includes(c.id),xe=Math.round((u+1)/M*100);return e.jsxs(e.Fragment,{children:[e.jsx(Zt,{title:`${N.name} - ${c.question.substring(0,60)}...`,description:c.question,canonical:`https://open-interview.github.io/channel/${p}/${c.id}`}),e.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[e.jsx(it,{channel:N,onBack:()=>o("/channels"),onSearch:()=>F(!0),currentIndex:u,totalQuestions:M,progress:xe,onToggleFilters:()=>ee(!_),hasFilters:O!=="all"||T!=="all"||H!=="all"}),e.jsx(Te,{children:_&&e.jsx(Qs,{channel:N,selectedSubChannel:O,selectedDifficulty:T,selectedCompany:H,companiesWithCounts:Ee,onSubChannelChange:h=>{B(h),D(0)},onDifficultyChange:h=>{P(h),D(0)},onCompanyChange:h=>{m(h),D(0)},onClose:()=>ee(!1)})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-1/2 border-r border-border overflow-y-auto p-8",children:e.jsx(ot,{question:c,questionNumber:u+1,totalQuestions:M,isMarked:W,isCompleted:G,srsCard:X,showRatingButtons:Le,hasRated:ce,onAddToSRS:Ne,onSRSRating:V,onToggleMark:fe})}),e.jsx("div",{className:"w-1/2 overflow-y-auto p-8",style:{backgroundColor:q?"hsl(0 0% 100%)":"hsl(0 0% 0%)",color:q?"hsl(0 0% 5%)":"hsl(0 0% 100%)"},children:e.jsx(rt,{question:c,isCompleted:G})})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:hidden overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-border bg-background",children:[e.jsx("button",{onClick:()=>te("question"),className:`flex-1 py-4 text-sm font-bold transition-colors ${Ie==="question"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Question"}),e.jsx("button",{onClick:()=>te("answer"),className:`flex-1 py-4 text-sm font-bold transition-colors ${Ie==="answer"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Answer"})]}),e.jsxs(y.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,style:{x:z,opacity:A},onDragEnd:ie,className:"flex-1 overflow-y-auto p-6 pb-24 relative",children:[we==="left"&&e.jsx(y.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"absolute top-1/2 right-4 -translate-y-1/2 z-10 bg-primary/20 backdrop-blur-sm rounded-full p-4",children:e.jsx(Ze,{className:"w-8 h-8 text-primary"})}),we==="right"&&e.jsx(y.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"absolute top-1/2 left-4 -translate-y-1/2 z-10 bg-primary/20 backdrop-blur-sm rounded-full p-4",children:e.jsx(Ve,{className:"w-8 h-8 text-primary"})}),Ie==="question"?e.jsx(ot,{question:c,questionNumber:u+1,totalQuestions:M,isMarked:W,isCompleted:G,srsCard:X,showRatingButtons:Le,hasRated:ce,onAddToSRS:Ne,onSRSRating:V,onToggleMark:fe}):e.jsx(rt,{question:c,isCompleted:G})]}),u<M-1&&e.jsx(Ls,{icon:e.jsx(es,{className:"w-6 h-6"}),onClick:me,position:"bottom-right",hideOnScroll:!1,className:"lg:hidden"})]})]}),e.jsx("div",{className:"border-t border-border bg-background/95 backdrop-blur-xl p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsx(y.button,{onClick:ge,disabled:u===0,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 bg-muted/50 rounded-full disabled:opacity-30 disabled:cursor-not-allowed hover:bg-muted transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-bold text-primary",children:[u+1," / ",M]}),e.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(y.div,{className:"h-full bg-gradient-to-r from-primary to-cyan-500",initial:{width:0},animate:{width:`${xe}%`},transition:{duration:.3}})}),e.jsxs("span",{className:"text-sm font-bold",children:[xe,"%"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y.button,{onClick:fe,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-3 rounded-full transition-colors ${W?"bg-gradient-to-r from-[#ffd700] to-[#ff8c00] text-black":"bg-muted/50 hover:bg-muted"}`,children:e.jsx(ut,{className:"w-5 h-5",fill:W?"currentColor":"none"})}),e.jsx(y.button,{onClick:I,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 bg-muted/50 rounded-full hover:bg-muted transition-colors",children:e.jsx(Xt,{className:"w-5 h-5"})})]}),e.jsx(y.button,{onClick:me,disabled:u===M-1,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground rounded-full disabled:opacity-30 disabled:cursor-not-allowed font-bold",children:e.jsx(Ze,{className:"w-5 h-5"})})]})})]}),e.jsx(ts,{isOpen:R,onClose:()=>F(!1)}),e.jsx(Yt,{}),e.jsx(Vs,{pageContent:{type:"question",title:N.name,question:c.question,answer:c.answer,explanation:c.explanation,tags:c.tags,difficulty:c.difficulty},onNavigate:h=>o(h),onAction:(h,k)=>{switch(h){case"nextQuestion":handleNext();break;case"previousQuestion":handlePrevious();break;case"showAnswer":setShowAnswer(!0);break;case"hideAnswer":setShowAnswer(!1);break;case"bookmark":handleBookmark();break;case"addToSRS":Ne();break;case"share":I();break;case"showSearch":F(!0);break;case"filterByDifficulty":k?.difficulty&&setDifficultyFilter(k.difficulty);break;case"filterBySubChannel":k?.subChannel&&B(k.subChannel);break;case"clearFilters":setDifficultyFilter("all"),B("all");break}},availableActions:["nextQuestion","previousQuestion","showAnswer","hideAnswer","bookmark","addToSRS","share","showSearch","filterByDifficulty","filterBySubChannel","clearFilters"]})]})}function it({channel:n,onBack:o,onSearch:C,currentIndex:p,totalQuestions:b,progress:S,onToggleFilters:x,hasFilters:w}){return e.jsx("header",{className:"border-b border-border bg-background/95 backdrop-blur-xl",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y.button,{onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:n.name}),b>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Question ",p+1," of ",b]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx(y.button,{onClick:x,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg transition-colors ${w?"bg-gradient-to-r from-primary to-cyan-500 text-primary-foreground":"hover:bg-muted"}`,children:e.jsx(ss,{className:"w-5 h-5"})}),e.jsx(y.button,{onClick:C,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(Ht,{className:"w-5 h-5"})})]})]})})})}function Qs({channel:n,selectedSubChannel:o,selectedDifficulty:C,selectedCompany:p,companiesWithCounts:b,onSubChannelChange:S,onDifficultyChange:x,onCompanyChange:w,onClose:v}){return e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-b border-border bg-muted/50 backdrop-blur-xl overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Filters"}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(Ue,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.subChannels&&n.subChannels.length>1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-muted-foreground mb-2 block",children:"Topic"}),e.jsx("select",{value:o,onChange:f=>S(f.target.value),className:"w-full px-4 py-3 bg-muted/50 border border-border rounded-xl text-foreground focus:outline-none focus:border-primary transition-colors",children:n.subChannels.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-muted-foreground mb-2 block",children:"Difficulty"}),e.jsxs("select",{value:C,onChange:f=>x(f.target.value),className:"w-full px-4 py-3 bg-muted/50 border border-border rounded-xl text-foreground focus:outline-none focus:border-primary transition-colors",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-muted-foreground mb-2 block",children:"Company"}),e.jsxs("select",{value:p,onChange:f=>w(f.target.value),className:"w-full px-4 py-3 bg-muted/50 border border-border rounded-xl text-foreground focus:outline-none focus:border-primary transition-colors",children:[e.jsx("option",{value:"all",children:"All Companies"}),b.map(f=>e.jsxs("option",{value:f.company,children:[f.company," (",f.count,")"]},f.company))]})]})]})]})})}function ot({question:n,questionNumber:o,totalQuestions:C,isMarked:p,isCompleted:b,srsCard:S,showRatingButtons:x,hasRated:w,onAddToSRS:v,onSRSRating:f,onToggleMark:N}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-primary/20 to-cyan-500/20 border border-primary/30 rounded-full text-xs font-bold text-primary",children:n.difficulty}),n.company&&e.jsx("span",{className:"px-3 py-1 bg-muted/50 border border-border rounded-full text-xs font-bold",children:n.company}),b&&e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-full text-xs font-bold text-green-500",children:"âœ“ Completed"}),S&&!x&&!w&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${ps(S.easeFactor)}`,children:dt(S.easeFactor)})]}),e.jsx("div",{children:e.jsx("h2",{className:"text-3xl md:text-4xl font-black mb-4 leading-tight",children:n.question})}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs(y.button,{onClick:N,whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${p?"bg-gradient-to-r from-[#ffd700]/20 to-[#ff0080]/20 border border-[#ffd700]/30 text-[#ffd700]":"bg-muted/50 border border-border text-muted-foreground hover:border-[#ffd700]/30 hover:text-[#ffd700]"}`,children:[e.jsx(ut,{className:`w-4 h-4 ${p?"fill-current":""}`}),p?"Bookmarked":"Bookmark"]}),w?e.jsxs("span",{className:"px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-xl text-sm font-bold text-green-400 flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"Review Recorded"]}):x&&S?e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:"Rate your confidence:"}),e.jsxs(y.button,{onClick:()=>f("again"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1.5 bg-red-500/20 border border-red-500/30 rounded-lg text-xs font-bold text-red-400 hover:bg-red-500/30 transition-all flex items-center gap-1",children:[e.jsx(Ms,{className:"w-3 h-3"}),"Again"]}),e.jsxs(y.button,{onClick:()=>f("hard"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded-lg text-xs font-bold text-orange-400 hover:bg-orange-500/30 transition-all flex items-center gap-1",children:[e.jsx(et,{className:"w-3 h-3"}),"Hard"]}),e.jsxs(y.button,{onClick:()=>f("good"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1.5 bg-green-500/20 border border-green-500/30 rounded-lg text-xs font-bold text-green-400 hover:bg-green-500/30 transition-all flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),"Good"]}),e.jsxs(y.button,{onClick:()=>f("easy"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1.5 bg-blue-500/20 border border-blue-500/30 rounded-lg text-xs font-bold text-blue-400 hover:bg-blue-500/30 transition-all flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),"Easy"]})]}):e.jsxs(y.button,{onClick:v,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded-xl text-sm font-bold text-purple-400 hover:bg-purple-500/30 transition-all flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Add to SRS"]}),e.jsx(us,{questionId:n.id})]}),n.tags&&n.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(O=>e.jsxs("span",{className:"px-3 py-1 bg-muted/50 rounded-full text-xs text-muted-foreground",children:["#",O]},O))})]})}export{Ca as default};
