import{r as m,j as e,i as T,m as b,ai as I,a as P,F,Z as A,aj as Q,A as S,X as Y,u as V,S as X,p as z,ak as G,B as H,al as _}from"./index-aMHhEiH7.js";import{k as U,a as Z,b as O,r as J,j as K}from"./spaced-repetition-DSAPBUPS.js";import{H as q,Y as $,B as ee}from"./youtube-CiEvqwZC.js";import{B as te,a as re,T as se,C as ne,G as ae}from"./tag-gK-D8r71.js";import{C as k}from"./clock-6QUsfRP_.js";import{T as R}from"./target-CbVA3XUQ.js";import{bF as le,bG as ie,bJ as W,bH as oe,bI as ce}from"./index-BZT3e-Lf.js";import{P as C}from"./play-B6y8B2fl.js";import{G as de}from"./GiscusComments-B7U4DSbk.js";import{Q as xe}from"./QuestionFeedback-taysZVdx.js";import{L as me}from"./loader-circle-ykXWKNoB.js";import{E as ue}from"./external-link-B7-KwAGt.js";import{F as pe}from"./file-text-DrR0dssm.js";import{C as he}from"./copy-SjrLmYh9.js";import{L as D}from"./lightbulb-BbL4WT_c.js";import{C as ge}from"./chevron-down-B1wY1t-1.js";function fe(t){return t?t.split(/`([^`]+)`/g).map((i,a)=>a%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-primary/15 text-primary rounded text-[0.9em] font-mono",children:i},a):i):null}function be({difficulty:t}){const r="hidden sm:block absolute bottom-8 right-8 w-32 h-32 lg:w-40 lg:h-40 opacity-[0.06] pointer-events-none select-none z-0";return t==="beginner"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("circle",{cx:"40",cy:"42",r:"5"}),e.jsx("circle",{cx:"60",cy:"42",r:"5"}),e.jsx("path",{d:"M38 52 Q50 62 62 52",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"5",r:"4"}),e.jsx("rect",{x:"18",y:"38",width:"6",height:"14",rx:"2"}),e.jsx("rect",{x:"76",y:"38",width:"6",height:"14",rx:"2"})]}):t==="intermediate"?e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("rect",{x:"35",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("rect",{x:"55",y:"40",width:"10",height:"6",rx:"1"}),e.jsx("line",{x1:"40",y1:"55",x2:"60",y2:"55",strokeWidth:"3",stroke:"currentColor"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"8",strokeWidth:"2",stroke:"currentColor"}),e.jsx("polygon",{points:"50,2 46,8 54,8"}),e.jsx("circle",{cx:"82",cy:"50",r:"8",strokeWidth:"2",stroke:"currentColor",fill:"none"}),e.jsx("circle",{cx:"82",cy:"50",r:"3"})]}):e.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"currentColor","aria-hidden":"true",children:[e.jsx("circle",{cx:"50",cy:"45",r:"28",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("rect",{x:"42",y:"73",width:"16",height:"12",rx:"2"}),e.jsx("rect",{x:"38",y:"85",width:"24",height:"6",rx:"2"}),e.jsx("ellipse",{cx:"40",cy:"42",rx:"6",ry:"7"}),e.jsx("ellipse",{cx:"60",cy:"42",rx:"6",ry:"7"}),e.jsx("circle",{cx:"42",cy:"41",r:"2",fill:"white"}),e.jsx("circle",{cx:"62",cy:"41",r:"2",fill:"white"}),e.jsx("path",{d:"M38 56 Q50 52 62 56",strokeWidth:"3",stroke:"currentColor",fill:"none"}),e.jsx("ellipse",{cx:"78",cy:"35",rx:"3",ry:"5"}),e.jsx("ellipse",{cx:"82",cy:"45",rx:"2",ry:"4"}),e.jsx("line",{x1:"50",y1:"17",x2:"50",y2:"5",strokeWidth:"2",stroke:"currentColor"}),e.jsx("circle",{cx:"50",cy:"3",r:"3"}),e.jsx("polygon",{points:"85,20 80,30 84,30 79,42 88,28 84,28"})]})}function Ve({question:t,questionNumber:r,totalQuestions:i,isMarked:a,isCompleted:c,onToggleMark:l,onTapQuestion:n,timerEnabled:x,timeLeft:o}){const[d,u]=m.useState(null),[p,g]=m.useState(!1),[s,f]=m.useState(!1);m.useEffect(()=>{if(t?.id){const h=U(t.id,t.channel,t.difficulty);u(j=>j?.questionId===h.questionId&&j?.totalReviews===h.totalReviews?j:h),g(!1),f(h.totalReviews>0)}},[t?.id,t?.channel,t?.difficulty]);const y=h=>{if(!t)return;const j=J(t.id,t.channel,t.difficulty,h);u(j),g(!0),f(!1)},N=()=>{if(!t)return;const h=K(t.id,t.channel,t.difficulty);u(h),f(!0)},w=(()=>{switch(t.difficulty){case"beginner":return{icon:A,color:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/20",label:"Easy"};case"intermediate":return{icon:R,color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/20",label:"Medium"};case"advanced":return{icon:F,color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",label:"Hard"};default:return{icon:R,color:"text-muted-foreground",bg:"bg-muted",border:"border-border",label:"Unknown"}}})(),B=w.icon;return e.jsxs("div",{className:"w-full h-full flex flex-col px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-y-auto relative","data-testid":"question-panel",children:[e.jsx(be,{difficulty:t.difficulty}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-muted/50 border border-border rounded-md",children:[e.jsx(q,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:t.id})]}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted rounded-md",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[r,e.jsx("span",{className:"text-muted-foreground/50",children:"/"}),i]})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md ${w.bg} border ${w.border}`,children:[e.jsx(B,{className:`w-3 h-3 ${w.color}`}),e.jsx("span",{className:`text-xs font-medium ${w.color}`,children:w.label})]}),c&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/10 border border-green-500/20 rounded-md",children:[e.jsx(T,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Done"})]})]}),e.jsx("button",{onClick:l,className:`p-1.5 rounded-md transition-colors ${a?"bg-primary/10 text-primary border border-primary/20":"bg-muted text-muted-foreground hover:text-primary"}`,children:e.jsx(te,{className:`w-4 h-4 ${a?"fill-current":""}`})})]}),e.jsxs("div",{className:`flex-1 flex flex-col justify-center max-w-2xl w-full ${n?"cursor-pointer lg:cursor-default":""}`,onClick:n,children:[t.companies&&t.companies.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[e.jsx(re,{className:"w-3.5 h-3.5 text-muted-foreground"}),t.companies.map((h,j)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 text-xs font-medium rounded-full",children:h},j))]}),e.jsx(b.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`font-bold text-foreground leading-tight ${t.question.length>200?"text-sm sm:text-base lg:text-lg":t.question.length>100?"text-base sm:text-lg lg:text-xl":"text-lg sm:text-xl lg:text-2xl"}`,children:fe(t.question)}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground uppercase tracking-wider font-medium",children:t.subChannel})}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[t.tags.slice(0,5).map(h=>e.jsx("span",{className:"px-1.5 py-0.5 bg-muted text-[9px] sm:text-[10px] font-mono text-muted-foreground rounded border border-border",children:I(h)},h)),t.tags.length>5&&e.jsxs("span",{className:"text-[9px] text-muted-foreground py-0.5",children:["+",t.tags.length-5]})]}),x&&o>0&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-2 bg-primary/5 border border-primary/20 rounded-lg self-start",children:[e.jsx(k,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-lg font-mono font-bold text-primary tabular-nums",children:[String(Math.floor(o/60)).padStart(2,"0"),":",String(o%60).padStart(2,"0")]})]})]}),e.jsx("div",{className:"mt-auto pt-3 flex justify-start mb-12 sm:mb-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-500/5 border border-purple-500/20 rounded-lg px-2 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(P,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-purple-500",children:"SRS"}),d&&e.jsx("span",{className:`text-[9px] px-1 py-0.5 rounded ${O(d.masteryLevel)} bg-muted/50`,children:Z(d.masteryLevel)})]}),p?e.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:"âœ“"}):s&&d?e.jsx("div",{className:"flex items-center gap-0.5",children:[{rating:"again",label:"ðŸ˜•",color:"bg-red-500/10 text-red-500 hover:bg-red-500/20"},{rating:"hard",label:"ðŸ¤”",color:"bg-orange-500/10 text-orange-500 hover:bg-orange-500/20"},{rating:"good",label:"ðŸ‘",color:"bg-green-500/10 text-green-500 hover:bg-green-500/20"},{rating:"easy",label:"ðŸŽ¯",color:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20"}].map(h=>e.jsx("button",{onClick:j=>{j.stopPropagation(),y(h.rating)},className:`w-6 h-6 flex items-center justify-center rounded text-xs transition-colors ${h.color}`,children:h.label},h.rating))}):e.jsx("button",{onClick:h=>{h.stopPropagation(),N()},className:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded hover:bg-purple-600",children:"+Add"})]})}),e.jsx("div",{className:"mt-3 text-center hidden sm:block",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[9px] font-mono",children:"â†’"})," to reveal answer"]})})]})}function L(t){if(!t)return null;const r=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const i of r){const a=t.match(i);if(a)return a[1]}return null}function ye(t){return t?.includes("/shorts/")||!1}function je({shortVideo:t,longVideo:r}){const[i,a]=m.useState(null),c=m.useRef(null),l=t?L(t):null,n=r?L(r):null;if(!l&&!n)return null;const x=()=>a(null);return m.useEffect(()=>{const o=d=>{d.key==="Escape"&&i&&x()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[i]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full clear-both",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-3",children:[l&&e.jsxs("button",{onClick:()=>a("short"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx($,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Quick"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," Under 60s"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]}),n&&e.jsxs("button",{onClick:()=>a("long"),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-lg transition-all group",children:[e.jsx($,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-[10px] sm:text-sm font-bold text-foreground group-hover:text-red-500 transition-colors",children:"Deep Dive"}),e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground hidden sm:flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," 5-20 min"]})]}),e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 ml-1 sm:ml-2"})]})]})}),typeof document<"u"&&Q.createPortal(e.jsx(S,{children:i&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 sm:p-8 lg:p-12",onClick:x,children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-5xl mx-auto",onClick:o=>o.stopPropagation(),children:[e.jsxs("button",{onClick:x,className:"absolute -top-12 right-0 z-20 p-2 text-white hover:text-white/80 transition-colors",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx("div",{className:`relative bg-black rounded-lg overflow-hidden border border-white/20 shadow-2xl ${i==="short"&&ye(t||"")?"max-w-sm mx-auto aspect-[9/16]":"w-full aspect-video"}`,children:e.jsx("iframe",{ref:c,src:`https://www.youtube.com/embed/${i==="short"?l:n}?autoplay=1&rel=0&playsinline=1`,title:i==="short"?"Quick Explanation":"Deep Dive Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-white/50",children:i==="short"?"âš¡ Quick Explanation":"ðŸ“š Deep Dive"})})]})})}),document.body)]})}function we({questionId:t,currentChannel:r}){const[,i]=V(),[a,c]=m.useState([]),[l,n]=m.useState(!0),[x,o]=m.useState(!1);if(m.useEffect(()=>{async function u(){n(!0),o(!1);try{const p=await fetch("/data/similar-questions.json");if(!p.ok){o(!0);return}const s=(await p.json()).similarities?.[t]||[];c(s.slice(0,4))}catch{o(!0)}finally{n(!1)}}u()},[t]),x||!l&&a.length===0)return null;const d=u=>{i(`/channel/${u.channel}/${u.id}`)};return e.jsxs("div",{className:"rounded-lg border border-border bg-card/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 border-b border-border bg-muted/30",children:[e.jsx(X,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"font-medium text-xs",children:"Similar Questions"})]}),e.jsx("div",{className:"divide-y divide-border",children:l?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(me,{className:"w-4 h-4 animate-spin text-muted-foreground"})}):a.map(u=>e.jsxs("button",{onClick:()=>d(u),className:"w-full flex items-start gap-2 px-2.5 py-2 hover:bg-muted/50 transition-colors text-left group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground/90 line-clamp-2 group-hover:text-primary transition-colors",children:u.question}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:u.channel.replace(/-/g," ")}),e.jsxs("span",{className:"text-[10px] text-primary/60",children:[Math.round(u.similarity*100),"%"]})]})]}),e.jsx(z,{className:"w-3.5 h-3.5 text-muted-foreground group-hover:text-primary transition-colors mt-0.5 shrink-0"})]},u.id))})]})}function Ne(t){if(!t)return"";let r=t;r=r.replace(/([OÎ˜Î©])\(([^)]+)\)/g,"`$1($2)`"),r=r.replace(/\*\*\s*```/g,"**\n\n```"),r=r.replace(/```\s*\*\*/g,"```\n\n**"),r=r.replace(/```(\w*)\n([\s\S]*?)```/g,(c,l,n)=>{const x=n.replace(/\*\*/g,"");return"```"+l+`
`+x+"```"}),r=r.replace(/([^\n`])(\s*```)/g,"$1\n```"),r=r.replace(/(```\w*)\s*\n?\s*([^\n`])/g,`$1
$2`),r=r.replace(/:\s*```/g,":\n\n```"),r=r.replace(/^\*\*\s*$/gm,""),r=r.replace(/\*\*\s*\n\s*([^*]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(\d+\.\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*\s*\n\s*(-\s+[^*\n]+)\*\*/g,"**$1**"),r=r.replace(/\*\*-\s+/g,`**
- `),r=r.replace(/\*\*(\d+)\.\s+/g,`**
$1. `),r=r.replace(/\*\*-\s*\*\*([^*]+)\*\*/g,`**
- **$1**`),r=r.replace(/\*\*-\s*\*\*([^*\n]+)/g,`**
- **$1**`),r=r.replace(/-\s*\*\*([^*]+)\*\*-\s+/g,`- **$1**
- `);const i=r.split(`
`),a=[];for(let c=0;c<i.length;c++){let l=i[c];const n=(l.match(/\*\*/g)||[]).length;n%2===1&&(l.trim().startsWith("**")&&n===1?l=l.replace(/^\s*\*\*\s*/,""):l.trim().endsWith("**")&&n===1&&(l=l.replace(/\s*\*\*\s*$/,""))),a.push(l)}return r=a.join(`
`),r=r.replace(/^[â€¢Â·]\s*/gm,"- "),(r.includes("â€¢")||r.includes("Â·"))&&(r=r.split(`
`).map(n=>{const x=(n.match(/[â€¢Â·]/g)||[]).length;if(x>1||x===1&&!n.trim().startsWith("â€¢")&&!n.trim().startsWith("Â·")){const o=n.split(/[â€¢Â·]/).map(d=>d.trim()).filter(d=>d);if(o.length>1)return o.map(d=>`- ${d}`).join(`
`)}return n.replace(/^[â€¢Â·]\s*/,"- ")}).join(`
`)),r=r.replace(/(\d+[.)]\s+[^0-9]+?)(?=\s+\d+[.)])/g,`$1
`),r=r.replace(new RegExp("(?<!\\n)(\\d+[.)]\\s+)","g"),`
$1`),r=r.replace(/\n{3,}/g,`

`),r=r.replace(/^\n+/,""),r}function E(t){if(!t||typeof t!="string")return!1;const r=t.trim();if(!r||r.length<10)return!1;const i=["graph","flowchart","sequenceDiagram","classDiagram","stateDiagram","erDiagram","journey","gantt","pie","gitGraph","mindmap","timeline","quadrantChart","sankey","xychart","block"],a=r.split(`
`)[0].toLowerCase().trim();if(!i.some(x=>a.startsWith(x.toLowerCase())))return!1;const l=r.split(`
`).filter(x=>{const o=x.trim().toLowerCase();return o&&!o.startsWith("%%")&&!i.some(d=>o.startsWith(d.toLowerCase()))});if(l.length<3)return!1;const n=r.toLowerCase();return!(n.includes("start")&&n.includes("end")&&l.length<=3||n.match(/\bstart\b/g)?.length===1&&n.match(/\bend\b/g)?.length===1&&l.length<=2)}function M(t){return t?t.split(/`([^`]+)`/g).map((i,a)=>a%2===1?e.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 bg-cyan-500/20 text-cyan-300 rounded text-[0.9em] font-mono",children:i},a):i):null}function ve({title:t,icon:r,children:i,defaultExpanded:a=!0,variant:c="default",badge:l}){const[n,x]=m.useState(a),o=typeof window<"u"&&window.innerWidth<640,d={default:"bg-card border-border",highlight:"bg-primary/5 border-primary/20",success:"bg-green-500/5 border-green-500/20",purple:"bg-purple-500/5 border-purple-500/20"},u={default:"text-muted-foreground",highlight:"text-primary",success:"text-green-500",purple:"text-purple-500"};return e.jsxs("div",{className:`rounded-lg border overflow-hidden ${d[c]}`,children:[e.jsxs("button",{onClick:()=>x(!n),className:"w-full flex items-center justify-between px-2.5 py-1.5 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:u[c],children:r}),e.jsx("span",{className:"font-medium text-xs",children:t}),l&&e.jsx("span",{className:"px-1 py-0.5 bg-primary/10 text-primary text-[8px] font-medium rounded",children:l})]}),e.jsx(ge,{className:`w-3.5 h-3.5 text-muted-foreground transition-transform ${n?"":"-rotate-90"}`})]}),o?n&&e.jsx("div",{className:"px-2.5 pb-2",children:i}):e.jsx(S,{initial:!1,children:n&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-2.5 pb-2",children:i})})})]})}function ke({code:t,language:r}){const[i,a]=m.useState(!1),c=async()=>{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden border border-border bg-[#1e1e1e]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-1.5 sm:py-2 bg-muted/50 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary"}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground font-medium",children:r||"code"})]}),e.jsx("button",{onClick:c,className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-0.5 sm:py-1 text-[10px] sm:text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded transition-colors",children:i?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),e.jsx("span",{className:"text-green-500",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx(oe,{language:r||"text",style:ce,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLines:!0,wrapLongLines:!0,className:"!text-xs sm:!text-sm !p-3 sm:!p-4",children:t})]})}function Ce({question:t,hasTldr:r,hasDiagram:i,hasEli5:a,hasVideo:c}){const[l,n]=m.useState(null),x=i&&l!==!1,o=[];r&&o.push("tldr"),x&&o.push("diagram"),a&&o.push("eli5"),c&&o.push("video");const[d,u]=m.useState(()=>r?"tldr":a?"eli5":c?"video":"diagram");m.useEffect(()=>{l===!1&&d==="diagram"&&(r?u("tldr"):a?u("eli5"):c&&u("video"))},[l,d,r,a,c]);const p=m.useCallback(s=>{n(s)},[]);if(o.length===0&&l===!1)return null;if(o.length===0&&!r&&!a&&!c&&l===null)return e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-border bg-card p-4 text-center text-muted-foreground text-sm",children:"Loading..."});if(o.length===0)return null;const g={tldr:{label:"TL;DR",icon:e.jsx(D,{className:"w-3.5 h-3.5"}),color:"text-cyan-400"},diagram:{label:"Diagram",icon:e.jsx(ae,{className:"w-3.5 h-3.5"}),color:"text-purple-400"},eli5:{label:"ELI5",icon:e.jsx(ee,{className:"w-3.5 h-3.5"}),color:"text-green-400"},video:{label:"Video",icon:e.jsx(C,{className:"w-3.5 h-3.5"}),color:"text-pink-400"}};return e.jsxs("div",{className:"rounded-lg sm:rounded-xl border border-white/10 bg-black/40 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-white/10 bg-black/20",children:o.map(s=>e.jsxs("button",{onClick:()=>u(s),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs sm:text-sm font-medium transition-all relative ${d===s?`${g[s].color} bg-white/5`:"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:[e.jsx("span",{className:d===s?g[s].color:"",children:g[s].icon}),e.jsx("span",{children:g[s].label}),d===s&&e.jsx(b.div,{layoutId:"activeTabIndicator",className:`absolute bottom-0 left-0 right-0 h-0.5 ${s==="tldr"?"bg-cyan-400":s==="diagram"?"bg-purple-400":s==="eli5"?"bg-green-400":"bg-pink-400"}`})]},s))}),e.jsx("div",{className:"p-2 sm:p-3",children:e.jsxs(S,{mode:"wait",children:[d==="tldr"&&r&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-cyan-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:M(t.answer)})]},"tldr"),d==="diagram"&&i&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(W,{chart:t.diagram,onRenderResult:p})},"diagram"),d==="eli5"&&a&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-base flex-shrink-0",children:"ðŸ§’"}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:M(t.eli5||"")})]},"eli5"),d==="video"&&c&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsx(je,{shortVideo:t.videos?.shortVideo,longVideo:t.videos?.longVideo})},"video")]})})]})}function Xe({question:t}){const r=m.useRef(null),i=typeof window<"u"&&window.innerWidth<640,[a,c]=m.useState(null);m.useEffect(()=>{G.getByQuestionId(t.id).then(c)},[t.id]);const l=!!t.answer,n=!i&&E(t.diagram),x=!!t.eli5,o=!!(t.videos?.shortVideo||t.videos?.longVideo),d=l||n||x||o,u=m.useCallback(p=>{const g=Ne(p);return e.jsx(le,{remarkPlugins:[ie],components:{code({className:s,children:f}){const y=/language-(\w+)/.exec(s||""),N=y?y[1]:"",v=String(f).replace(/\n$/,"");return!y&&!String(f).includes(`
`)?e.jsx("code",{className:"px-1 py-0.5 bg-primary/10 text-primary rounded text-[0.85em] font-mono",children:f}):N==="mermaid"?E(v)?e.jsx("div",{className:"my-3",children:e.jsx(W,{chart:v})}):null:e.jsx("div",{className:"my-2",children:e.jsx(ke,{code:v,language:N})})},p({children:s}){return e.jsx("p",{className:"mb-2 leading-relaxed text-foreground/90 text-sm",children:s})},h1({children:s}){return e.jsx("h1",{className:"text-base font-bold mb-2 mt-4 text-foreground border-b border-border pb-1",children:s})},h2({children:s}){return e.jsx("h2",{className:"text-sm font-bold mb-2 mt-3 text-foreground",children:s})},h3({children:s}){return e.jsx("h3",{className:"text-sm font-semibold mb-1.5 mt-2 text-foreground/90",children:s})},strong({children:s}){return e.jsx("strong",{className:"font-semibold text-foreground",children:s})},ul({children:s}){return e.jsx("ul",{className:"space-y-1 mb-2 ml-1",children:s})},ol({children:s}){return e.jsx("ol",{className:"space-y-1 mb-2 ml-1 [counter-reset:list-counter]",children:s})},li({children:s,node:f}){const N=f?.parent?.tagName==="ol";return e.jsxs("li",{className:"flex gap-2 text-foreground/90 text-sm [counter-increment:list-counter]",children:[e.jsx("span",{className:"shrink-0 text-primary mt-0.5",children:N?e.jsx("span",{className:"text-xs font-medium before:content-[counter(list-counter)'.']"}):"â€¢"}),e.jsx("span",{className:"flex-1",children:s})]})},a({href:s,children:f}){return e.jsx("a",{href:s,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:f})},blockquote({children:s}){return e.jsx("blockquote",{className:"border-l-2 border-primary/50 pl-3 py-1 my-2 bg-primary/5 text-muted-foreground italic text-sm",children:s})},table({children:s}){return e.jsx("div",{className:"my-2 overflow-x-auto",children:e.jsx("table",{className:"w-full border-collapse text-sm",children:s})})},th({children:s}){return e.jsx("th",{className:"px-2 py-1.5 text-left font-semibold bg-muted border border-border text-xs",children:s})},td({children:s}){return e.jsx("td",{className:"px-2 py-1.5 border border-border text-sm",children:s})}},children:g})},[]);return e.jsx(b.div,{ref:r,initial:i?!1:{opacity:0},animate:{opacity:1},className:"w-full h-full overflow-y-auto overflow-x-hidden bg-background",children:e.jsxs("div",{className:"w-full px-3 sm:px-4 lg:px-6 py-2 sm:py-3 pb-16 space-y-1.5",children:[d&&e.jsx(Ce,{question:t,hasTldr:l,hasDiagram:n,hasEli5:x,hasVideo:o}),e.jsx(ve,{title:"Full Explanation",icon:e.jsx(H,{className:"w-3.5 h-3.5"}),defaultExpanded:!0,badge:t.explanation?`${Math.ceil(t.explanation.split(" ").length/200)} min`:void 0,children:e.jsx("div",{className:"prose prose-sm max-w-none",children:u(t.explanation)})}),e.jsxs("div",{className:"flex items-start justify-between gap-1.5 pt-0.5",children:[e.jsx("div",{className:"flex items-start gap-1.5 flex-1 min-w-0",children:t.tags&&t.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-2.5 h-2.5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-0.5",children:t.tags.map(p=>e.jsx("span",{className:"px-1 py-0.5 bg-muted text-[8px] font-mono text-muted-foreground rounded border border-border",children:I(p)},p))})]})}),e.jsx(xe,{questionId:t.id})]}),(t.sourceUrl||a)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[t.sourceUrl&&e.jsxs("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-muted hover:bg-muted/80 border border-border rounded-md text-[10px]",children:[e.jsx(ue,{className:"w-2.5 h-2.5 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Source"})]}),a&&e.jsxs("a",{href:`https://openstackdaily.github.io${a.url}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-cyan-500/10 hover:bg-cyan-500/20 border border-cyan-500/30 rounded-md text-[10px]",children:[e.jsx(pe,{className:"w-2.5 h-2.5 text-cyan-400"}),e.jsx("span",{className:"text-cyan-400",children:"Blog"})]})]}),e.jsx(we,{questionId:t.id,currentChannel:t.channel}),e.jsx(de,{questionId:t.id})]})})}function ze(t,r={}){const{minDistance:i=_.MIN_SWIPE_DISTANCE,preventScroll:a=!1}=r,c=m.useRef(null),l=m.useRef(null),n=m.useRef(null),x=m.useRef(null),o=m.useCallback(p=>{n.current=null,x.current=null,c.current=p.targetTouches[0].clientX,l.current=p.targetTouches[0].clientY},[]),d=m.useCallback(p=>{if(n.current=p.targetTouches[0].clientX,x.current=p.targetTouches[0].clientY,a&&c.current!==null&&n.current!==null){const g=Math.abs(c.current-n.current),s=Math.abs((l.current??0)-(x.current??0));g>s&&p.preventDefault()}},[a]),u=m.useCallback(()=>{if(c.current===null||l.current===null||n.current===null||x.current===null)return;const p=c.current-n.current,g=l.current-x.current,s=Math.abs(p),f=Math.abs(g),y=s>f;y&&s>i?p>0?t.onSwipeLeft?.():t.onSwipeRight?.():!y&&f>i&&(g>0?t.onSwipeUp?.():t.onSwipeDown?.()),c.current=null,l.current=null,n.current=null,x.current=null},[t,i]);return{onTouchStart:o,onTouchMove:d,onTouchEnd:u}}export{Xe as A,Ve as Q,ze as u};
