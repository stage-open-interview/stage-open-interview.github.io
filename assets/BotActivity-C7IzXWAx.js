import{c as $,r as c,j as e,a9 as N,ab as i,P as C,m as u,Z as T,O as L,l as J,h as K,k as X}from"./index-ButEu0OJ.js";import{S as Y}from"./SEOHead-C9C83a9s.js";import{A as ee}from"./AppLayout-BrS35qH3.js";import"./Button-CjbOXKlD.js";import{M as g,H as A,C as te}from"./MetricCard-IylMlEvp.js";import{B as k}from"./bot-Cq39cEYC.js";import{E as R}from"./eye-iWog-S3I.js";import{T as P}from"./trash-2-BsJ0H-ZJ.js";import{C as se}from"./clock-DhLFEmnc.js";import{F as S}from"./file-text-BN4H7xYD.js";import{E as re}from"./external-link-CUL2tddj.js";import{M as ae}from"./mic-C_1YhfA-.js";import{C as ie}from"./code-ytEr6fiN.js";import"./UnifiedSearch-D_5aEX56.js";import"./coding-challenges-CdFILRix.js";import"./tag-B_J9RlAL.js";import"./target-DK9cYn5w.js";import"./arrow-right-C_bjp1EN.js";import"./loader-circle-DbtMJfYT.js";import"./chevron-left-BzQh1zsF.js";import"./chart-column-COTo3quL.js";import"./user-CbWJImDq.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],y=$("list-todo",ne);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],O=$("wrench",oe),E={creator:{name:"Creator Bot",icon:C,color:"text-cyan-500 bg-cyan-500/10 border-cyan-500/30",gradient:"from-cyan-500 to-blue-500",description:"Creates questions, challenges, voice keywords"},verifier:{name:"Verifier Bot",icon:R,color:"text-amber-500 bg-amber-500/10 border-amber-500/30",gradient:"from-amber-500 to-orange-500",description:"Quality checks, detects issues, flags content"},processor:{name:"Processor Bot",icon:O,color:"text-purple-500 bg-purple-500/10 border-purple-500/30",gradient:"from-purple-500 to-pink-500",description:"Improves or deletes flagged content"}};function q(r){return E[r]||{name:r,icon:k,color:"text-gray-500 bg-gray-500/10 border-gray-500/30",gradient:"from-gray-500 to-gray-600",description:"Unknown bot"}}function f(r){if(!r)return"never";const a=new Date(r),o=new Date().getTime()-a.getTime(),d=Math.floor(o/6e4),p=Math.floor(o/36e5),x=Math.floor(o/864e5);return d<1?"just now":d<60?`${d}m ago`:p<24?`${p}h ago`:x<7?`${x}d ago`:a.toLocaleDateString()}function ce(r,a){if(!a)return null;switch(r){case"question":return`/?search=${encodeURIComponent(a)}`;case"challenge":return`/coding/${a}`;case"test":return"/tests";case"voice_keyword":return"/voice-interview";default:return null}}function de(r){switch(r){case"question":return e.jsx(te,{className:"w-3 h-3"});case"challenge":return e.jsx(ie,{className:"w-3 h-3"});case"test":return e.jsx(S,{className:"w-3 h-3"});case"voice_keyword":return e.jsx(ae,{className:"w-3 h-3"});default:return e.jsx(S,{className:"w-3 h-3"})}}function U({itemType:r,itemId:a,className:n}){const[,o]=X(),d=ce(r,a);return d?e.jsxs("button",{onClick:()=>o(d),className:i("inline-flex items-center gap-1 px-1.5 py-0.5 bg-primary/10 hover:bg-primary/20 text-primary rounded text-xs font-mono transition-colors",n),title:`View ${r}: ${a}`,children:[de(r),e.jsx("span",{className:"truncate max-w-[120px]",children:a}),e.jsx(re,{className:"w-2.5 h-2.5 opacity-60"})]}):e.jsx("span",{className:n,children:a})}function w({active:r,onClick:a,children:n,icon:o}){return e.jsxs("button",{onClick:a,className:i("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[e.jsx(o,{className:"w-4 h-4"}),n]})}function Te(){const[r,a]=c.useState("overview"),[n,o]=c.useState([]),[d,p]=c.useState([]),[x,Q]=c.useState([]),[B,F]=c.useState([]),[_,z]=c.useState(!0),[h,M]=c.useState(!1),[j,V]=c.useState("all"),b=c.useCallback(async()=>{try{const t=await fetch("/data/bot-monitor.json");if(t.ok){const s=await t.json();o(s.stats||[]),p(s.runs||[]),Q(s.queue||[]),F(s.ledger||[])}}catch(t){console.error("Failed to fetch bot data:",t),o([{botName:"creator",totalRuns:45,successfulRuns:42,totalCreated:156,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"verifier",totalRuns:38,successfulRuns:38,totalCreated:0,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"processor",totalRuns:22,successfulRuns:20,totalCreated:0,totalUpdated:45,totalDeleted:12,lastRun:new Date().toISOString()}])}finally{z(!1),M(!1)}},[]);c.useEffect(()=>{b()},[b]);const I=()=>{M(!0),b()},H=n.reduce((t,s)=>t+(s.totalCreated||0),0),W=n.reduce((t,s)=>t+(s.totalUpdated||0),0),Z=n.reduce((t,s)=>t+(s.totalDeleted||0),0),D=x.filter(t=>t.status==="pending").length;return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Bot Monitor - AI Content Pipeline | Interview Prep",description:"Monitor the 3-bot AI pipeline: Creator, Verifier, and Processor bots working together to maintain high-quality interview content.",canonical:"https://open-interview.github.io/bot-activity"}),e.jsx(ee,{title:"Bot Monitor",showBackOnMobile:!0,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),"Bot Monitor"]}),e.jsx("button",{onClick:I,disabled:h,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(N,{className:i("w-4 h-4",h&&"animate-spin")})})]}),e.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:e.jsx("button",{onClick:I,disabled:h,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(N,{className:i("w-4 h-4",h&&"animate-spin")})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries(E).map(([t,s],l)=>{const m=n.find(v=>v.botName===t),G=s.icon;return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:i("relative overflow-hidden rounded-xl border p-4",s.color),children:[e.jsx("div",{className:i("absolute top-0 right-0 w-32 h-32 opacity-10 blur-2xl rounded-full bg-gradient-to-br",s.gradient)}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:i("w-10 h-10 rounded-xl flex items-center justify-center bg-gradient-to-br",s.gradient),children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:m?.totalRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Runs"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-500",children:m?.successfulRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Success"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:t==="creator"?m?.totalCreated||0:t==="verifier"?x.filter(v=>v.createdBy==="verifier").length:m?.totalUpdated||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:t==="creator"?"Created":t==="verifier"?"Flagged":"Fixed"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-current/10 text-xs text-muted-foreground",children:["Last run: ",f(m?.lastRun||"")]})]})]},t)})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(g,{icon:e.jsx(C,{className:"w-4 h-4"}),value:H,label:"Created",variant:"info",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(T,{className:"w-4 h-4"}),value:W,label:"Updated",variant:"default",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(P,{className:"w-4 h-4"}),value:Z,label:"Deleted",variant:"danger",size:"md",animated:!0}),e.jsx(g,{icon:e.jsx(y,{className:"w-4 h-4"}),value:D,label:"Pending",variant:"warning",size:"md",animated:!0})]}),e.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx(w,{active:r==="overview",onClick:()=>a("overview"),icon:L,children:"Recent Runs"}),e.jsxs(w,{active:r==="queue",onClick:()=>a("queue"),icon:y,children:["Work Queue (",D,")"]}),e.jsx(w,{active:r==="ledger",onClick:()=>a("ledger"),icon:A,children:"Audit Ledger"})]}),e.jsxs(J,{mode:"wait",children:[r==="overview"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-primary"}),"Recent Bot Runs"]})}),_?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(N,{className:"w-6 h-6 animate-spin mx-auto text-primary mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):d.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(k,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent runs"})]}):e.jsx("div",{className:"divide-y divide-border",children:d.slice(0,10).map((t,s)=>{const l=q(t.botName),m=l.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",l.color),children:e.jsx(m,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.status==="completed"?"bg-green-500/20 text-green-500":t.status==="running"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Processed: ",t.itemsProcessed," | Created: ",t.itemsCreated," | Updated: ",t.itemsUpdated," | Deleted: ",t.itemsDeleted]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f(t.startedAt)})]})},t.id||s)})})]},"overview"),r==="queue"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-primary"}),"Work Queue"]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","processing","completed"].map(t=>e.jsx("button",{onClick:()=>V(t),className:i("text-xs px-2 py-1 rounded-full transition-colors",j===t?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:t},t))})]}),x.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(K,{className:"w-8 h-8 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Queue is empty"})]}):e.jsx("div",{className:"divide-y divide-border",children:x.filter(t=>j==="all"||t.status===j).slice(0,20).map((t,s)=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",t.action==="delete"?"bg-red-500/10 text-red-500":t.action==="improve"?"bg-purple-500/10 text-purple-500":"bg-amber-500/10 text-amber-500"),children:t.action==="delete"?e.jsx(P,{className:"w-4 h-4"}):t.action==="improve"?e.jsx(T,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(U,{itemType:t.itemType,itemId:t.itemId}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.status==="pending"?"bg-amber-500/20 text-amber-500":t.status==="processing"?"bg-blue-500/20 text-blue-500":t.status==="completed"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||"No reason specified"})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xs font-medium",children:["P",t.priority]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f(t.createdAt)})]})]})},t.id||s))})]},"queue"),r==="ledger"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-primary"}),"Audit Ledger"]})}),B.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(S,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No ledger entries yet"})]}):e.jsx("div",{className:"divide-y divide-border",children:B.slice(0,30).map((t,s)=>{const l=q(t.botName),m=l.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("w-8 h-8 rounded-lg flex items-center justify-center",l.color),children:e.jsx(m,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",t.action==="create"?"bg-cyan-500/20 text-cyan-500":t.action==="update"?"bg-purple-500/20 text-purple-500":t.action==="delete"?"bg-red-500/20 text-red-500":t.action==="verify"?"bg-green-500/20 text-green-500":"bg-amber-500/20 text-amber-500"),children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(U,{itemType:t.itemType,itemId:t.itemId})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||`${t.action} ${t.itemId}`})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:f(t.createdAt)})]})},t.id||s)})})]},"ledger")]}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 p-4 border border-border rounded-xl bg-muted/20",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-primary"}),"3-Bot Pipeline"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3 text-cyan-500"})," Creator"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3 text-amber-500"})," Verifier"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3 text-purple-500"})," Processor"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Creator generates content → Verifier checks quality and flags issues → Processor improves or removes flagged content"})]})]})})]})}export{Te as default};
