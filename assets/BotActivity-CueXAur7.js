import{d as w,j as e,m as h,r as d,M,p as n,Z as P,A as J,C as K,u as X}from"./index-CMsGYV2p.js";import{S as Y}from"./SEOHead-BWjHgY-I.js";import{A as ee}from"./AppLayout-CQfDsQ8w.js";import"./Button-DD9OvEE2.js";import{T as te}from"./trending-up-C20GRx3V.js";import{B as T}from"./bot-DQN5FSqv.js";import{E as D}from"./eye-C2HYEdU2.js";import{S as I}from"./sparkles-DEeSXtoS.js";import{T as U}from"./trash-2-CPEq8Rsh.js";import{A as _}from"./activity-Cx1_ZUZM.js";import{H as z}from"./history-C0Jp4-Fl.js";import{C as se}from"./clock-BY2J6rGS.js";import{F as A}from"./file-text-DywU7zA4.js";import{E as re}from"./external-link-Bs9cCnYe.js";import{M as ae}from"./UnifiedSearch-B4qVA91E.js";import{C as ie}from"./UnifiedNav-CxKn0daf.js";import"./tag-Br_JP9UY.js";import"./use-unified-toast-Ktf_tvnd.js";import"./chart-column-tDt9d-gb.js";import"./user-DTW7hPws.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oe=w("circle-question-mark",ne);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],S=w("list-todo",ce);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],le=w("trending-down",de);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Q=w("wrench",xe),me={default:{bg:"bg-card border-border",text:"text-foreground",iconBg:"bg-primary/10"},success:{bg:"bg-green-500/5 border-green-500/20",text:"text-green-500",iconBg:"bg-green-500/10"},warning:{bg:"bg-yellow-500/5 border-yellow-500/20",text:"text-yellow-500",iconBg:"bg-yellow-500/10"},danger:{bg:"bg-red-500/5 border-red-500/20",text:"text-red-500",iconBg:"bg-red-500/10"},info:{bg:"bg-blue-500/5 border-blue-500/20",text:"text-blue-500",iconBg:"bg-blue-500/10"}},ue={sm:{padding:"p-3",value:"text-xl",label:"text-xs",icon:"w-8 h-8"},md:{padding:"p-4",value:"text-2xl",label:"text-sm",icon:"w-10 h-10"},lg:{padding:"p-6",value:"text-3xl",label:"text-base",icon:"w-12 h-12"}};function N({label:s,value:a,icon:o,trend:i,trendLabel:c,variant:p="default",size:l="md",description:b,animated:j=!0,className:C="",onClick:v}){const g=me[p],x=ue[l],f=e.jsxs("div",{className:`
        ${g.bg} rounded-xl border ${x.padding}
        ${v?"cursor-pointer hover:border-primary/30 hover:shadow-lg transition-all":""}
        ${C}
      `,onClick:v,children:[o&&e.jsx("div",{className:`${x.icon} rounded-xl ${g.iconBg} flex items-center justify-center mb-3`,children:e.jsx("span",{className:g.text,children:o})}),e.jsx("div",{className:`${x.value} font-bold ${g.text}`,children:a}),e.jsx("div",{className:`${x.label} text-muted-foreground mt-1`,children:s}),b&&e.jsx("div",{className:"text-xs text-muted-foreground/70 mt-1",children:b}),i!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-xs ${i>=0?"text-green-500":"text-red-500"}`,children:[i>=0?e.jsx(te,{className:"w-3 h-3"}):e.jsx(le,{className:"w-3 h-3"}),e.jsxs("span",{className:"font-medium",children:[i>=0?"+":"",i,"%"]}),c&&e.jsx("span",{className:"text-muted-foreground ml-1",children:c})]})]});return j?e.jsx(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:f}):f}const F={creator:{name:"Creator Bot",icon:I,color:"text-cyan-500 bg-cyan-500/10 border-cyan-500/30",gradient:"from-cyan-500 to-blue-500",description:"Creates questions, challenges, voice keywords"},verifier:{name:"Verifier Bot",icon:D,color:"text-amber-500 bg-amber-500/10 border-amber-500/30",gradient:"from-amber-500 to-orange-500",description:"Quality checks, detects issues, flags content"},processor:{name:"Processor Bot",icon:Q,color:"text-purple-500 bg-purple-500/10 border-purple-500/30",gradient:"from-purple-500 to-pink-500",description:"Improves or deletes flagged content"}};function E(s){return F[s]||{name:s,icon:T,color:"text-gray-500 bg-gray-500/10 border-gray-500/30",gradient:"from-gray-500 to-gray-600",description:"Unknown bot"}}function y(s){if(!s)return"never";const a=new Date(s),i=new Date().getTime()-a.getTime(),c=Math.floor(i/6e4),p=Math.floor(i/36e5),l=Math.floor(i/864e5);return c<1?"just now":c<60?`${c}m ago`:p<24?`${p}h ago`:l<7?`${l}d ago`:a.toLocaleDateString()}function pe(s,a){if(!a)return null;switch(s){case"question":return`/?search=${encodeURIComponent(a)}`;case"challenge":return`/coding/${a}`;case"test":return"/tests";case"voice_keyword":return"/voice-interview";default:return null}}function ge(s){switch(s){case"question":return e.jsx(oe,{className:"w-3 h-3"});case"challenge":return e.jsx(ie,{className:"w-3 h-3"});case"test":return e.jsx(A,{className:"w-3 h-3"});case"voice_keyword":return e.jsx(ae,{className:"w-3 h-3"});default:return e.jsx(A,{className:"w-3 h-3"})}}function O({itemType:s,itemId:a,className:o}){const[,i]=X(),c=pe(s,a);return c?e.jsxs("button",{onClick:()=>i(c),className:n("inline-flex items-center gap-1 px-1.5 py-0.5 bg-primary/10 hover:bg-primary/20 text-primary rounded text-xs font-mono transition-colors",o),title:`View ${s}: ${a}`,children:[ge(s),e.jsx("span",{className:"truncate max-w-[120px]",children:a}),e.jsx(re,{className:"w-2.5 h-2.5 opacity-60"})]}):e.jsx("span",{className:o,children:a})}function $({active:s,onClick:a,children:o,icon:i}){return e.jsxs("button",{onClick:a,className:n("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all",s?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[e.jsx(i,{className:"w-4 h-4"}),o]})}function qe(){const[s,a]=d.useState("overview"),[o,i]=d.useState([]),[c,p]=d.useState([]),[l,b]=d.useState([]),[j,C]=d.useState([]),[v,g]=d.useState(!0),[x,f]=d.useState(!1),[k,V]=d.useState("all"),B=d.useCallback(async()=>{try{const t=await fetch("/data/bot-monitor.json");if(t.ok){const r=await t.json();i(r.stats||[]),p(r.runs||[]),b(r.queue||[]),C(r.ledger||[])}}catch(t){console.error("Failed to fetch bot data:",t),i([{botName:"creator",totalRuns:45,successfulRuns:42,totalCreated:156,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"verifier",totalRuns:38,successfulRuns:38,totalCreated:0,totalUpdated:0,totalDeleted:0,lastRun:new Date().toISOString()},{botName:"processor",totalRuns:22,successfulRuns:20,totalCreated:0,totalUpdated:45,totalDeleted:12,lastRun:new Date().toISOString()}])}finally{g(!1),f(!1)}},[]);d.useEffect(()=>{B()},[B]);const L=()=>{f(!0),B()},H=o.reduce((t,r)=>t+(r.totalCreated||0),0),W=o.reduce((t,r)=>t+(r.totalUpdated||0),0),Z=o.reduce((t,r)=>t+(r.totalDeleted||0),0),q=l.filter(t=>t.status==="pending").length;return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Bot Monitor - AI Content Pipeline | Interview Prep",description:"Monitor the 3-bot AI pipeline: Creator, Verifier, and Processor bots working together to maintain high-quality interview content.",canonical:"https://open-interview.github.io/bot-activity"}),e.jsx(ee,{title:"Bot Monitor",showBackOnMobile:!0,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"}),"Bot Monitor"]}),e.jsx("button",{onClick:L,disabled:x,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(M,{className:n("w-4 h-4",x&&"animate-spin")})})]}),e.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:e.jsx("button",{onClick:L,disabled:x,className:"p-2 hover:bg-muted rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(M,{className:n("w-4 h-4",x&&"animate-spin")})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries(F).map(([t,r],m)=>{const u=o.find(R=>R.botName===t),G=r.icon;return e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:n("relative overflow-hidden rounded-xl border p-4",r.color),children:[e.jsx("div",{className:n("absolute top-0 right-0 w-32 h-32 opacity-10 blur-2xl rounded-full bg-gradient-to-br",r.gradient)}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:n("w-10 h-10 rounded-xl flex items-center justify-center bg-gradient-to-br",r.gradient),children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:u?.totalRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Runs"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-500",children:u?.successfulRuns||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:"Success"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:t==="creator"?u?.totalCreated||0:t==="verifier"?l.filter(R=>R.createdBy==="verifier").length:u?.totalUpdated||0}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:t==="creator"?"Created":t==="verifier"?"Flagged":"Fixed"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-current/10 text-xs text-muted-foreground",children:["Last run: ",y(u?.lastRun||"")]})]})]},t)})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(N,{icon:e.jsx(I,{className:"w-4 h-4"}),value:H,label:"Created",variant:"info",size:"md",animated:!0}),e.jsx(N,{icon:e.jsx(P,{className:"w-4 h-4"}),value:W,label:"Updated",variant:"default",size:"md",animated:!0}),e.jsx(N,{icon:e.jsx(U,{className:"w-4 h-4"}),value:Z,label:"Deleted",variant:"danger",size:"md",animated:!0}),e.jsx(N,{icon:e.jsx(S,{className:"w-4 h-4"}),value:q,label:"Pending",variant:"warning",size:"md",animated:!0})]}),e.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx($,{active:s==="overview",onClick:()=>a("overview"),icon:_,children:"Recent Runs"}),e.jsxs($,{active:s==="queue",onClick:()=>a("queue"),icon:S,children:["Work Queue (",q,")"]}),e.jsx($,{active:s==="ledger",onClick:()=>a("ledger"),icon:z,children:"Audit Ledger"})]}),e.jsxs(J,{mode:"wait",children:[s==="overview"&&e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-primary"}),"Recent Bot Runs"]})}),v?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(M,{className:"w-6 h-6 animate-spin mx-auto text-primary mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(T,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent runs"})]}):e.jsx("div",{className:"divide-y divide-border",children:c.slice(0,10).map((t,r)=>{const m=E(t.botName),u=m.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-lg flex items-center justify-center",m.color),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:m.name}),e.jsx("span",{className:n("text-xs px-2 py-0.5 rounded-full",t.status==="completed"?"bg-green-500/20 text-green-500":t.status==="running"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Processed: ",t.itemsProcessed," | Created: ",t.itemsCreated," | Updated: ",t.itemsUpdated," | Deleted: ",t.itemsDeleted]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y(t.startedAt)})]})},t.id||r)})})]},"overview"),s==="queue"&&e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-primary"}),"Work Queue"]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","processing","completed"].map(t=>e.jsx("button",{onClick:()=>V(t),className:n("text-xs px-2 py-1 rounded-full transition-colors",k===t?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:t},t))})]}),l.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(K,{className:"w-8 h-8 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Queue is empty"})]}):e.jsx("div",{className:"divide-y divide-border",children:l.filter(t=>k==="all"||t.status===k).slice(0,20).map((t,r)=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-lg flex items-center justify-center",t.action==="delete"?"bg-red-500/10 text-red-500":t.action==="improve"?"bg-purple-500/10 text-purple-500":"bg-amber-500/10 text-amber-500"),children:t.action==="delete"?e.jsx(U,{className:"w-4 h-4"}):t.action==="improve"?e.jsx(P,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(O,{itemType:t.itemType,itemId:t.itemId}),e.jsx("span",{className:n("text-xs px-2 py-0.5 rounded-full",t.status==="pending"?"bg-amber-500/20 text-amber-500":t.status==="processing"?"bg-blue-500/20 text-blue-500":t.status==="completed"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"),children:t.status})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||"No reason specified"})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xs font-medium",children:["P",t.priority]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y(t.createdAt)})]})]})},t.id||r))})]},"queue"),s==="ledger"&&e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-card border border-border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-primary"}),"Audit Ledger"]})}),j.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(A,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No ledger entries yet"})]}):e.jsx("div",{className:"divide-y divide-border",children:j.slice(0,30).map((t,r)=>{const m=E(t.botName),u=m.icon;return e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-lg flex items-center justify-center",m.color),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:m.name}),e.jsx("span",{className:n("text-xs px-2 py-0.5 rounded-full",t.action==="create"?"bg-cyan-500/20 text-cyan-500":t.action==="update"?"bg-purple-500/20 text-purple-500":t.action==="delete"?"bg-red-500/20 text-red-500":t.action==="verify"?"bg-green-500/20 text-green-500":"bg-amber-500/20 text-amber-500"),children:t.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.itemType}),e.jsx(O,{itemType:t.itemType,itemId:t.itemId})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:t.reason||`${t.action} ${t.itemId}`})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:y(t.createdAt)})]})},t.id||r)})})]},"ledger")]}),e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 p-4 border border-border rounded-xl bg-muted/20",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-primary"}),"3-Bot Pipeline"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3 text-cyan-500"})," Creator"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3 text-amber-500"})," Verifier"]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3 text-purple-500"})," Processor"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Creator generates content → Verifier checks quality and flags issues → Processor improves or removes flagged content"})]})]})})]})}export{qe as default};
